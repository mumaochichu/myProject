// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/promiseUtils ../../../../Point ./glb ./gltf ./gltftypes ./imageutils ./asset ./scene ./node ./types".split(" "),function(w,a,p,k,q,r,e,l,t,u,v,b){function f(b,d,c){d=d||{};b=new r.GLTF(b,d,c);c=b.params;c?c.origin||(c.origin=new k({x:-1,y:-1,z:-1})):c={origin:new k({x:-1,y:-1,z:-1})};var f=c.origin,g=b.gltf,m=1,n=1,h=null;return p.eachAlways(g.extras.promises).then(function(){var b={origin:f};delete g.extras;var c=JSON.stringify(g,function(a,c){if("extras"!==
a){if(c instanceof ArrayBuffer){if(l.isArrayBufferPNG(c))switch(d.imageOutputType){case e.ImageOutputType.DataURI:case e.ImageOutputType.GLB:break;default:return a="img"+n+".png",n++,b[a]=c,a}switch(d.bufferOutputType){case e.BufferOutputType.DataURI:return l.encodeBase64DataUri(c);case e.BufferOutputType.GLB:if(h)throw Error("Already encountered an ArrayBuffer, there should only be one in the GLB format.");h=c;return;default:return a="data"+m+".bin",m++,b[a]=c,a}}return c}},"number"===typeof d.jsonSpacing?
d.jsonSpacing:4);d.bufferOutputType===e.BufferOutputType.GLB||d.imageOutputType===e.ImageOutputType.GLB?b[a.MODEL_NAME_GLB]=(new q.GLB(c,h)).buffer:b[a.MODEL_NAME_GLTF]=c;return b})}Object.defineProperty(a,"__esModule",{value:!0});a.Asset=t.Asset;a.Scene=u.Scene;a.Node=v.Node;a.AlphaMode=b.AlphaMode;a.DataType=b.DataType;a.BufferOutputType=b.BufferOutputType;a.ImageOutputType=b.ImageOutputType;a.ColorMode=b.ColorMode;a.ComponentType=b.ComponentType;a.FilterMode=b.FilterMode;a.MeshMode=b.MeshMode;
a.MODEL_NAME_GLTF="model.gltf";a.MODEL_NAME_GLB="model.glb";a.exportGLTF=f;a.exportGLB=function(a,b){return f(a,{bufferOutputType:e.BufferOutputType.GLB,imageOutputType:e.ImageOutputType.GLB,jsonSpacing:0},b)}});