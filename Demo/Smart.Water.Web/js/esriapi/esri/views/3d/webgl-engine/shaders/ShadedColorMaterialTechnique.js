// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../core/libs/gl-matrix-2/vec4f64 ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/Transform.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ./ShadedColorMaterial.glsl ../../../webgl/Program ../../../webgl/renderState @dojo/framework/shim/Promise".split(" "),function(l,k,e,m,n,p,q,f,d,r,t,u,g){Object.defineProperty(k,"__esModule",
{value:!0});f=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}e.__extends(a,d);a.prototype.initializeProgram=function(b){var c=a.shader.get(),h=this.configuration,c=c.build({slicePlaneEnabled:h.slicePlaneEnabled,sliceHighlightDisabled:h.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1});return new u(b.rctx,c.generateSource("vertex"),c.generateSource("fragment"),r.Default3D)};a.prototype.bindPass=function(b,c,a){b=c.color;var h=c.shadingTint;this.program.setUniform4fv("color",
b);this.program.setUniform4fv("shadedColor",this.blendColor(v,h,b));this.program.setUniform3fv("shadingDirection",c.shadingDirection);this.program.setUniformMatrix4fv("viewNormal",a.viewInvTransp)};a.prototype.blendColor=function(b,c,a){var d=1-c[3],e=c[3]+a[3]*d;if(0===e)return b[3]=e,b;b[0]=(c[0]*c[3]+a[0]*a[3]*d)/e;b[1]=(c[1]*c[3]+a[1]*a[3]*d)/e;b[2]=(c[2]*c[3]+a[2]*a[3]*d)/e;b[3]=a[3];return b};a.prototype.bindDraw=function(b){p.Transform.bindUniforms(this.program,b);n.Slice.bindUniformsWithOrigin(this.program,
this.configuration,b)};a.prototype.initializePipeline=function(){var b=this.configuration,a=0===b.output?b.transparent&&g.separateBlendingParams(770,1,771,771):null;return g.makePipelineState({blending:a,culling:function(a){return 0!==a&&{face:1===a?1028:1029,mode:2305}}(b.cullFace),depthTest:{func:515},depthWrite:b.writeDepth&&g.defaultDepthWriteParams,colorWrite:g.defaultColorWriteParams})};a.shader=new q.ReloadableShaderModule(t,function(){return new Promise(function(a,c){l(["./ShadedColorMaterial.glsl"],
a,c)})});return a}(f.ShaderTechnique);k.ShadedColorMaterialTechnique=f;f=function(f){function a(){var a=null!==f&&f.apply(this,arguments)||this;a.output=0;a.cullFace=0;a.slicePlaneEnabled=!1;a.sliceHighlightDisabled=!1;a.transparent=!1;a.writeDepth=!0;return a}e.__extends(a,f);e.__decorate([d.parameter({count:7})],a.prototype,"output",void 0);e.__decorate([d.parameter({count:3})],a.prototype,"cullFace",void 0);e.__decorate([d.parameter()],a.prototype,"slicePlaneEnabled",void 0);e.__decorate([d.parameter()],
a.prototype,"sliceHighlightDisabled",void 0);e.__decorate([d.parameter()],a.prototype,"transparent",void 0);e.__decorate([d.parameter()],a.prototype,"writeDepth",void 0);return a}(d.ShaderTechniqueConfiguration);k.ShadedColorMaterialTechniqueConfiguration=f;var v=m.vec4f64.create()});