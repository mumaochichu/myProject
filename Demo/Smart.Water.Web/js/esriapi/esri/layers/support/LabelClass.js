// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../symbols ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./LabelExpressionInfo ./labelUtils ../../symbols/support/defaults ../../symbols/support/jsonUtils".split(" "),function(w,x,c,m,r,t,n,e,p,f,u,g){function k(c){return c?"service"===c.origin?!1:!c.layer||"map-image"!==c.layer.type:!0}var h=new r.default({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",
esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",
esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",
esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});return function(q){function b(a){a=q.call(this,a)||this;a.name=null;a.deconflictionStrategy="static";a.labelExpression=null;a.labelExpressionInfo=null;a.labelPlacement=null;a.maxScale=0;a.minScale=0;a.symbol=u.defaultTextSymbol2D;a.useCodedValues=void 0;a.where=null;return a}c.__extends(b,q);l=b;b.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?
!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),v=d[3],f=c(b[d[4]],d[5],d[6]);switch(v){case "AND":return e&&f;case "OR":return e||f}}return!1}catch(y){console.log("Error.: can't parse \x3d "+a)}};b.prototype.writeDeconflictionStrategy=function(a,b,c,d){"static"!==a&&(b[c]=a)};
b.prototype.readLabelExpression=function(a,b){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a};b.prototype.writeLabelExpression=function(a,b,c,d){this.labelExpressionInfo&&(k(d)||d&&"service"===d.origin)&&(null!=this.labelExpressionInfo.value?a=this.labelExpressionInfo.value.replace(/\{/g,"[").replace(/\}/g,"]"):null!=this.labelExpressionInfo.expression&&(d=f.getSingleFieldArcadeExpression(this.labelExpressionInfo.expression))&&(a="["+d+"]"));null!=a&&(b[c]=a)};b.prototype.writeLabelExpressionInfo=
function(a,b,c,d){if(null==a&&null!=this.labelExpression&&k(d))a=new p({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(d);a.expression&&(b[c]=a)};b.prototype.writeMaxScale=function(a,b){if(a||this.minScale)b.maxScale=a};b.prototype.writeMinScale=function(a,b){if(a||this.maxScale)b.minScale=a};b.prototype.getLabelExpression=function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type=
"conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):null!=this.labelExpression&&(a.expression=this.labelExpression.replace(/\[/g,"{").replace(/\]/g,"}"),a.type="conventional");return a};b.prototype.getLabelExpressionArcade=function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return f.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null};b.prototype.getLabelExpressionSingleField=
function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return f.getSingleFieldTemplatedString(a.expression);case "arcade":return f.getSingleFieldArcadeExpression(a.expression)}return null};b.prototype.clone=function(){return new l({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:n.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,
symbol:n.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})};var l;c.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);c.__decorate([e.property({type:String})],b.prototype,"deconflictionStrategy",void 0);c.__decorate([e.writer("deconflictionStrategy")],b.prototype,"writeDeconflictionStrategy",null);c.__decorate([e.property({type:String,json:{write:{allowNull:!0}}})],b.prototype,"labelExpression",void 0);c.__decorate([e.reader("labelExpression")],
b.prototype,"readLabelExpression",null);c.__decorate([e.writer("labelExpression")],b.prototype,"writeLabelExpression",null);c.__decorate([e.property({type:p,json:{write:{overridePolicy:function(a,b,c){return k(c)?{allowNull:!0}:{enabled:!1}}}}})],b.prototype,"labelExpressionInfo",void 0);c.__decorate([e.writer("labelExpressionInfo")],b.prototype,"writeLabelExpressionInfo",null);c.__decorate([e.property({type:h.apiValues,json:{type:h.jsonValues,read:h.read,write:h.write}})],b.prototype,"labelPlacement",
void 0);c.__decorate([e.property({type:Number})],b.prototype,"maxScale",void 0);c.__decorate([e.writer("maxScale")],b.prototype,"writeMaxScale",null);c.__decorate([e.property({type:Number})],b.prototype,"minScale",void 0);c.__decorate([e.writer("minScale")],b.prototype,"writeMinScale",null);c.__decorate([e.property({types:m.symbolTypesLabel,json:{origins:{"web-scene":{types:m.symbolTypesLabel3D,read:g.read,write:g.writeTarget,default:null}},read:g.read,write:g.writeTarget,default:null}})],b.prototype,
"symbol",void 0);c.__decorate([e.property({type:Boolean,json:{write:!0}})],b.prototype,"useCodedValues",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"where",void 0);return b=l=c.__decorate([e.subclass("esri.layers.support.LabelClass")],b)}(t.JSONSupport)});