// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../core/Collection ../core/collectionUtils ../core/jsonMap ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ../support/persistableUrlUtils ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),function(K,L,c,n,p,w,x,g,h,e,y,q,z,A,
B,C,D,E,F,k,G,H,l,I){var m={icon:B,object:D,line:C,path:E,fill:A,extrude:z,text:G,water:H},J=n.ofType({base:k,key:"type",typeMap:m}),r=w.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),t=x.getLogger("esri.symbols.Symbol3D");return function(u){function b(a){a=u.call(this,a)||this;a.styleOrigin=null;a.thumbnail=null;a.type=null;var b=a.__accessor__&&a.__accessor__.metadatas&&a.__accessor__.metadatas.symbolLayers;
a._set("symbolLayers",new (b&&b.type||n));return a}c.__extends(b,u);Object.defineProperty(b.prototype,"color",{get:function(){return null},set:function(a){t.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){p.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});b.prototype.readSymbolLayers=function(a,
b,d){b=[];for(var f=0;f<a.length;f++){var c=a[f],e=k.typeJSONDictionary.read(c.type),v=e&&m[e];v?(c=new v,c.read(a[f],d),b.push(c)):(t.warn("Unknown symbol layer type: "+e),d&&d.messages&&d.messages.push(new h("symbol-layer:unsupported","Symbol layers of type '"+(e||c.type||"unknown")+"' are not supported",{definition:c,context:d})))}return b};b.prototype.readStyleOrigin=function(a,b,d){if(a.styleUrl&&a.name)return b=q.fromJSON(a.styleUrl,d),new l({styleUrl:b,name:a.name});if(a.styleName&&a.name)return new l({portal:d&&
d.portal||y.getDefault(),styleName:a.styleName,name:a.name});d&&d.messages&&d.messages.push(new h("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:d,definition:a}))};b.prototype.writeStyleOrigin=function(a,b,d,c){a.styleUrl&&a.name?(d=q.toJSON(a.styleUrl,c),g.isAbsolute(d)&&(d=g.normalize(d)),b.styleOrigin={styleUrl:d,name:a.name}):a.styleName&&a.name&&(a.portal&&c&&c.portal&&!g.hasSamePortal(a.portal.restUrl,c.portal.restUrl)?
c&&c.messages&&c.messages.push(new h("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})};b.prototype.normalizeCtorArgs=function(a){return a instanceof k||a&&m[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};c.__decorate([e.property({json:{read:!1,write:!1}})],b.prototype,"color",null);c.__decorate([e.property({type:J,nonNullable:!0,
json:{write:!0}}),e.cast(p.castForReferenceSetter)],b.prototype,"symbolLayers",null);c.__decorate([e.reader("symbolLayers")],b.prototype,"readSymbolLayers",null);c.__decorate([e.property({type:l})],b.prototype,"styleOrigin",void 0);c.__decorate([e.reader("styleOrigin")],b.prototype,"readStyleOrigin",null);c.__decorate([e.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],b.prototype,"writeStyleOrigin",null);c.__decorate([e.property({type:I.default,
json:{read:!1}})],b.prototype,"thumbnail",void 0);c.__decorate([e.property({type:r.apiValues,readOnly:!0,json:{type:r.jsonValues,read:!1}})],b.prototype,"type",void 0);return b=c.__decorate([e.subclass("esri.symbols.Symbol3D")],b)}(F)});