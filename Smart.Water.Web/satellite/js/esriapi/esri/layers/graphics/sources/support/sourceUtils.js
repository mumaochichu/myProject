// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils @dojo/framework/shim/Promise".split(" "),function(u,b,f,k,l){function n(a){return new v(a)}function r(){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(a){switch(a.label){case 0:return c?[2,c]:[4,new Promise(function(a,g){u(["../../../../geometry/geometryEngineJSON"],a,g)})];case 1:return c=a.sent(),[2,c]}})})}Object.defineProperty(b,"__esModule",{value:!0});
var w=function(){return function(){this.description=this.code=null}}(),v=function(){return function(a){this.error=new w;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=a}}();b.createFeatureEditErrorResult=n;var x=function(){return function(a){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=a}}();b.createFeatureEditSuccessResult=function(a){return new x(a)};var p=new Set;b.mixAttributes=function(a,t,g,b,c,f){void 0===c&&(c=!1);p.clear();for(var k in b){var d=
a.get(k);if(d){var m=b[k],e;e=d;var h=m,q=h;"string"===typeof h&&l.isNumericField(e)?q=parseFloat(h):null!=h&&l.isStringField(e)&&"string"!==typeof h&&(q=String(h));e=l.sanitizeNullFieldValue(q);e!==m&&f&&f.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:d,originalValue:m,sanitizedValue:e}});p.add(d.name);if(d&&(c||d.editable)){if(m=l.validateFieldValue(d,e))return n(l.validationErrorToString(m,d,e));g[d.name]=e}}}for(a=0;a<t.length;a++)if(g=
t[a],!p.has(g.name))return n('missing required field "'+g.name+'"');return null};var c;b.simplify=function(a,b){if(!a||!k.isValid(b))return a;if("rings"in a||"paths"in a){if(!c)throw new TypeError("geometry engine not loaded");return c.simplify(b,a)}return a};b.loadGeometryEngine=r;b.loadGeometryEngineForSimplify=function(a,b){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(c){switch(c.label){case 0:return!k.isValid(a)||"esriGeometryPolygon"!==b&&"esriGeometryPolyline"!==
b?[3,2]:[4,r()];case 1:c.sent(),c.label=2;case 2:return[2]}})})}});