// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../PopupTemplate ../../renderers ../../request ../../core/jsonMap ../../core/Loadable ../../core/maybe ../../core/Promise ../../core/promiseUtils ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/SpatialReference ./BuildingSublayer ../support/commonProperties ../support/fieldProperties ../support/FieldsIndex ../support/I3SLayerDefinitions ../../renderers/support/jsonUtils ../../support/popupUtils ../../symbols/support/ElevationInfo".split(" "),
function(C,D,b,k,l,m,n,p,q,r,t,c,u,v,w,x,y,z,d,e,A,B){var f=y.defineFieldProperties();return function(g){function a(a){a=g.call(this,a)||this;a.type="building-component";a.nodePages=null;a.materialDefinitions=null;a.textureSetDefinitions=null;a.geometryDefinitions=null;a.serviceUpdateTimeStamp=null;a.fields=null;a.outFields=null;a.listMode="show";a.renderer=null;a.definitionExpression=null;a.popupEnabled=!0;a.popupTemplate=null;a.layerType="3d-object";return a}b.__extends(a,g);Object.defineProperty(a.prototype,
"parsedUrl",{get:function(){return this.layer?{path:this.layer.parsedUrl.path+"/sublayers/"+this.id,query:this.layer.parsedUrl.query}:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fieldsIndex",{get:function(){return new z(this.fields)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"objectIdField",{get:function(){if(null!=this.fields)for(var a=0,b=this.fields;a<b.length;a++){var c=b[a];if("oid"===c.type)return c.name}return null},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0});a.prototype.load=function(a){a=q.isSome(a)?a.signal:null;this.addResolvingPromise(this._fetchService(a));return t.resolve(this)};a.prototype.createPopupTemplate=function(a){return A.createPopupTemplate(this,a)};a.prototype._fetchService=function(a){return b.__awaiter(this,void 0,void 0,function(){var c,h;return b.__generator(this,function(b){switch(b.label){case 0:return[4,
m(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:a})];case 1:return c=b.sent(),h=c.data,this.read(h,{origin:"service",url:this.parsedUrl}),[2]}})})};a.prototype.getField=function(a){return this.fieldsIndex.get(a)};a.prototype.getFieldDomain=function(a){return(a=this.getField(a))&&a.domain?a.domain:null};Object.defineProperty(a.prototype,"geometryType",{get:function(){return"3d-object"===this.layerType?"mesh":"point"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"profile",{get:function(){return"3d-object"===this.layerType?"mesh-pyramids":"points"},enumerable:!0,configurable:!0});b.__decorate([c.property({readOnly:!0,dependsOn:["layer","id"]})],a.prototype,"parsedUrl",null);b.__decorate([c.property({type:d.I3SNodePageDefinition,readOnly:!0})],a.prototype,"nodePages",void 0);b.__decorate([c.property({type:[d.I3SMaterialDefinition],readOnly:!0})],a.prototype,"materialDefinitions",void 0);b.__decorate([c.property({type:[d.I3STextureSetDefinition],readOnly:!0})],
a.prototype,"textureSetDefinitions",void 0);b.__decorate([c.property({type:[d.I3SGeometryDefinition],readOnly:!0})],a.prototype,"geometryDefinitions",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"serviceUpdateTimeStamp",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"store",void 0);b.__decorate([c.property({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],a.prototype,"rootNode",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"attributeStorageInfo",
void 0);b.__decorate([c.property(f.fields)],a.prototype,"fields",void 0);b.__decorate([c.property({readOnly:!0,dependsOn:["fields"]})],a.prototype,"fieldsIndex",null);b.__decorate([c.property(f.outFields)],a.prototype,"outFields",void 0);b.__decorate([c.property({type:String,dependsOn:["fields"],readOnly:!0})],a.prototype,"objectIdField",null);b.__decorate([c.property({readOnly:!0,type:u,aliasOf:"layer.fullExtent"})],a.prototype,"fullExtent",void 0);b.__decorate([c.property({readOnly:!0,type:v,aliasOf:"layer.spatialReference"})],
a.prototype,"spatialReference",void 0);b.__decorate([c.property({readOnly:!0,aliasOf:"layer.version"})],a.prototype,"version",void 0);b.__decorate([c.property({readOnly:!0,type:B,aliasOf:"layer.elevationInfo"})],a.prototype,"elevationInfo",void 0);b.__decorate([c.property({readOnly:!0,type:Number,aliasOf:"layer.minScale"})],a.prototype,"minScale",void 0);b.__decorate([c.property({readOnly:!0,type:Number,aliasOf:"layer.maxScale"})],a.prototype,"maxScale",void 0);b.__decorate([c.property({type:["hide",
"show"],json:{write:!0}})],a.prototype,"listMode",void 0);b.__decorate([c.property({types:l.webSceneRendererTypes,json:{origins:{service:{read:{source:"drawingInfo.renderer",reader:e.read}}},read:{source:"layerDefinition.drawingInfo.renderer",reader:e.read},write:{target:"layerDefinition.drawingInfo.renderer"}},value:null})],a.prototype,"renderer",void 0);b.__decorate([c.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],
a.prototype,"definitionExpression",void 0);b.__decorate([c.property(x.popupEnabled)],a.prototype,"popupEnabled",void 0);b.__decorate([c.property({type:k,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],a.prototype,"popupTemplate",void 0);b.__decorate([c.property({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],a.prototype,"normalReferenceFrame",void 0);b.__decorate([c.property({readOnly:!0,json:{read:!1},dependsOn:["fields","title"]})],
a.prototype,"defaultPopupTemplate",null);b.__decorate([c.enumeration(new n.default({"3DObject":"3d-object",Point:"point"}))],a.prototype,"layerType",void 0);b.__decorate([c.property({dependsOn:["layerType"]})],a.prototype,"geometryType",null);b.__decorate([c.property({dependsOn:["layerType"]})],a.prototype,"profile",null);return a=b.__decorate([c.subclass("esri.layers.buildingSublayers.BuildingComponentSublayer")],a)}(p.LoadableMixin(r.EsriPromiseMixin(w)))});