// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/Error ../../core/maybe ../../layers/support/fieldUtils ./support/utils ../support/utils".split(" "),function(z,A,c,n,v,w,p,h){function x(d){return c.__awaiter(this,void 0,void 0,function(){var e,f,g,a,b,q,k,l,r,t,u;return c.__generator(this,function(m){switch(m.label){case 0:if(!(d&&d.layer&&d.view))throw new n("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");e=[0,2,1];f=d.layer;g=c.__rest(d,["layer"]);a=h.createLayerAdapter(f,
e);b=c.__assign({layerAdapter:a},g);b.blurRadius=null==b.blurRadius?10:b.blurRadius;if(!a)throw new n("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+h.getLayerTypeLabels(e).join(", "));q=v.isSome(b.signal)?{signal:b.signal}:null;return[4,a.load(q)];case 1:return m.sent(),l=(k=b.field)?a.getField(k):null,[4,h.getFieldsList({field:k})];case 2:r=m.sent();if(t=p.verifyBasicFieldValidity(a,r,"heatmap-statistics:invalid-parameters"))throw t;if(l&&(u=p.verifyFieldType(a,l,
"heatmap-statistics:invalid-parameters",y)))throw u;return[2,b]}})})}var y=w.numericTypes;return function(d){return c.__awaiter(this,void 0,void 0,function(){var e,f,g;return c.__generator(this,function(a){switch(a.label){case 0:return[4,x(d)];case 1:return e=a.sent(),f=e.layerAdapter,g=c.__rest(e,["layerAdapter"]),[2,f.heatmapStatistics(g)]}})})}});