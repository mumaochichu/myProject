// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ./enums ./WGLContainer ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil".split(" "),function(h,e,f,g,k,l,m){Object.defineProperty(e,"__esModule",{value:!0});e.sortByLevel=function(b,a){return 0!==b.key.level-a.key.level?b.key.level-a.key.level:0!==b.key.row-a.key.row?b.key.row-a.key.row:b.key.col-a.key.col};h=function(b){function a(d){var c=b.call(this)||this;c._tileInfoView=d;return c}f.__extends(a,b);a.prototype.renderChildren=function(d){this.sortChildren(e.sortByLevel);
this.setStencilReference();b.prototype.renderChildren.call(this,d)};a.prototype.createRenderParams=function(d){var c=d.state;return f.__assign(f.__assign({},b.prototype.createRenderParams.call(this,d)),{requiredLevel:this._tileInfoView.getClosestInfoForScale(c.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(c.scale)})};a.prototype.prepareRenderPasses=function(d){var c=this,a=d.registerRenderPass({name:"stencil",brushes:[m.default],drawPhase:g.WGLDrawPhase.DEBUG|g.WGLDrawPhase.MAP,
target:function(){return c.children}}),e=d.registerRenderPass({name:"tileInfo",brushes:[l.default],drawPhase:g.WGLDrawPhase.DEBUG,target:function(){return c.children},has:"esri-tiles-debug"});return f.__spreadArrays(b.prototype.prepareRenderPasses.call(this,d),[a,e])};a.prototype.updateTransforms=function(a){for(var c=0,d=this.children;c<d.length;c++){var b=d[c],e=this._tileInfoView.getTileResolution(b.key);b.setTransform(a,e)}};a.prototype.setStencilReference=function(){for(var a=1,c=0,b=this.children;c<
b.length;c++)b[c].stencilRef=a++};return a}(k.default);e.default=h});