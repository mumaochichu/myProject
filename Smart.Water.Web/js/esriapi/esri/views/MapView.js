// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/BreakpointsOwner":function(){define("require exports tslib ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),function(q,d,g,l,m,b,e){function f(a,h){return h?r[a].valueToClassName[h].split(" "):[]}Object.defineProperty(d,"__esModule",{value:!0});var r={widthBreakpoint:{getValue:function(a){var c=a.viewSize[0];a=a.breakpoints;var k=this.values;return c<=a.xsmall?k.xsmall:c<=a.small?k.small:c<=a.medium?k.medium:c<=a.large?
k.large:k.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",
large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var c=a.viewSize[1];a=a.breakpoints;var k=this.values;return c<=a.xsmall?k.xsmall:c<=a.small?k.small:c<=a.medium?k.medium:
c<=a.large?k.large:k.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",
large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var c=this.values;return a[1]>=a[0]?c.portrait:c.landscape},values:{portrait:"portrait",landscape:"landscape"},
valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},a={xsmall:544,small:768,medium:992,large:1200};d.BreakpointsOwner=function(c){return function(c){function h(){for(var h=[],k=0;k<arguments.length;k++)h[k]=arguments[k];h=c.apply(this,h)||this;h._breakpointsHandles=new m;h.orientation=null;h.widthBreakpoint=null;h.heightBreakpoint=null;h.breakpoints=a;return h}g.__extends(h,c);h.prototype.initialize=function(){this._breakpointsHandles.add(b.init(this,
["breakpoints","size"],this._updateClassNames))};h.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};Object.defineProperty(h.prototype,"breakpoints",{set:function(c){var h=this._get("breakpoints");if(c!==h){h=(h=c)&&h.xsmall<h.small&&h.small<h.medium&&h.medium<h.large;if(!h){var k=JSON.stringify(a,null,2);console.warn("provided breakpoints are not valid, using defaults:"+k)}c=h?c:a;this._set("breakpoints",
g.__assign({},c))}},enumerable:!0,configurable:!0});h.prototype._updateClassNames=function(){if(this.container){var a=l.acquire(),c=l.acquire(),h=!1,k;for(k in r){var b=this[k],e=r[k].getValue({viewSize:this.size,breakpoints:this.breakpoints});b!==e&&(h=!0,this[k]=e,f(k,b).forEach(function(a){return c.push(a)}),f(k,e).forEach(function(c){return a.push(c)}))}h&&(this._applyClassNameChanges(a,c),l.release(a),l.release(c))}};h.prototype._applyClassNameChanges=function(a,c){var h=this.container;h&&(c.forEach(function(a){return h.classList.remove(a)}),
a.forEach(function(a){return h.classList.add(a)}))};h.prototype._removeActiveClassNames=function(){var a=this.container;if(a)for(var c in r)f(c,this[c]).forEach(function(c){return a.classList.remove(c)})};g.__decorate([e.property()],h.prototype,"breakpoints",null);g.__decorate([e.property()],h.prototype,"orientation",void 0);g.__decorate([e.property()],h.prototype,"widthBreakpoint",void 0);g.__decorate([e.property()],h.prototype,"heightBreakpoint",void 0);return h=g.__decorate([e.subclass("esri.views.BreakpointsOwner")],
h)}(c)}})},"esri/views/Magnifier":function(){define(["require","exports","tslib","../core/Accessor","../core/accessorSupport/decorators"],function(q,d,g,l,m){return function(b){function e(e){e=b.call(this,e)||this;e.factor=1.5;e.offsetX=0;e.offsetY=0;e.position=null;e.visible=!1;return e}g.__extends(e,b);Object.defineProperty(e.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});g.__decorate([m.property({type:Number})],e.prototype,"factor",void 0);
g.__decorate([m.property({type:Number})],e.prototype,"offsetX",void 0);g.__decorate([m.property({type:Number})],e.prototype,"offsetY",void 0);g.__decorate([m.property()],e.prototype,"position",void 0);g.__decorate([m.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],e.prototype,"version",null);g.__decorate([m.property({type:Boolean})],e.prototype,"visible",void 0);return e=g.__decorate([m.subclass("esri.views.Magnifier")],e)}(l)})},"esri/views/MapViewBase":function(){define("require exports tslib ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(q,d,g,l,m,b,e,f,r,a,c,h,k,n,p,I,t,x,D,G,w,v,u,z){var y=e.getLogger("esri.views.MapView");return function(e){function n(a){var c=e.call(this,a)||this;c._stationaryTimer=null;c.frameTask=new x.default(c);c.featuresTilingScheme=null;c.fullOpacity=1;c.graphicsView=null;c.initialExtent=null;c.labelManager=null;c.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};c.resizeAlign="center";c.timeline=new z.Timeline;c.type="2d";c.constraints=
new G;c.padding={top:0,right:0,bottom:0,left:0};var h=c.handles,k=function(){return c.notifyChange("updating")};h.add([c.watch("viewpoint",function(){c._lastStationaryEventTimestamp=performance.now();c._flipStationary(160)},!0),c.on("resize",function(a){return c._resizeHandler(a)}),c.watch("animationManager.animation",function(a){c.animation=a}),c.allLayerViews.on("change",function(){k();h.remove("map-view-base-layerViewsUpdating");h.add(c.allLayerViews.map(function(a){return a.watch("updating",k)}),
"map-view-base-layerViewsUpdating")})],"map-view-base");return c}g.__extends(n,e);n.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(n.prototype,"animation",{set:function(a){var c=this,h=this._get("animation");a!==h&&(h&&h.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,h=function(){a===c._get("animation")&&(c._set("animation",null),c.frameTask.requestFrame());
c.frameTask.animationInProgress=!1},a.when(h,h)))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.state.paddedViewState,c=a.center;return new l.Point({x:c[0],y:c[1],spatialReference:a.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var c=this.viewpoint;u.centerAt(c,c,a);this.viewpoint=c}else this._set("center",a),this.notifyChange("initialExtentRequired");else y.error("#center",
"incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"constraints",{set:function(a){var c=this,h=this._get("constraints");h&&(this.handles.remove("map-view-base-constraints"),h.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.state.paddedViewState.viewpoint)),this.handles.add(a.on("update",function(){c.ready&&
c.state&&(c.state.viewpoint=a.fit(c.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"extent",{get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(a){if(null!=a){var c=this._normalizeInput(a);c?c.width&&c.height?this.ready?(a=this.viewpoint,u.setExtent(a,a,c,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",c),this._set("center",
null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):y.error("#extent","invalid extent size"):y.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"initialExtentRequired",{get:function(){var a=this.extent,c=this.center,h=this.scale,k=this.viewpoint,b=this.zoom;
return this.get("map.initialViewProperties.viewpoint")||a||c&&(0!==h||-1!==b)||k?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,
configurable:!0});Object.defineProperty(n.prototype,"rotation",{get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var c=this.viewpoint;u.rotateTo(c,c,a);this.viewpoint=c}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"scale",{get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var c=this.viewpoint;u.scaleTo(c,c,a);this.viewpoint=
c}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"stationary",{get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||
!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&!("layerViews"in a)&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.state.paddedViewState;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var c=this._normalizeInput(a);c?this.ready?(a=new m({targetGeometry:new l.Point,scale:0,rotation:0}),
u.copy(a,c),this.constraints.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",a)):(this._set("viewpoint",c),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?y.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?y.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+
" with view's spatialReference "+JSON.stringify(this.spatialReference)):y.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var c=this._get("extent");c&&(this._set("extent",null),this._set("center",c.center))}this.constraints.effectiveLODs&&
(c=this.viewpoint,u.scaleTo(c,c,this.constraints.zoomToScale(a)),this.viewpoint=c,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});n.prototype.goTo=function(c,h){var k=this;if(c)return a.whenTrueOnce(this,"ready",h&&h.signal).then(function(){k.animation&&(k.animation=null);var a=g.__assign({animate:!0},h),b=u.createAsync(c,k);k._gotoTask={};return a.animate?k._gotoAnimated(b,a):k._gotoImmediate(b,a)});y.error("#goTo()","target cannot be null or undefined")};
n.prototype.hitTest=function(a){return f.reject("Should be implemented by subclasses")};n.prototype.popupHitTest=function(a){var c=this;return this.hitTest(a).then(function(h){return g.__assign(g.__assign({},h),{mapPoint:c.toMap(a)})})};n.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new l.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};n.prototype.isTileInfoRequired=function(){return!0};n.prototype.toScreen=function(a){if(!this.ready)return null;
a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return r.createScreenPoint(a[0],a[1])};n.prototype.pixelSizeAt=function(){return this.ready?this.state.resolution:(y.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};n.prototype.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};n.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};
n.prototype.isSpatialReferenceSupported=function(a,c){return c||this._get("ready")?!0:null!==this._getDefaultViewpoint()};n.prototype.importLayerView=function(a){return D.layerView2DImporter.importLayerView(a)};n.prototype.hasLayerViewModule=function(a){return D.layerView2DImporter.hasLayerViewModule(a)};n.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new I;this.animation.update(a);return this.animation};n.prototype._cancellableGoTo=function(a,
c,h){var k=this,b=h.then(function(){a===k._gotoTask&&(k.animation=null)}).catch(function(h){a===k._gotoTask&&(k.animation=null,c.done||(c.stop(),k.frameTask.animationInProgress=!1));throw h;}),e=f.create(function(a){return a(b)});c.when().catch(function(){a===k._gotoTask&&e.cancel&&e.cancel()});return e};n.prototype._gotoImmediate=function(a,c){var h=this,k=this._gotoTask,e=this._createOrReplaceAnimation(a);a=a.then(function(a){f.throwIfAborted(c);if(k!==h._gotoTask)throw new b("view:goto-interrupted",
"Goto was interrupted");h.viewpoint=e.target=a;e.finish()});return this._cancellableGoTo(k,e,a)};n.prototype._gotoAnimated=function(a,c){var h=this,k=this._gotoTask,e=this._createOrReplaceAnimation(a);a=a.then(function(a){if(k!==h._gotoTask)throw new b("view:goto-interrupted","Goto was interrupted");e.update(a);h.animationManager.animate(e,h.viewpoint,c);return e.when().then(function(){},function(){})});return this._cancellableGoTo(k,e,a)};n.prototype._resizeHandler=function(a){var c=this.state;if(c){var h=
this.state.paddedViewState.viewpoint,k=this.state.paddedViewState.size.concat();c.size=[a.width,a.height];u.resize(h,h,k,this.state.paddedViewState.size,this.resizeAlign);h=this.constraints.constrain(h,null);this.state.viewpoint=h}};n.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new t.default({view:this}));this._set("state",new w({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("featuresTilingScheme",
new v.TileInfoView(k.create({spatialReference:this.spatialReference,size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};n.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);var a=this.state.paddedViewState,c=a.center,h=a.spatialReference,k=a.rotation,a=a.scale,c=new l.Point({x:c[0],y:c[1],spatialReference:h});this._set("viewpoint",null);this._set("extent",
null);this._set("center",c);this._set("zoom",-1);this._set("rotation",k);this._set("scale",a);this._set("spatialReference",h);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this.animation=null};n.prototype._flipStationary=function(a){var c=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(function(){c._stationaryTimer=null;var a=performance.now()-c._lastStationaryEventTimestamp;160>
a&&(c._stationaryTimer=c._flipStationary(a))},a)};n.prototype._normalizeInput=function(a,c){void 0===c&&(c=this.spatialReference);var k=a&&a.targetGeometry||a;return c?k?c.equals(k.spatialReference)?a:h.canProject(k,c)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=h.project(k,c),a):h.project(k,c):null:null:a};n.prototype._getDefaultViewpoint=function(){var a=this.constraints,c=this._get("zoom"),h=this._get("scale"),k=this._normalizeInput(this._get("center")),b=this._normalizeInput(this._get("extent")),
e=this._get("rotation"),n=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==c&&(h=a.zoomToScale(c)):c=-1;var f=null,p=null,c=0,a=n&&n.rotation,x=n&&n.targetGeometry;x&&("extent"===x.type?f=x:"point"===x.type&&(p=x,c=n.scale));n=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));x=this._normalizeInput(this.initialExtent);b=b||f||n||x;k=k||p||b&&b.center;p=this.get("map.initialViewProperties.viewpoint.scale");h=h||c||p||b&&u.extentToScale(b,this.size);
c=this.get("map.initialViewProperties.viewpoint.rotation");return k&&h?new m({targetGeometry:k,scale:h,rotation:e||a||c||0}):null};g.__decorate([c.property()],n.prototype,"_stationaryTimer",void 0);g.__decorate([c.property()],n.prototype,"animation",null);g.__decorate([c.property({readOnly:!0})],n.prototype,"animationManager",void 0);g.__decorate([c.property({value:null,type:l.Point,dependsOn:["state.id","ready"]})],n.prototype,"center",null);g.__decorate([c.property({type:G})],n.prototype,"constraints",
null);g.__decorate([c.property({value:null,type:l.Extent,dependsOn:["state.id","ready"]})],n.prototype,"extent",null);g.__decorate([c.property({readOnly:!0})],n.prototype,"featuresTilingScheme",void 0);g.__decorate([c.property()],n.prototype,"fullOpacity",void 0);g.__decorate([c.property()],n.prototype,"graphicsView",void 0);g.__decorate([c.property({type:l.Extent})],n.prototype,"initialExtent",void 0);g.__decorate([c.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],n.prototype,"initialExtentRequired",
null);g.__decorate([c.property()],n.prototype,"labelManager",void 0);g.__decorate([c.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return g.__assign({top:0,right:0,bottom:0,left:0},a)}})],n.prototype,"padding",null);g.__decorate([c.property({type:Object})],n.prototype,"renderingOptions",void 0);g.__decorate([c.property()],n.prototype,"resizeAlign",void 0);g.__decorate([c.property({readOnly:!0,dependsOn:["state.id"]})],n.prototype,"resolution",null);g.__decorate([c.property({value:0,
type:Number,dependsOn:["state.id","ready"]})],n.prototype,"rotation",null);g.__decorate([c.property({value:0,type:Number,dependsOn:["state.id","ready"]})],n.prototype,"scale",null);g.__decorate([c.property({type:l.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],n.prototype,"spatialReference",void 0);g.__decorate([c.property({readOnly:!0})],n.prototype,"state",void 0);g.__decorate([c.property({dependsOn:["animation","navigating",
"resizing","_stationaryTimer"]})],n.prototype,"stationary",null);g.__decorate([c.property({type:z.Timeline,readOnly:!0})],n.prototype,"timeline",void 0);g.__decorate([c.property({readOnly:!0})],n.prototype,"type",void 0);g.__decorate([c.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],n.prototype,"updating",null);g.__decorate([c.property({value:null,type:m,dependsOn:["state.id","ready"]})],n.prototype,"viewpoint",null);g.__decorate([c.property({value:-1,
dependsOn:["state.id"]})],n.prototype,"zoom",null);return n=g.__decorate([c.subclass("esri.views.MapViewBase")],n)}(n.PopupView(p))})},"esri/layers/support/TileInfo":function(){define("require exports tslib ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(q,d,g,l,m,b,e,f,r,a,c,h,k){var n=new m.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(b){function p(a){a=b.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}g.__extends(p,b);t=p;p.create=function(a){void 0===
a&&(a={size:256,spatialReference:l.SpatialReference.WebMercator});var h=a.resolutionFactor||1,k=a.scales,b=a.size||256,n=a.spatialReference||l.SpatialReference.WebMercator;if(!c.isValid(n)){h=[];if(k)for(a=0;a<k.length;a++){var p=k[a];h.push({level:a,scale:p,resolution:p})}else{var f=5E-4;for(a=23;0<=a;a--)h.unshift({level:a,scale:f,resolution:f}),f*=2}return new t({dpi:96,lods:h,origin:new l.Point(0,0,n),size:[b,b],spatialReference:n})}var p=c.getInfo(n),r=a.origin?new l.Point({x:a.origin.x,y:a.origin.y,
spatialReference:n}):p?new l.Point({x:p.origin[0],y:p.origin[1],spatialReference:n}):new l.Point({x:0,y:0,spatialReference:n}),x=1/(39.37*e.getMetersPerUnitForSR(n)*96),I=[];if(k)for(a=0;a<k.length;a++)p=k[a],f=p*x,I.push({level:a,scale:p,resolution:f});else for(p=c.isGeographic(n)?512/b*5.916575275917094E8:256/b*5.91657527591555E8,k=Math.ceil(24/h),I.push({level:0,scale:p,resolution:p*x}),a=1;a<k;a++)p/=Math.pow(2,h),f=p*x,I.push({level:a,scale:p,resolution:f});return new t({dpi:96,lods:I,origin:r,
size:[b,b],spatialReference:n})};Object.defineProperty(p.prototype,"isWrappable",{get:function(){var a=this.spatialReference,h=this.origin;if(a&&h){var k=c.getInfo(a);return a.isWrappable&&Math.abs(k.origin[0]-h.x)<=k.dx}return!1},enumerable:!0,configurable:!0});p.prototype.readOrigin=function(a,c){return l.Point.fromJSON(g.__assign({spatialReference:c.spatialReference},a))};Object.defineProperty(p.prototype,"lods",{set:function(a){var c=this,h=0,k=0,b=[];this._levelToLOD={};a&&(h=-Infinity,k=Infinity,
a.forEach(function(a){b.push(a.scale);h=a.scale>h?a.scale:h;k=a.scale<k?a.scale:k;c._levelToLOD[a.level]=a}));this._set("scales",b);this._set("minScale",h);this._set("maxScale",k);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});p.prototype.readSize=function(a,c){return[c.cols,c.rows]};p.prototype.writeSize=function(a,c){c.cols=a[0];c.rows=a[0]};p.prototype.zoomToScale=function(a){var c=this.scales;if(0>=a)return c[0];if(a>=c.length)return c[c.length-1];var h=
Math.round(a);return c[h]+(h-a)*(c[Math.round(a-.5)]-c[h])};p.prototype.scaleToZoom=function(a){for(var c=this.scales,h=c.length-1,k=0;k<h;k++){var b=c[k],e=c[k+1];if(b<=a)break;if(e===a)return k+1;if(b>a&&e<a)return k+1-(a-e)/(b-e)}return k};p.prototype.snapScale=function(a,c){void 0===c&&(c=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=c?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};p.prototype.tileAt=function(k,b,e,n){var p=this.lodAt(k);if(!p)return null;var f;if("number"===
typeof b)f=b,b=e;else{if(c.equals(b.spatialReference,this.spatialReference))f=b.x,b=b.y;else{n=h.project(b,this.spatialReference);if(!n)return null;f=n.x;b=n.y}n=e}e=p.resolution*this.size[0];p=p.resolution*this.size[1];n||(n={id:null,level:0,row:0,col:0,extent:a.create()});n.level=k;n.row=Math.floor((this.origin.y-b)/p+.001);n.col=Math.floor((f-this.origin.x)/e+.001);this.updateTileInfo(n);return n};p.prototype.updateTileInfo=function(c){var h=this.lodAt(c.level);if(h){var k=h.resolution*this.size[0],
h=h.resolution*this.size[1];c.id=c.level+"/"+c.row+"/"+c.col;c.extent||(c.extent=a.create());c.extent[0]=this.origin.x+c.col*k;c.extent[1]=this.origin.y-(c.row+1)*h;c.extent[2]=c.extent[0]+k;c.extent[3]=c.extent[1]+h}};p.prototype.upsampleTile=function(a){var c=this._upsampleLevels[a.level];if(!c||-1===c.parentLevel)return!1;a.level=c.parentLevel;a.row=Math.floor(a.row/c.factor+.001);a.col=Math.floor(a.col/c.factor+.001);this.updateTileInfo(a);return!0};p.prototype.getTileBounds=function(a,c){var h=
this.lodAt(c.level).resolution,k=h*this.size[0],h=h*this.size[1];a[0]=this.origin.x+c.col*k;a[1]=this.origin.y-(c.row+1)*h;a[2]=a[0]+k;a[3]=a[1]+h;return a};p.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};p.prototype.clone=function(){return t.fromJSON(this.write({}))};p.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var c=null,h=0;h<a.length;h++){var k=a[h];this._upsampleLevels[k.level]={parentLevel:c?c.level:-1,factor:c?
c.resolution/k.resolution:0};c=k}};var t;g.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"compressionQuality",void 0);g.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"dpi",void 0);g.__decorate([f.property({type:String,json:{read:n.read,write:n.write,origins:{"web-scene":{read:!1,write:!1}}}})],p.prototype,"format",void 0);g.__decorate([f.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],p.prototype,"isWrappable",null);g.__decorate([f.property({type:l.Point,
json:{write:!0}})],p.prototype,"origin",void 0);g.__decorate([f.reader("origin")],p.prototype,"readOrigin",null);g.__decorate([f.property({type:[k],value:null,json:{write:!0}})],p.prototype,"lods",null);g.__decorate([f.property({readOnly:!0})],p.prototype,"minScale",void 0);g.__decorate([f.property({readOnly:!0})],p.prototype,"maxScale",void 0);g.__decorate([f.property({readOnly:!0})],p.prototype,"scales",void 0);g.__decorate([f.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?
[a,a]:[256,256]}})],p.prototype,"size",void 0);g.__decorate([f.reader("size",["rows","cols"])],p.prototype,"readSize",null);g.__decorate([f.writer("size",{cols:{type:r.Integer},rows:{type:r.Integer}})],p.prototype,"writeSize",null);g.__decorate([f.property({type:l.SpatialReference,json:{write:!0}})],p.prototype,"spatialReference",void 0);return p=t=g.__decorate([f.subclass("esri.layers.support.TileInfo")],p)}(b.JSONSupport)})},"esri/layers/support/LOD":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(q,d,g,l,m,b){return function(e){function f(a){a=e.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=0;a.scale=0;return a}g.__extends(f,e);r=f;f.prototype.clone=function(){return new r({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var r;g.__decorate([m.property({type:b.Integer,json:{write:!0}})],f.prototype,"level",void 0);g.__decorate([m.property({type:String,json:{write:!0}})],f.prototype,"levelValue",void 0);g.__decorate([m.property({type:Number,
json:{write:!0}})],f.prototype,"resolution",void 0);g.__decorate([m.property({type:Number,json:{write:!0}})],f.prototype,"scale",void 0);return f=r=g.__decorate([m.subclass("esri.layers.support.LOD")],f)}(l.JSONSupport)})},"esri/views/PopupView":function(){define("require exports tslib ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(q,d,g,l,m,b,e){Object.defineProperty(d,"__esModule",{value:!0});d.PopupView=function(f){return function(f){function a(){return null!==
f&&f.apply(this,arguments)||this}g.__extends(a,f);a.prototype.fetchPopupFeatures=function(a,h){return g.__awaiter(this,void 0,void 0,function(){var c,e,p,f,r,x,d,m,w;return g.__generator(this,function(k){switch(k.label){case 0:return[4,this.when()];case 1:return k.sent(),[4,this._prepareFetchPopupFeatures(a,h)];case 2:return c=k.sent(),e=c.location,p=c.queryArea,f=c.layerViewsAndGraphics,r=c.clientOnlyGraphics,x=b.resolve(r),d=this._queryLayerPopupFeatures({queryArea:p,layerViewsAndGraphics:f,options:h}),
m=d.map(function(a){return a.promise}),w=b.eachAlwaysValues(g.__spreadArrays([x],m)).then(l.flatten),[2,{location:e,clientOnlyGraphics:r,allGraphicsPromise:w,promisesPerLayerView:d}]}})})};a.prototype._queryLayerPopupFeatures=function(a){var c=a.queryArea,k=a.options;return a.layerViewsAndGraphics.map(function(a){var h=a.layerView;a={clientGraphics:a.graphics,event:m.isSome(k)?k.event:null,signal:m.isSome(k)?k.signal:null,defaultPopupTemplateEnabled:m.isSome(k)?!!k.defaultPopupTemplateEnabled:!1};
a=h.fetchPopupFeatures(c,a);return{layerView:h,promise:a}})};a.prototype._isValidPopupGraphic=function(a,h){return a&&!!a.getEffectivePopupTemplate(m.isSome(h)&&h.defaultPopupTemplateEnabled)};a.prototype._prepareFetchPopupFeatures=function(a,h){return g.__awaiter(this,void 0,void 0,function(){var c,b,e,f,r,x,d,m;return g.__generator(this,function(k){switch(k.label){case 0:return[4,this._popupHitTestGraphics(a,h)];case 1:return c=k.sent(),b=c.clientGraphics,e=c.queryArea,f=c.location,r=this._getFetchPopupLayerViews(),
x=this._graphicsPerFetchPopupLayerView(b,r),d=x.layerViewsAndGraphics,m=x.clientOnlyGraphics,[2,{clientOnlyGraphics:m,layerViewsAndGraphics:d,queryArea:e,location:f}]}})})};a.prototype._popupHitTestGraphics=function(a,h){return g.__awaiter(this,void 0,void 0,function(){var c,b,e,f,r,x,d=this;return g.__generator(this,function(k){switch(k.label){case 0:return[4,this.popupHitTest(a)];case 1:return c=k.sent(),b=c.results,e=c.mapPoint,f=b.filter(function(a){return d._isValidPopupGraphic(a.graphic,h)}),
r=f.length?f[0].mapPoint:null,x=f.map(function(a){return a.graphic}),[2,{clientGraphics:x,queryArea:e,location:e||r}]}})})};a.prototype._getFetchPopupLayerViews=function(){var a=this,h=[];this.allLayerViews.forEach(function(c){a._isValidPopupLayerView(c)&&h.push(c)});m.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&h.push(this.graphicsView);return h.reverse()};a.prototype._isValidPopupLayerView=function(a){return m.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in
a};a.prototype._graphicsPerFetchPopupLayerView=function(a,h){var c=[],b=new Map;h=h.map(function(a){var c=[];"layer"in a?b.set(a.layer,c):b.set(a.graphics,c);return{layerView:a,graphics:c}});for(var e=0;e<a.length;e++){var f=a[e],r=b.get(f.layer)||null;r?r.push(f):c.push(f)}return{layerViewsAndGraphics:h,clientOnlyGraphics:c}};return a=g.__decorate([e.subclass("esri.views.PopupView")],a)}(f)}})},"esri/views/2d/AnimationManager":function(){define("require exports tslib ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),
function(q,d,g,l,m,b,e,f,r,a,c){Object.defineProperty(d,"__esModule",{value:!0});var h=function(){function c(c,h,k,b){var e=c.targetGeometry,n=h.targetGeometry;b?"string"===typeof b&&(b=a.parse(b)||a.easingFunctions.ease):b=a.easingFunctions.ease;this.easing=b;this.duration=k;this.sCenterX=e.x;this.sCenterY=e.y;this.sScale=c.scale;this.sRotation=c.rotation;this.tCenterX=n.x;this.tCenterY=n.y;this.tScale=h.scale;this.tRotation=h.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-
this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}c.prototype.applyRatio=function(a,c){var h=this.easing(c),k,b;1<=c?(c=this.tCenterX,k=this.tCenterY,b=this.tRotation,h=this.tScale):(c=this.sCenterX+h*this.dCenterX,k=this.sCenterY+h*this.dCenterY,b=this.sRotation+h*this.dRotation,h=this.sScale+h*this.dScale);a.targetGeometry.x=c;a.targetGeometry.y=k;a.scale=h;a.rotation=b};
return c}();q=function(k){function b(c){c=k.call(this,c)||this;c.duration=200;c.transition=null;c.easing=a.easingFunctions.ease;c.view=null;c.viewpoint=null;c.viewpoint=new m({targetGeometry:new l.Point,scale:0,rotation:0});c._updateTask=e.addFrameTask({postRender:c._postRender.bind(c)});c._updateTask.pause();return c}g.__extends(b,k);b.prototype.destroy=function(){this._updateTask.remove();this._updateTask=null};b.prototype.animate=function(a,k,b){var e=this;this.stop();c.copy(this.viewpoint,k);
this.transition=new h(this.viewpoint,a.target,b&&b.duration||this.duration,b&&b.easing||this.easing);k=function(){e.animation===a&&e._updateTask&&("finished"===a.state&&(e.transition.applyRatio(e.viewpoint,1),e.view.state&&(e.view.state.viewpoint=e.viewpoint.clone())),e.animation=null,e.updateFunction=null)};a.when(k,k);this._startTime=performance.now();this._updateTask.resume();return this.animation=a};b.prototype.animateContinous=function(a,c){var h=this;this.stop();this.updateFunction=c;this.viewpoint=
a;var k=new r({target:a.clone()});a=function(){h.animation===k&&h._updateTask&&(h.animation=null,h.updateFunction=null)};k.when(a,a);this._startTime=performance.now();this._updateTask.resume();return this.animation=k};b.prototype.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};b.prototype._postRender=function(a){var c=this.animation;c&&c.state!==r.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,a.deltaTime):(a=(performance.now()-
this._startTime)/this.transition.duration,c=1<=a,this.transition.applyRatio(this.viewpoint,a),c&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};g.__decorate([f.property()],b.prototype,"animation",void 0);g.__decorate([f.property()],b.prototype,"duration",void 0);g.__decorate([f.property()],b.prototype,"transition",void 0);g.__decorate([f.property()],b.prototype,"easing",void 0);g.__decorate([f.property()],b.prototype,"view",
void 0);g.__decorate([f.property()],b.prototype,"viewpoint",void 0);return b=g.__decorate([f.subclass("esri.views.2d.AnimationManager")],b)}(b);d.default=q})},"esri/views/2d/unitBezier":function(){define(["require","exports"],function(q,d){function g(g,b,e,f){function r(k,b){var e,n,f,p;f=k;for(n=0;8>n;n++){p=((h*f+c)*f+a)*f-k;if(Math.abs(p)<b)return f;e=(3*h*f+2*c)*f+a;if(1E-6>Math.abs(e))break;f-=p/e}e=0;n=1;f=k;if(f<e)return e;if(f>n)return n;for(;e<n;){p=((h*f+c)*f+a)*f;if(Math.abs(p-k)<b)break;
k>p?e=f:n=f;f=.5*(n-e)+e}return f}var a=3*g,c=3*(e-g)-a,h=1-a-c,k=3*b,n=3*(f-b)-k,p=1-k-n;return function(a,c){void 0===c&&(c=1E-6);a=r(a,c);return((p*a+n)*a+k)*a}}Object.defineProperty(d,"__esModule",{value:!0});d.unitBezier=g;var l=/^cubic-bezier\((.*)\)/;d.easingFunctions={};d.parse=function(m){var b=d.easingFunctions[m]||null;!b&&(m=l.exec(m))&&(m=m[1].split(",").map(function(b){return parseFloat(b.trim())}),4!==m.length||m.some(function(b){return isNaN(b)})||(b=g.apply(g,m)));return b};d.easingFunctions.ease=
g(.25,.1,.25,1);d.easingFunctions.linear=g(0,0,1,1);d.easingFunctions.easeIn=d.easingFunctions["ease-in"]=g(.42,0,1,1);d.easingFunctions.easeOut=d.easingFunctions["ease-out"]=g(0,0,.58,1);d.easingFunctions.easeInOut=d.easingFunctions["ease-in-out"]=g(.42,0,.58,1)})},"esri/views/2d/viewpointUtils":function(){define("require exports tslib ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(q,d,g,l,m,b,e,f,r,a,c,h,k,n,p,I,t,x,D,G,w){function v(c,h,b,e){return e&&b&&!e.equals(b)&&G.canProject(e,b)&&e.isWebMercator?(e.isWebMercator?(b=h[1],89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999),b=Math.sin(a.common.toRadian(b)),c=k.vec2.set(c,a.common.toRadian(h[0])*O,.5*O*Math.log((1+b)/(1-b)))):(b=a.common.toDegree(h[0]/O),c=k.vec2.set(c,b-360*Math.floor((b+180)/360),a.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*h[1]/O))))),c):k.vec2.copy(c,h)}function u(a){return a.wkid?a:a.spatialReference||
x.WGS84}function z(a,c){return c.type?k.vec2.set(a,c.x,c.y):k.vec2.copy(a,c)}function y(a,c){return Math.max(a.width/c[0],a.height/c[1])*M(a.spatialReference)}function A(a,c,h,k){return g.__awaiter(this,void 0,void 0,function(){var f,n,r,d,x,l,D,w,u,K,v,z,y,q,S,T,U,J,B,C,H,M,E,F,O,Q,N,L;return g.__generator(this,function(g){switch(g.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];m.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
n=a.every(function(a){return"attributes"in a});r=a.some(function(a){return!a.geometry});d=a;if(!(n&&r&&c&&c.allLayerViews))return[3,2];x=new Map;l=0;for(D=a;l<D.length;l++)w=D[l],u=w.layer,K=x.get(u)||[],v=w.attributes[u.objectIdField],null!=v&&K.push(v),x.set(u,K);z=[];x.forEach(function(a,h){var k=c.allLayerViews.find(function(a){return a.layer.id===h.id});if("queryFeatures"in k){var b=h.createQuery();b.objectIds=a;b.returnGeometry=!0;z.push(k.queryFeatures(b))}});return[4,e.all(z)];case 1:y=g.sent();
q=[];S=0;for(T=y;S<T.length;S++)if((U=T[S])&&U.features&&U.features.length)for(J=0,B=U.features;J<B.length;J++)w=B[J],b.isSome(w.geometry)&&q.push(w.geometry);d=q;g.label=2;case 2:C=0,H=d,g.label=3;case 3:if(!(C<H.length))return[3,6];M=H[C];return[4,A(M,c,h,k)];case 4:k=g.sent(),g.label=5;case 5:return C++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];f=new t(a);return[3,12];case 8:if(!(a instanceof I))return[3,9];f=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];f=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];E=a.layer;F=c.allLayerViews.find(function(a){return a.layer.id===E.id});if(!("queryFeatures"in F))return[3,12];O=E.createQuery();O.objectIds=[a.attributes[E.objectIdField]];O.returnGeometry=!0;return[4,F.queryFeatures(O)];case 11:Q=g.sent(),f=b.get(Q,"features",0,"geometry"),g.label=12;case 12:if(b.isNone(f))return[2,null];N="point"===f.type?new p({xmin:f.x,
ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference}):f.extent;if(!N)return[2,null];L=G.canProject(N,h);if(!N.spatialReference.equals(h)&&L)N=G.project(N,h);else if(!L)return[2,null];k=k?k.union(N):N.clone();return[2,k]}})})}function H(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var c=a.layer;return{min:c.minScale,max:c.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var h=0,k=0,b=0;b<a.length;b++)(c=a[b].layer)&&c.minScale&&c.maxScale&&(h=c.minScale<h?c.minScale:h,k=c.maxScale>k?c.maxScale:k);return h&&k?{min:h,max:k}:null}}}function C(a,c){return g.__awaiter(this,void 0,void 0,function(){var h,k,b,e,f,r,d,x,I,m,D,K,q,S,J,B,C,M,E,F;return g.__generator(this,function(g){switch(g.label){case 0:if(!a||!c)return[2,new l({targetGeometry:new t,scale:0,rotation:0})];h=c.spatialReference;k=c.constraints;b=c.padding;e=c.viewpoint;
f=c.size;r=b?f[0]-b.left-b.right:f[0];d=b?f[1]-b.top-b.bottom:f[1];x=[r,d];I=null;a instanceof l?I=a:a.viewpoint?I=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(I=a.target);m=null;if(!I||!I.targetGeometry)return[3,1];m=I.targetGeometry;return[3,10];case 1:if(!(a instanceof p))return[3,2];m=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,A(a.center,c,h)]:[3,10];case 3:return(q=g.sent())?[3,5]:[4,A(a.extent,c,h)];case 4:q=g.sent(),g.label=5;case 5:return(K=
q)?[3,7]:[4,A(a.target,c,h)];case 6:K=g.sent(),g.label=7;case 7:return(D=K)?[3,9]:[4,A(a,c,h)];case 8:D=g.sent(),g.label=9;case 9:m=D,g.label=10;case 10:!m&&e&&e.targetGeometry?m=e.targetGeometry:!m&&c.extent&&(m=c.extent);S=u(m);h||(h=u(c.spatialReference||c.extent||m));if(!w.canProject(m,h)&&S&&!S.equals(h))return[2,null];J=z(n.vec2f64.create(),m.center?m.center:m);B=new t(v(J,J,S,h),h);C=null;C=I&&I.targetGeometry&&"point"===I.targetGeometry.type?I.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:
a.hasOwnProperty("zoom")&&-1!==a.zoom&&k&&k.effectiveLODs?k.zoomToScale(a.zoom):Array.isArray(m)||"point"===m.type||"extent"===m.type&&0===m.width&&0===m.height?c.extent&&G.canProject(c.extent,h)?y(G.project(c.extent,h),x):c.extent?y(c.extent,x):e.scale:G.canProject(m.extent,h)?y(G.project(m.extent,h),x):y(m.extent,x);if(M=H(a))M.min&&M.min>C?C=M.min:M.max&&M.max<C&&(C=M.max);E=0;I?E=I.rotation:a.hasOwnProperty("rotation")?E=a.rotation:e&&(E=e.rotation);F=new l({targetGeometry:B,scale:C,rotation:E});
k&&(F=k.fit(F),k.rotationEnabled||(F.rotation=E));return[2,F]}})})}function B(a,c){var h=a.targetGeometry,k=c.targetGeometry;h.x=k.x;h.y=k.y;h.spatialReference=k.spatialReference;a.scale=c.scale;a.rotation=c.rotation;return a}function E(a,c,h){return h?k.vec2.set(a,.5*(c[0]-h.right+h.left),.5*(c[1]-h.bottom+h.top)):k.vec2.scale(a,c,.5)}function F(a,h,k,b){d.getTransform(a,h,k,b);return c.mat2d.invert(a,a)}function P(a,c,h){var b=Q(c);c=Math.abs(Math.cos(b));b=Math.abs(Math.sin(b));return k.vec2.set(a,
Math.round(h[1]*b+h[0]*c),Math.round(h[1]*c+h[0]*b))}function L(a){var c=a.scale;a=a.targetGeometry.spatialReference;a=D.isValid(a)?1/(39.37*f.getMetersPerUnitForSR(a)*96):1;return c*a}function Q(c){return a.common.toRadian(c.rotation)||0}function M(a){return D.isValid(a)?39.37*f.getMetersPerUnitForSR(a)*96:1}function J(a){return a.isWrappable?(a=D.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(d,"__esModule",{value:!0});var O=r.wgs84Radius,N=180/Math.PI;d.extentToScale=y;d.create=C;d.copy=
B;d.getAnchor=E;d.getExtent=function(){var a=n.vec2f64.create();return function(c,h,k){var b=h.targetGeometry;z(a,b);h=.5*L(h);c.xmin=a[0]-h*k[0];c.ymin=a[1]-h*k[1];c.xmax=a[0]+h*k[0];c.ymax=a[1]+h*k[1];c.spatialReference=b.spatialReference;return c}}();d.setExtent=function(a,c,h,k,b){d.centerAt(a,c,h.center);a.scale=y(h,k);b&&b.constraints&&b.constraints.constrain(a);return a};d.getOuterExtent=function(){var a=n.vec2f64.create(),c=n.vec2f64.create();return function(h,k,b){z(a,k.targetGeometry);P(c,
k,b);b=.5*L(k);h.set({xmin:a[0]-b*c[0],ymin:a[1]-b*c[1],xmax:a[0]+b*c[0],ymax:a[1]+b*c[1],spatialReference:k.targetGeometry.spatialReference});return h}}();d.getOuterSize=P;d.getPaddingScreenTranslation=function(){var a=n.vec2f64.create();return function(c,h,b){return k.vec2.sub(c,k.vec2.scale(c,h,.5),E(a,h,b))}}();d.getPaddingMapTranslation=function(){var a=h.mat2df64.create(),b=n.vec2f64.create();return function(h,e,f,n){var p=L(e);e=Q(e);k.vec2.set(b,p,p);c.mat2d.fromScaling(a,b);c.mat2d.rotate(a,
a,e);c.mat2d.translate(a,a,d.getPaddingScreenTranslation(b,f,n));c.mat2d.translate(a,a,[0,n.top-n.bottom]);return k.vec2.set(h,a[4],a[5])}}();d.getResolution=L;d.getResolutionToScaleFactor=M;d.getMatrix=function(){var a=n.vec2f64.create(),h=n.vec2f64.create(),b=n.vec2f64.create();return function(e,f,n,p,r,g){k.vec2.negate(a,f);k.vec2.scale(h,n,.5*g);k.vec2.set(b,1/p*g,-1/p*g);c.mat2d.identity(e);c.mat2d.translate(e,e,h);r&&c.mat2d.rotate(e,e,r);c.mat2d.scale(e,e,b);c.mat2d.translate(e,e,a);return e}}();
d.getTransform=function(){var a=n.vec2f64.create();return function(c,h,k,b){var e=L(h),f=Q(h);z(a,h.targetGeometry);return d.getMatrix(c,a,k,e,f,b)}}();d.getTransformNoRotation=function(){var a=n.vec2f64.create();return function(c,h,k,b){var e=L(h);z(a,h.targetGeometry);return d.getMatrix(c,a,k,e,0,b)}}();d.getWorldWidth=J;d.getWorldScreenWidth=function(a,c){return Math.round(J(a)/c)};d.createAsync=function(a,c){return C(a,c)};d.angleBetween=function(){var a=n.vec2f64.create(),c=n.vec2f64.create(),
h=[0,0,0];return function(b,e,f){k.vec2.subtract(a,b,e);k.vec2.normalize(a,a);k.vec2.subtract(c,b,f);k.vec2.normalize(c,c);k.vec2.cross(h,a,c);b=Math.acos(k.vec2.dot(a,c)/(k.vec2.length(a)*k.vec2.length(c)))*N;0>h[2]&&(b=-b);isNaN(b)&&(b=0);return b}}();d.addPadding=function(){var a=n.vec2f64.create();return function(c,h,k,b){var e=c.targetGeometry;B(c,h);d.getPaddingMapTranslation(a,h,k,b);e.x+=a[0];e.y+=a[1];return c}}();d.removePadding=function(){var a=n.vec2f64.create();return function(c,h,k,
b){var e=c.targetGeometry;B(c,h);d.getPaddingMapTranslation(a,h,k,b);e.x-=a[0];e.y-=a[1];return c}}();d.centerAt=function(){var a=n.vec2f64.create();return function(c,h,k){B(c,h);h=c.targetGeometry;var b=u(k),e=u(h);z(a,k);v(a,a,b,e);h.x=a[0];h.y=a[1];return c}}();d.pixelSize=function(a){return L(a)};d.resize=function(){var a=n.vec2f64.create();return function(c,h,b,e,f){f||(f="center");k.vec2.sub(a,b,e);k.vec2.scale(a,a,.5);b=a[0];e=a[1];switch(f){case "center":k.vec2.set(a,0,0);break;case "left":k.vec2.set(a,
-b,0);break;case "top":k.vec2.set(a,0,e);break;case "right":k.vec2.set(a,b,0);break;case "bottom":k.vec2.set(a,0,-e);break;case "top-left":k.vec2.set(a,-b,e);break;case "bottom-left":k.vec2.set(a,-b,-e);break;case "top-right":k.vec2.set(a,b,e);break;case "bottom-right":k.vec2.set(a,b,-e)}d.translateBy(c,h,a);return c}}();d.rotateBy=function(a,c,h){B(a,c);a.rotation+=h;return a};d.rotateTo=function(a,c,h){B(a,c);a.rotation=h;return a};d.scaleBy=function(){var a=n.vec2f64.create();return function(c,
h,b,e,f){B(c,h);isNaN(b)||0===b||(d.toMap(a,e,h,f),c.scale=h.scale*b,d.toScreen(a,a,c,f),d.translateBy(c,c,k.vec2.set(a,a[0]-e[0],e[1]-a[1])));return c}}();d.scaleTo=function(a,c,h){B(a,c);a.scale=h;return a};d.scaleAndRotateBy=function(){var a=n.vec2f64.create();return function(c,h,b,e,f,n){B(c,h);isNaN(b)||0===b||(d.toMap(a,f,h,n),c.scale=h.scale*b,c.rotation+=e,d.toScreen(a,a,c,n),d.translateBy(c,c,k.vec2.set(a,a[0]-f[0],f[1]-a[1])));return c}}();d.padAndScaleAndRotateBy=function(){var a=n.vec2f64.create(),
c=n.vec2f64.create();return function(h,b,e,f,n,p,r){d.getPaddingScreenTranslation(c,p,r);k.vec2.add(a,n,c);return f?d.scaleAndRotateBy(h,b,e,f,a,p):d.scaleBy(h,b,e,a,p)}}();d.toMap=function(){var a=h.mat2df64.create();return function(c,h,b,e){return k.vec2.transformMat2d(c,h,F(a,b,e,1))}}();d.toScreen=function(){var a=h.mat2df64.create();return function(c,h,b,e){return k.vec2.transformMat2d(c,h,d.getTransform(a,b,e,1))}}();d.translateBy=function(){var a=n.vec2f64.create(),b=h.mat2df64.create();return function(h,
e,f){B(h,e);var p=L(e),r=h.targetGeometry;c.mat2d.fromRotation(b,Q(e));c.mat2d.scale(b,b,n.vec2f64.fromValues(p,p));k.vec2.transformMat2d(a,f,b);r.x+=a[0];r.y+=a[1];return h}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.common=g})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});
d.mat2d=g})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(q,d,g){function l(b,e,f){var r=e[0],a=e[1],c=e[2],h=e[3],k=e[4];e=e[5];var n=f[0],p=f[1],g=f[2],t=f[3],d=f[4];f=f[5];b[0]=r*n+c*p;b[1]=a*n+h*p;b[2]=r*g+c*t;b[3]=a*g+h*t;b[4]=r*d+c*f+k;b[5]=a*d+h*f+e;return b}function m(b,e,f){b[0]=e[0]-f[0];b[1]=e[1]-f[1];b[2]=e[2]-f[2];b[3]=e[3]-f[3];b[4]=e[4]-f[4];b[5]=e[5]-f[5];return b}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(b,
e){b[0]=e[0];b[1]=e[1];b[2]=e[2];b[3]=e[3];b[4]=e[4];b[5]=e[5];return b};d.identity=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b};d.set=function(b,e,f,r,a,c,h){b[0]=e;b[1]=f;b[2]=r;b[3]=a;b[4]=c;b[5]=h;return b};d.invert=function(b,e){var f=e[0],r=e[1],a=e[2],c=e[3],h=e[4];e=e[5];var k=f*c-r*a;if(!k)return null;k=1/k;b[0]=c*k;b[1]=-r*k;b[2]=-a*k;b[3]=f*k;b[4]=(a*e-c*h)*k;b[5]=(r*h-f*e)*k;return b};d.determinant=function(b){return b[0]*b[3]-b[1]*b[2]};d.multiply=l;d.rotate=function(b,
e,f){var r=e[0],a=e[1],c=e[2],h=e[3],k=e[4];e=e[5];var n=Math.sin(f);f=Math.cos(f);b[0]=r*f+c*n;b[1]=a*f+h*n;b[2]=r*-n+c*f;b[3]=a*-n+h*f;b[4]=k;b[5]=e;return b};d.scale=function(b,e,f){var r=e[1],a=e[2],c=e[3],h=e[4],k=e[5],n=f[0];f=f[1];b[0]=e[0]*n;b[1]=r*n;b[2]=a*f;b[3]=c*f;b[4]=h;b[5]=k;return b};d.translate=function(b,e,f){var r=e[0],a=e[1],c=e[2],h=e[3],k=e[4];e=e[5];var n=f[0];f=f[1];b[0]=r;b[1]=a;b[2]=c;b[3]=h;b[4]=r*n+c*f+k;b[5]=a*n+h*f+e;return b};d.fromRotation=function(b,e){var f=Math.sin(e);
e=Math.cos(e);b[0]=e;b[1]=f;b[2]=-f;b[3]=e;b[4]=0;b[5]=0;return b};d.fromScaling=function(b,e){b[0]=e[0];b[1]=0;b[2]=0;b[3]=e[1];b[4]=0;b[5]=0;return b};d.fromTranslation=function(b,e){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=e[0];b[5]=e[1];return b};d.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+1)};d.add=function(b,e,f){b[0]=
e[0]+f[0];b[1]=e[1]+f[1];b[2]=e[2]+f[2];b[3]=e[3]+f[3];b[4]=e[4]+f[4];b[5]=e[5]+f[5];return b};d.subtract=m;d.multiplyScalar=function(b,e,f){b[0]=e[0]*f;b[1]=e[1]*f;b[2]=e[2]*f;b[3]=e[3]*f;b[4]=e[4]*f;b[5]=e[5]*f;return b};d.multiplyScalarAndAdd=function(b,e,f,r){b[0]=e[0]+f[0]*r;b[1]=e[1]+f[1]*r;b[2]=e[2]+f[2]*r;b[3]=e[3]+f[3]*r;b[4]=e[4]+f[4]*r;b[5]=e[5]+f[5]*r;return b};d.exactEquals=function(b,e){return b[0]===e[0]&&b[1]===e[1]&&b[2]===e[2]&&b[3]===e[3]&&b[4]===e[4]&&b[5]===e[5]};d.equals=function(b,
e){var f=b[0],r=b[1],a=b[2],c=b[3],h=b[4];b=b[5];var k=e[0],n=e[1],p=e[2],d=e[3],t=e[4];e=e[5];return Math.abs(f-k)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(r-n)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(a-p)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(c-d)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(h-t)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(t))&&Math.abs(b-e)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))};d.mul=l;d.sub=m})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require",
"exports","./factories/mat2df64"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df64=g})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,1,0,0]};d.clone=function(g){return[g[0],g[1],g[2],g[3],g[4],g[5]]};d.fromValues=function(g,d,m,b,e,f){return[g,d,m,b,e,f]};d.createView=function(g,d){return new Float64Array(g,d,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require",
"exports","./math/vec2"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.vec2=g})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(q,d,g){function l(a,h,b){a[0]=h[0]-b[0];a[1]=h[1]-b[1];return a}function m(a,h,b){a[0]=h[0]*b[0];a[1]=h[1]*b[1];return a}function b(a,h,b){a[0]=h[0]/b[0];a[1]=h[1]/b[1];return a}function e(a,h){var c=h[0]-a[0];a=h[1]-a[1];return Math.sqrt(c*c+a*a)}function f(a,h){var c=h[0]-a[0];a=h[1]-a[1];return c*
c+a*a}function r(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)}function a(a){var c=a[0];a=a[1];return c*c+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,h){a[0]=h[0];a[1]=h[1];return a};d.set=function(a,h,b){a[0]=h;a[1]=b;return a};d.add=function(a,h,b){a[0]=h[0]+b[0];a[1]=h[1]+b[1];return a};d.subtract=l;d.multiply=m;d.divide=b;d.ceil=function(a,h){a[0]=Math.ceil(h[0]);a[1]=Math.ceil(h[1]);return a};d.floor=function(a,h){a[0]=Math.floor(h[0]);a[1]=Math.floor(h[1]);return a};
d.min=function(a,h,b){a[0]=Math.min(h[0],b[0]);a[1]=Math.min(h[1],b[1]);return a};d.max=function(a,h,b){a[0]=Math.max(h[0],b[0]);a[1]=Math.max(h[1],b[1]);return a};d.round=function(a,h){a[0]=Math.round(h[0]);a[1]=Math.round(h[1]);return a};d.scale=function(a,h,b){a[0]=h[0]*b;a[1]=h[1]*b;return a};d.scaleAndAdd=function(a,h,b,e){a[0]=h[0]+b[0]*e;a[1]=h[1]+b[1]*e;return a};d.distance=e;d.squaredDistance=f;d.length=r;d.squaredLength=a;d.negate=function(a,h){a[0]=-h[0];a[1]=-h[1];return a};d.inverse=
function(a,h){a[0]=1/h[0];a[1]=1/h[1];return a};d.normalize=function(a,h){var c=h[0],b=h[1],c=c*c+b*b;0<c&&(c=1/Math.sqrt(c),a[0]=h[0]*c,a[1]=h[1]*c);return a};d.dot=function(a,h){return a[0]*h[0]+a[1]*h[1]};d.cross=function(a,h,b){h=h[0]*b[1]-h[1]*b[0];a[0]=a[1]=0;a[2]=h;return a};d.lerp=function(a,h,b,e){var c=h[0];h=h[1];a[0]=c+e*(b[0]-c);a[1]=h+e*(b[1]-h);return a};d.random=function(a,h){h=h||1;var c=2*g.RANDOM()*Math.PI;a[0]=Math.cos(c)*h;a[1]=Math.sin(c)*h;return a};d.transformMat2=function(a,
h,b){var c=h[0];h=h[1];a[0]=b[0]*c+b[2]*h;a[1]=b[1]*c+b[3]*h;return a};d.transformMat2d=function(a,h,b){var c=h[0];h=h[1];a[0]=b[0]*c+b[2]*h+b[4];a[1]=b[1]*c+b[3]*h+b[5];return a};d.transformMat3=function(a,h,b){var c=h[0];h=h[1];a[0]=b[0]*c+b[3]*h+b[6];a[1]=b[1]*c+b[4]*h+b[7];return a};d.transformMat4=function(a,h,b){var c=h[0];h=h[1];a[0]=b[0]*c+b[4]*h+b[12];a[1]=b[1]*c+b[5]*h+b[13];return a};d.rotate=function(a,h,b,e){var c=h[0]-b[0];h=h[1]-b[1];var k=Math.sin(e);e=Math.cos(e);a[0]=c*e-h*k+b[0];
a[1]=c*k+h*e+b[1];return a};d.angle=function(a,h){var c=a[0];a=a[1];var b=h[0];h=h[1];var e=c*c+a*a;0<e&&(e=1/Math.sqrt(e));var f=b*b+h*h;0<f&&(f=1/Math.sqrt(f));c=(c*b+a*h)*e*f;return 1<c?0:-1>c?Math.PI:Math.acos(c)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,h){return a[0]===h[0]&&a[1]===h[1]};d.equals=function(a,h){var c=a[0];a=a[1];var b=h[0];h=h[1];return Math.abs(c-b)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(a-h)<=g.EPSILON*Math.max(1,Math.abs(a),
Math.abs(h))};d.len=r;d.sub=l;d.mul=m;d.div=b;d.dist=e;d.sqrDist=f;d.sqrLen=a})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.vec2f64=g})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0]};d.clone=function(g){return[g[0],g[1]]};d.fromValues=function(g,
d){return[g,d]};d.fromArray=function(g){for(var d=[0,0],m=Math.min(2,g.length),b=0;b<m;++b)d[b]=g[b];return d};d.createView=function(g,d){return new Float64Array(g,d,2)};d.zeros=function(){return[0,0]};d.ones=function(){return[1,1]};d.unitX=function(){return[1,0]};d.unitY=function(){return[0,1]};d.ZEROS=[0,0];d.ONES=[1,1];d.UNIT_X=[1,0];d.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/maybe","../../core/scheduling"],function(q,d,g,l){Object.defineProperty(d,
"__esModule",{value:!0});q=function(){function d(b){var e=this;this.view=b;this._frameTaskHandle=null;this._updateRequested=!1;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){e._updateParameters.state=e.view.state;e._updateParameters.stationary=e.view.stationary;e._updateParameters.pixelRatio=window.devicePixelRatio;e._updateParameters.renderingOptions=e.view.renderingOptions};this.update=function(){e._updateRequested=!1;if(e.updateEnabled){var b=e.view,r=
b.basemapView,a=b.graphicsView,c=b.labelManager,h=b.layerViews,b=b.state.id;r.baseLayerViews.forEach(e._updateLayerView,e);h.forEach(e._updateLayerView,e);r.referenceLayerViews.forEach(e._updateLayerView,e);g.isSome(c)&&(c.lastUpdateId!==b&&(c.viewChange(),c.lastUpdateId=b),c.updateRequested&&c.processUpdate(e._updateParameters));g.isSome(a)&&(a.lastUpdateId!==b&&(a.viewChange(),a.lastUpdateId=b),a.updateRequested&&a.processUpdate(e._updateParameters));e.animationInProgress||e._updateRequested||e._frameTaskHandle.pause()}}}
d.prototype.destroy=function(){this.stop()};d.prototype.start=function(){var b=this;this.stationary=this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._stationaryHandle=this.view.watch("stationary",function(e){b.stationary=e;b.requestFrame()});this._frameTaskHandle=l.addFrameTask(this)};d.prototype.stop=function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),
this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};d.prototype.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};d.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};d.prototype._updateLayerView=function(b){var e=this.view.state,f=b.lastUpdateId;if(null==f||!this.stationary&&!b.moving)b.moving=!0,b.moveStart();f!==e.id&&b.viewChange();this.stationary&&
b.moving&&(b.moving=!1,b.moveEnd());b.lastUpdateId=e.id;b.updateRequested&&b.processUpdate(this._updateParameters);"layerViews"in b&&b.layerViews.forEach(this._updateLayerView,this)};return d}();d.default=q})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(q,d,g,l){function m(){return Promise.all([new Promise(function(b,a){q(["../webgl"],b,a)}),new Promise(function(b,a){q(["./engine"],
b,a)})])}Object.defineProperty(d,"__esModule",{value:!0});var b=function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/TileLayerView2D"],b,a)})})},e=function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/FeatureLayerView2D"],b,a)})})},f={"base-dynamic":function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/BaseDynamicLayerView2D"],b,a)})})},"base-tile":b,"bing-maps":b,csv:e,"geo-rss":function(){return m().then(function(){return new Promise(function(b,
a){q(["./layers/GeoRSSLayerView2D"],b,a)})})},feature:e,geojson:e,graphics:function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/GraphicsLayerView2D"],b,a)})})},group:function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/GroupLayerView2D"],b,a)})})},imagery:function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/ImageryLayerView2D"],b,a)})})},"imagery-tile":function(){return m().then(function(){return new Promise(function(b,
a){q(["./layers/ImageryTileLayerView2D"],b,a)})})},kml:function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/KMLLayerView2D"],b,a)})})},"map-image":function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/MapImageLayerView2D"],b,a)})})},"map-notes":function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/MapNotesLayerView2D"],b,a)})})},"ogc-feature":e,"open-street-map":b,route:function(){return m().then(function(){return new Promise(function(b,
a){q(["./layers/RouteLayerView2D"],b,a)})})},stream:function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/StreamLayerView2D"],b,a)})})},tile:b,"vector-tile":function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/VectorTileLayerView2D"],b,a)})})},"web-tile":b,wms:function(){return m().then(function(){return new Promise(function(b,a){q(["./layers/WMSLayerView2D"],b,a)})})},wmts:function(){return m().then(function(){return new Promise(function(b,
a){q(["./layers/WMTSLayerView2D"],b,a)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};d.layerView2DImporter={hasLayerViewModule:function(b){return l.isSome(f[b.type])},importLayerView:function(b){var a=f[b.type];if(!l.isSome(a))throw b=b.declaredClass?b.declaredClass.slice(b.declaredClass.lastIndexOf(".")+1):"Unknown",a=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new g(a+":view-not-supported",
b+" is not supported in 2D");return a(b)}}})},"esri/views/2d/MapViewConstraints":function(){define("require exports tslib ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),function(q,d,g,l,m,b,e,f){return function(r){function a(){var a=null!==r&&r.apply(this,arguments)||this;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}g.__extends(a,
r);a.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};a.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(a.prototype,"_rotation",{get:function(){return new e({rotationEnabled:this.rotationEnabled})},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),h=this.get("view.spatialReference");return a&&
h&&a.spatialReference.equals(h)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_zoom",{get:function(){return new f({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,configurable:!0});a.prototype.canZoomInTo=function(a){var c=this.effectiveMaxScale;return 0===c||a>=c};a.prototype.canZoomOutTo=function(a){var c=this.effectiveMinScale;return 0===c||a<=
c};a.prototype.constrain=function(a,h){this._zoom.constrain(a,h);this._rotation.constrain(a,h);return a};a.prototype.fit=function(a){return this._zoom.fit(a)};a.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};a.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};a.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};a.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};a.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};
g.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],a.prototype,"effectiveLODs",void 0);g.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],a.prototype,"effectiveMinScale",void 0);g.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],a.prototype,"effectiveMaxScale",void 0);g.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],a.prototype,"effectiveMinZoom",void 0);g.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],
a.prototype,"effectiveMaxZoom",void 0);g.__decorate([m.property({type:[b]})],a.prototype,"lods",void 0);g.__decorate([m.property()],a.prototype,"minScale",void 0);g.__decorate([m.property()],a.prototype,"maxScale",void 0);g.__decorate([m.property()],a.prototype,"minZoom",void 0);g.__decorate([m.property()],a.prototype,"maxZoom",void 0);g.__decorate([m.property()],a.prototype,"rotationEnabled",void 0);g.__decorate([m.property()],a.prototype,"snapToZoom",void 0);g.__decorate([m.property()],a.prototype,
"view",void 0);g.__decorate([m.property({type:e,dependsOn:["rotationEnabled"]})],a.prototype,"_rotation",null);g.__decorate([m.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],a.prototype,"_defaultLODs",null);g.__decorate([m.property({readOnly:!0,type:f,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],a.prototype,"_zoom",null);return a=g.__decorate([m.subclass("esri.views.2d.MapViewConstraints")],a)}(l.EventedAccessor)})},"esri/views/2d/constraints/RotationConstraint":function(){define(["require",
"exports","tslib","../../../core/Accessor","../../../core/accessorSupport/decorators"],function(q,d,g,l,m){return function(b){function e(){var e=null!==b&&b.apply(this,arguments)||this;e.enabled=!0;e.rotationEnabled=!0;return e}g.__extends(e,b);f=e;e.prototype.constrain=function(b,a){if(!this.enabled||!a)return b;this.rotationEnabled||(b.rotation=a.rotation);return b};e.prototype.clone=function(){return new f({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var f;g.__decorate([m.property()],
e.prototype,"enabled",void 0);g.__decorate([m.property()],e.prototype,"rotationEnabled",void 0);return e=f=g.__decorate([m.subclass("esri.views.2d.constraints.RotationConstraint")],e)}(l)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports tslib ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),function(q,d,g,l,m,b){return function(e){function f(a){a=e.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=
null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}g.__extends(f,e);r=f;f.prototype.initialize=function(){var a,c,b=this,e=this.lods;c=this.minScale;a=this.maxScale;var f=this.minZoom,p=this.maxZoom,r=-1,g=-1,d=!1,m=!1;0!==c&&0!==a&&c<a&&(a=[a,c],c=a[0],a=a[1]);if(e&&e.length){e=e.map(function(a){return a.clone()});e.sort(function(a,c){return c.scale-a.scale});e.forEach(function(a,
c){return a.level=c});for(var l,w=0,v=e;w<v.length;w++){var u=v[w];!d&&0<c&&c>=u.scale&&(r=u.level,d=!0);!m&&0<a&&a>=u.scale&&(g=l?l.level:-1,m=!0);l=u}-1===f&&(f=0===c?0:r);-1===p&&(p=0===a?e.length-1:g);f=Math.max(f,0);f=Math.min(f,e.length-1);p=Math.max(p,0);p=Math.min(p,e.length-1);f>p&&(c=[p,f],f=c[0],p=c[1]);c=e[f].scale;a=e[p].scale;e.splice(0,f);e.splice(p-f+1,e.length);e.forEach(function(a,c){b._lodByScale[a.scale]=a;b._scales[c]=a.scale});this._set("effectiveLODs",e);this._set("effectiveMinZoom",
f);this._set("effectiveMaxZoom",p)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",a)};f.prototype.constrain=function(a,c){if(c&&a.scale===c.scale)return a;var b=this.effectiveMinScale,e=this.effectiveMaxScale,f=a.targetGeometry,p=c&&c.targetGeometry,r=0!==b&&a.scale>b;if(0!==e&&a.scale<e||r)b=r?b:e,p&&(c=(b-c.scale)/(a.scale-c.scale),f.x=p.x+(f.x-p.x)*c,f.y=p.y+(f.y-p.y)*c),a.scale=b;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};f.prototype.fit=
function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var c=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(c-Math.floor(c))?Math.round(c):Math.floor(c));return a};f.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var c=this._scales;if(0>=a)return c[0];if(a>=c.length)return c[c.length-1];var b=Math.round(a);return c[b]+(b-a)*(c[Math.round(a-.5)]-c[b])};f.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;
var c=this._scales,b,e;if(a>=c[0])return this.effectiveMinZoom;if(a<=c[c.length-1])return this.effectiveMaxZoom;for(var f=0;f<c.length-1;f++){b=c[f];e=c[f+1];if(e===a)return c=f+this.effectiveMinZoom,c+1;if(b>a&&e<a)return c=f+this.effectiveMinZoom,c+1-(a-e)/(b-e)}};f.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};f.prototype.snapToNextScale=function(a,c){void 0===c&&(c=.5);if(!this.effectiveLODs)return a*c;a=
Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};f.prototype.snapToPreviousScale=function(a,c){void 0===c&&(c=2);if(!this.effectiveLODs)return a*c;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};f.prototype.clone=function(){return new r({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};f.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(c,
b){return Math.abs(b-a)<=Math.abs(c-a)?b:c},this._scales[0]);return this._lodByScale[a].scale};var r;g.__decorate([m.property({readOnly:!0})],f.prototype,"effectiveLODs",void 0);g.__decorate([m.property({readOnly:!0})],f.prototype,"effectiveMinZoom",void 0);g.__decorate([m.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",void 0);g.__decorate([m.property({readOnly:!0})],f.prototype,"effectiveMinScale",void 0);g.__decorate([m.property({readOnly:!0})],f.prototype,"effectiveMaxScale",void 0);g.__decorate([m.property({type:[b]})],
f.prototype,"lods",void 0);g.__decorate([m.property()],f.prototype,"minZoom",void 0);g.__decorate([m.property()],f.prototype,"maxZoom",void 0);g.__decorate([m.property()],f.prototype,"minScale",void 0);g.__decorate([m.property()],f.prototype,"maxScale",void 0);g.__decorate([m.property()],f.prototype,"snapToZoom",void 0);return f=r=g.__decorate([m.subclass("esri.views.2d.constraints.ZoomConstraint")],f)}(l)})},"esri/views/2d/PaddedViewState":function(){define("require exports tslib ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(q,d,g,l,m,b,e,f,r){var a=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.left=0;c.top=0;c.right=0;c.bottom=0;return c}g.__extends(c,a);g.__decorate([m.property()],c.prototype,"left",void 0);g.__decorate([m.property()],c.prototype,"top",void 0);g.__decorate([m.property()],c.prototype,"right",void 0);g.__decorate([m.property()],c.prototype,"bottom",void 0);return c=g.__decorate([m.subclass("esri.views.2d.PaddedViewState.Padding")],c)}(l);return function(c){function h(){for(var h=
[],f=0;f<arguments.length;f++)h[f]=arguments[f];var p=c.apply(this,h)||this;p.paddedViewState=new r;p._updateContent=function(){var a=e.vec2f64.create();return function(){var c=p._get("size"),h=p._get("padding");if(c&&h){var e=p.paddedViewState;b.vec2.set(a,h.left+h.right,h.top+h.bottom);b.vec2.subtract(a,c,a);b.vec2.copy(e.size,a);if(c=e.viewpoint)p.viewpoint=c}}}();p.watch(["size","padding"],p._updateContent,!0);p.padding=new a;p.size=[0,0];return p}g.__extends(h,c);Object.defineProperty(h.prototype,
"padding",{set:function(c){this._set("padding",c||new a)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"viewpoint",{set:function(a){if(a){var c=a.clone();this.paddedViewState.viewpoint=a;f.addPadding(c,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var b=c.targetGeometry;a.center[0]=b.x;a.center[1]=b.y;a.rotation=c.rotation;a.scale=c.scale;a.spatialReference=b.spatialReference;this._update()}},enumerable:!0,configurable:!0});g.__decorate([m.property()],h.prototype,
"paddedViewState",void 0);g.__decorate([m.property({type:a})],h.prototype,"padding",null);g.__decorate([m.property()],h.prototype,"viewpoint",null);return h=g.__decorate([m.subclass("esri.views.2d.PaddedViewState")],h)}(r)})},"esri/views/2d/ViewState":function(){define("require exports tslib ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(q,d,g,l,m,b,e,f,r,a,c,h,k,n,p,I,t,x){var D=[0,0];return function(b){function d(){for(var h=[],e=0;e<arguments.length;e++)h[e]=arguments[e];h=b.apply(this,h)||this;h._viewpoint2D={center:I.vec2f64.create(),rotation:0,scale:0,spatialReference:null};h.center=[0,0];h.extent=new l.Extent;h.id=0;h.inverseTransform=c.mat2df64.create();h.resolution=0;h.rotation=0;h.scale=0;h.transform=c.mat2df64.create();h.transformNoRotation=c.mat2df64.create();h.displayMat3=k.mat3f32.create();h.displayViewMat3=
k.mat3f32.create();h.viewMat3=k.mat3f32.create();h.viewMat2d=a.mat2df32.create();h.worldScreenWidth=0;h.size=[0,0];return h}g.__extends(d,b);G=d;Object.defineProperty(d.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{set:function(a){if(a){var c=this._viewpoint2D,
b=a.targetGeometry;c.center[0]=b.x;c.center[1]=b.y;c.rotation=a.rotation;c.scale=a.scale;c.spatialReference=b.spatialReference}this._update()},enumerable:!0,configurable:!0});d.prototype.copy=function(a){var c=this.size,b=this.viewpoint;b&&c?(this.viewpoint=x.copy(b,a.viewpoint),this._set("size",n.vec2.copy(c,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};d.prototype.clone=function(){return new G({size:this.size,
viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};d.prototype.toMap=function(a,c,b){if(t.isVec2(c))return n.vec2.transformMat2d(a,c,this.inverseTransform);D[0]=c;D[1]=b;return n.vec2.transformMat2d(a,D,this.inverseTransform)};d.prototype.toScreen=function(a,c,b){if(t.isVec2(c))return n.vec2.transformMat2d(a,c,this.transform);D[0]=c;D[1]=b;return n.vec2.transformMat2d(a,D,this.transform)};d.prototype.toScreenNoRotation=function(a,c,b){if(t.isVec2(c))return n.vec2.transformMat2d(a,c,this.transformNoRotation);
D[0]=c;D[1]=b;return n.vec2.transformMat2d(a,D,this.transformNoRotation)};d.prototype.getScreenTransform=function(a,c){var b=this._viewpoint2D.center,h=this._get("pixelRatio")||1,e=this._get("size");x.getMatrix(a,b,e,c,0,h);return a};d.prototype._update=function(){var a=this._viewpoint2D,c=a.center,b=a.spatialReference,e=a.scale,k=a.rotation,a=this._get("pixelRatio")||1,d=this._get("size"),g=new m({targetGeometry:new l.Point(c[0],c[1],b),scale:e,rotation:k});this._set("viewpoint",g);if(d&&b&&e)return this.resolution=
x.getResolution(g),this.rotation=k,this.scale=e,this.spatialReference=b,n.vec2.copy(this.center,c),h.mat3.set(this.displayMat3,0!==d[0]?2/d[0]:0,0,0,0,0!==d[1]?-2/d[1]:0,0,-1,1,1),e=h.mat3.identity(this.viewMat3),c=p.vec2f32.fromValues(d[0]/2,d[1]/2),b=p.vec2f32.fromValues(-d[0]/2,-d[1]/2),k=f.common.toRadian(k),h.mat3.translate(e,e,c),h.mat3.rotate(e,e,k),h.mat3.translate(e,e,b),h.mat3.multiply(this.displayViewMat3,this.displayMat3,e),e=r.mat2d.identity(this.viewMat2d),r.mat2d.translate(e,e,c),r.mat2d.rotate(e,
e,k),r.mat2d.translate(e,e,b),x.getExtent(this.extent,g,d),x.getTransform(this.transform,g,d,a),r.mat2d.invert(this.inverseTransform,this.transform),x.getTransformNoRotation(this.transformNoRotation,g,d,a),this.worldScreenWidth=x.getWorldScreenWidth(this.spatialReference,this.resolution),this._set("id",this.id+1),this};var G;g.__decorate([e.property({readOnly:!0})],d.prototype,"id",void 0);g.__decorate([e.property({value:1,json:{write:!0}})],d.prototype,"pixelRatio",null);g.__decorate([e.property({json:{write:!0}})],
d.prototype,"size",null);g.__decorate([e.property({type:m,json:{write:!0}})],d.prototype,"viewpoint",null);return d=G=g.__decorate([e.subclass("esri.views.2d.ViewState")],d)}(b.JSONSupport)})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df32=g})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(q,d){function g(d,g,b,e){var f=
g[e];g=g[e+1];d[e]=b[0]*f+b[2]*g+b[4];d[e+1]=b[1]*f+b[3]*g+b[5]}Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(6);d[0]=1;d[3]=1;return d};d.clone=function(d){var g=new Float32Array(6);g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];g[4]=d[4];g[5]=d[5];return g};d.fromValues=function(d,g,b,e,f,r){var a=new Float32Array(6);a[0]=d;a[1]=g;a[2]=b;a[3]=e;a[4]=f;a[5]=r;return a};d.createView=function(d,g){return new Float32Array(d,g,6)};d.transform=g;d.transformMany=
function(d,m,b,e,f,r){void 0===e&&(e=0);void 0===f&&(f=0);void 0===r&&(r=2);for(f=f||m.length/r;e<f;e++)g(d,m,b,e*r)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.mat3=g})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(q,d,g){function l(b,e,f){var d=e[0],a=e[1],c=e[2],h=e[3],k=e[4],n=e[5],p=e[6],g=e[7];e=e[8];var t=f[0],x=f[1],m=f[2],
l=f[3],w=f[4],v=f[5],u=f[6],q=f[7];f=f[8];b[0]=t*d+x*h+m*p;b[1]=t*a+x*k+m*g;b[2]=t*c+x*n+m*e;b[3]=l*d+w*h+v*p;b[4]=l*a+w*k+v*g;b[5]=l*c+w*n+v*e;b[6]=u*d+q*h+f*p;b[7]=u*a+q*k+f*g;b[8]=u*c+q*n+f*e;return b}function m(b,e,f){b[0]=e[0]-f[0];b[1]=e[1]-f[1];b[2]=e[2]-f[2];b[3]=e[3]-f[3];b[4]=e[4]-f[4];b[5]=e[5]-f[5];b[6]=e[6]-f[6];b[7]=e[7]-f[7];b[8]=e[8]-f[8];return b}Object.defineProperty(d,"__esModule",{value:!0});d.fromMat4=function(b,e){b[0]=e[0];b[1]=e[1];b[2]=e[2];b[3]=e[4];b[4]=e[5];b[5]=e[6];b[6]=
e[8];b[7]=e[9];b[8]=e[10];return b};d.copy=function(b,e){b[0]=e[0];b[1]=e[1];b[2]=e[2];b[3]=e[3];b[4]=e[4];b[5]=e[5];b[6]=e[6];b[7]=e[7];b[8]=e[8];return b};d.set=function(b,e,f,d,a,c,h,k,n,p){b[0]=e;b[1]=f;b[2]=d;b[3]=a;b[4]=c;b[5]=h;b[6]=k;b[7]=n;b[8]=p;return b};d.identity=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.transpose=function(b,e){if(b===e){var f=e[1],d=e[2],a=e[5];b[1]=e[3];b[2]=e[6];b[3]=f;b[5]=e[7];b[6]=d;b[7]=a}else b[0]=e[0],b[1]=e[3],b[2]=
e[6],b[3]=e[1],b[4]=e[4],b[5]=e[7],b[6]=e[2],b[7]=e[5],b[8]=e[8];return b};d.invert=function(b,e){var f=e[0],d=e[1],a=e[2],c=e[3],h=e[4],k=e[5],n=e[6],p=e[7];e=e[8];var g=e*h-k*p,t=-e*c+k*n,m=p*c-h*n,l=f*g+d*t+a*m;if(!l)return null;l=1/l;b[0]=g*l;b[1]=(-e*d+a*p)*l;b[2]=(k*d-a*h)*l;b[3]=t*l;b[4]=(e*f-a*n)*l;b[5]=(-k*f+a*c)*l;b[6]=m*l;b[7]=(-p*f+d*n)*l;b[8]=(h*f-d*c)*l;return b};d.adjoint=function(b,e){var f=e[0],d=e[1],a=e[2],c=e[3],h=e[4],k=e[5],n=e[6],p=e[7];e=e[8];b[0]=h*e-k*p;b[1]=a*p-d*e;b[2]=
d*k-a*h;b[3]=k*n-c*e;b[4]=f*e-a*n;b[5]=a*c-f*k;b[6]=c*p-h*n;b[7]=d*n-f*p;b[8]=f*h-d*c;return b};d.determinant=function(b){var e=b[3],f=b[4],d=b[5],a=b[6],c=b[7],h=b[8];return b[0]*(h*f-d*c)+b[1]*(-h*e+d*a)+b[2]*(c*e-f*a)};d.multiply=l;d.translate=function(b,e,f){var d=e[0],a=e[1],c=e[2],h=e[3],k=e[4],n=e[5],p=e[6],g=e[7];e=e[8];var t=f[0];f=f[1];b[0]=d;b[1]=a;b[2]=c;b[3]=h;b[4]=k;b[5]=n;b[6]=t*d+f*h+p;b[7]=t*a+f*k+g;b[8]=t*c+f*n+e;return b};d.rotate=function(b,e,f){var d=e[0],a=e[1],c=e[2],h=e[3],
k=e[4],n=e[5],p=e[6],g=e[7];e=e[8];var t=Math.sin(f);f=Math.cos(f);b[0]=f*d+t*h;b[1]=f*a+t*k;b[2]=f*c+t*n;b[3]=f*h-t*d;b[4]=f*k-t*a;b[5]=f*n-t*c;b[6]=p;b[7]=g;b[8]=e;return b};d.scale=function(b,e,f){var d=f[0],a=f[1];f=f[2];b[0]=d*e[0];b[1]=d*e[1];b[2]=d*e[2];b[3]=a*e[3];b[4]=a*e[4];b[5]=a*e[5];b[6]=f*e[6];b[7]=f*e[7];b[8]=f*e[8];return b};d.scaleByVec2=function(b,e,f){var d=f[0];f=f[1];b[0]=d*e[0];b[1]=d*e[1];b[2]=d*e[2];b[3]=f*e[3];b[4]=f*e[4];b[5]=f*e[5];return b};d.fromTranslation=function(b,
e){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=e[0];b[7]=e[1];b[8]=1;return b};d.fromRotation=function(b,e){var f=Math.sin(e);e=Math.cos(e);b[0]=e;b[1]=f;b[2]=0;b[3]=-f;b[4]=e;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromScaling=function(b,e){b[0]=e[0];b[1]=0;b[2]=0;b[3]=0;b[4]=e[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromMat2d=function(b,e){b[0]=e[0];b[1]=e[1];b[2]=0;b[3]=e[2];b[4]=e[3];b[5]=0;b[6]=e[4];b[7]=e[5];b[8]=1;return b};d.fromQuat=function(b,e){var f=e[0],d=e[1],a=e[2];e=e[3];var c=
f+f,h=d+d,k=a+a,f=f*c,n=d*c,d=d*h,p=a*c,g=a*h,a=a*k,c=e*c,h=e*h;e*=k;b[0]=1-d-a;b[3]=n-e;b[6]=p+h;b[1]=n+e;b[4]=1-f-a;b[7]=g-c;b[2]=p-h;b[5]=g+c;b[8]=1-f-d;return b};d.normalFromMat4Legacy=function(b,e){var f=e[0],d=e[1],a=e[2],c=e[4],h=e[5],k=e[6],n=e[8],p=e[9];e=e[10];var g=e*h-k*p,t=-e*c+k*n,m=p*c-h*n,l=f*g+d*t+a*m;if(!l)return null;l=1/l;b[0]=g*l;b[1]=(-e*d+a*p)*l;b[2]=(k*d-a*h)*l;b[3]=t*l;b[4]=(e*f-a*n)*l;b[5]=(-k*f+a*c)*l;b[6]=m*l;b[7]=(-p*f+d*n)*l;b[8]=(h*f-d*c)*l;return b};d.normalFromMat4=
function(b,e){var f=e[0],d=e[1],a=e[2],c=e[3],h=e[4],k=e[5],n=e[6],p=e[7],g=e[8],t=e[9],m=e[10],l=e[11],G=e[12],w=e[13],v=e[14];e=e[15];var u=f*k-d*h,q=f*n-a*h,y=f*p-c*h,A=d*n-a*k,H=d*p-c*k,C=a*p-c*n,B=g*w-t*G,E=g*v-m*G,g=g*e-l*G,F=t*v-m*w,t=t*e-l*w,m=m*e-l*v,l=u*m-q*t+y*F+A*g-H*E+C*B;if(!l)return null;l=1/l;b[0]=(k*m-n*t+p*F)*l;b[1]=(n*g-h*m-p*E)*l;b[2]=(h*t-k*g+p*B)*l;b[3]=(a*t-d*m-c*F)*l;b[4]=(f*m-a*g+c*E)*l;b[5]=(d*g-f*t-c*B)*l;b[6]=(w*C-v*H+e*A)*l;b[7]=(v*y-G*C-e*q)*l;b[8]=(G*H-w*y+e*u)*l;return b};
d.projection=function(b,e,f){b[0]=2/e;b[1]=0;b[2]=0;b[3]=0;b[4]=-2/f;b[5]=0;b[6]=-1;b[7]=1;b[8]=1;return b};d.str=function(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2))};d.add=function(b,e,f){b[0]=e[0]+f[0];b[1]=e[1]+f[1];b[2]=e[2]+f[2];b[3]=e[3]+f[3];
b[4]=e[4]+f[4];b[5]=e[5]+f[5];b[6]=e[6]+f[6];b[7]=e[7]+f[7];b[8]=e[8]+f[8];return b};d.subtract=m;d.multiplyScalar=function(b,e,f){b[0]=e[0]*f;b[1]=e[1]*f;b[2]=e[2]*f;b[3]=e[3]*f;b[4]=e[4]*f;b[5]=e[5]*f;b[6]=e[6]*f;b[7]=e[7]*f;b[8]=e[8]*f;return b};d.multiplyScalarAndAdd=function(b,e,f,d){b[0]=e[0]+f[0]*d;b[1]=e[1]+f[1]*d;b[2]=e[2]+f[2]*d;b[3]=e[3]+f[3]*d;b[4]=e[4]+f[4]*d;b[5]=e[5]+f[5]*d;b[6]=e[6]+f[6]*d;b[7]=e[7]+f[7]*d;b[8]=e[8]+f[8]*d;return b};d.exactEquals=function(b,e){return b[0]===e[0]&&
b[1]===e[1]&&b[2]===e[2]&&b[3]===e[3]&&b[4]===e[4]&&b[5]===e[5]&&b[6]===e[6]&&b[7]===e[7]&&b[8]===e[8]};d.equals=function(b,e){var f=b[0],d=b[1],a=b[2],c=b[3],h=b[4],k=b[5],n=b[6],p=b[7];b=b[8];var m=e[0],t=e[1],x=e[2],l=e[3],G=e[4],w=e[5],v=e[6],u=e[7];e=e[8];return Math.abs(f-m)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(d-t)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(a-x)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(c-l)<=g.EPSILON*Math.max(1,Math.abs(c),
Math.abs(l))&&Math.abs(h-G)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(G))&&Math.abs(k-w)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(w))&&Math.abs(n-v)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(p-u)<=g.EPSILON*Math.max(1,Math.abs(p),Math.abs(u))&&Math.abs(b-e)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))};d.mul=l;d.sub=m})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});
d.mat3f32=g})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(9);d[0]=1;d[4]=1;d[8]=1;return d};d.clone=function(d){var g=new Float32Array(9);g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];g[4]=d[4];g[5]=d[5];g[6]=d[6];g[7]=d[7];g[8]=d[8];return g};d.fromValues=function(d,l,m,b,e,f,r,a,c){var h=new Float32Array(9);h[0]=d;h[1]=l;h[2]=m;h[3]=b;h[4]=e;h[5]=f;h[6]=
r;h[7]=a;h[8]=c;return h};d.createView=function(d,l){return new Float32Array(d,l,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.vec2f32=g})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(q,d){function g(){return new Float32Array(2)}function l(b,e){var a=new Float32Array(2);a[0]=b;a[1]=e;return a}function m(){return l(1,1)}function b(){return l(1,
0)}function e(){return l(0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=g;d.clone=function(b){var e=new Float32Array(2);e[0]=b[0];e[1]=b[1];return e};d.fromValues=l;d.createView=function(b,e){return new Float32Array(b,e,2)};d.zeros=function(){return g()};d.ones=m;d.unitX=b;d.unitY=e;d.ZEROS=g();d.ONES=m();d.UNIT_X=b();d.UNIT_Y=e()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(q,d){function g(d){return d instanceof Float32Array&&2<=d.length}
function l(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(d,"__esModule",{value:!0});d.isVec2f32=g;d.isVec2f64=l;d.isVec2=function(d){return g(d)||l(d)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(q,d,g,l,m,b){Object.defineProperty(d,"__esModule",{value:!0});d.TileInfoView=g;d.TileKey=l;d.TileQueue=m;d.TileStrategy=b})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),
function(q,d,g,l,m,b,e){var f=new b("0/0/0/0"),r=function(){function a(a,c,b,e,f,d,g,r){this.x=a;this.ymin=c;this.ymax=b;this.invM=e;this.leftAdjust=f;this.rightAdjust=d;this.leftBound=g;this.rightBound=r}a.create=function(c,b){var h;c[1]>b[1]&&(h=[b,c],c=h[0],b=h[1]);h=c[0];c=c[1];var e=b[0];b=b[1];var k=e-h,f=b-c,f=0!==f?k/f:0,d=(Math.ceil(c)-c)*f,g=(Math.floor(c)-c)*f;return new a(h,Math.floor(c),Math.ceil(b),f,0>k?d:g,0>k?g:d,0>k?e:h,0>k?h:e)};a.prototype.incrRow=function(){this.x+=this.invM};
a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),a=[[0,0],[0,0],[0,0],[0,0]];return function(){function c(a,c){var b=this;this.tileInfo=a;this.fullExtent=c;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var h=a.lods.slice();h.sort(function(a,c){return c.scale-a.scale});var e=this._lodInfos=h.map(function(b){return l.create(a,
b,c)});h.forEach(function(a,c){b._infoByLevel[a.level]=e[c];b._infoByScale[a.scale]=e[c];b.scales[c]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(c.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});c.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};c.prototype.getTileBounds=function(a,c,b){void 0===b&&(b=!1);f.set(c);return(c=this._infoByLevel[f.level])?c.getTileBounds(a,f,
b):a};c.prototype.getTileCoords=function(a,c,b){void 0===b&&(b=!1);f.set(c);return(c=this._infoByLevel[f.level])?c.getTileCoords(a,f,b):a};c.prototype.getTileCoverage=function(c,b,f){void 0===b&&(b=192);void 0===f&&(f="closest");f="closest"===f?this.getClosestInfoForScale(c.scale):this.getSmallestInfoForScale(c.scale);var h=m.pool.acquire(f),k=this._wrap,d;d=Infinity;var n=-Infinity,g,l,w=h.spans;a[0][0]=a[0][1]=a[1][1]=a[3][0]=-b;a[1][0]=a[2][0]=c.size[0]+b;a[2][1]=a[3][1]=c.size[1]+b;for(b=0;b<
a.length;b++){var v=a[b];c.toMap(v,v);v[0]=f.getColumnForX(v[0]);v[1]=f.getRowForY(v[1])}c=[];v=3;for(b=0;4>b;b++){if(a[b][1]!==a[v][1]){var u=r.create(a[b],a[v]);d=Math.min(u.ymin,d);n=Math.max(u.ymax,n);void 0===c[u.ymin]&&(c[u.ymin]=[]);c[u.ymin].push(u)}v=b}if(null==d||null==n||100<n-d)return null;for(v=[];d<n;){null!=c[d]&&(v=v.concat(c[d]));g=Infinity;l=-Infinity;for(b=v.length-1;0<=b;b--)u=v[b],g=Math.min(g,u.getLeftCol()),l=Math.max(l,u.getRightCol());g=Math.floor(g);l=Math.floor(l);if(d>=
f.first[1]&&d<=f.last[1])if(k)if(f.size[0]<f.worldSize[0])for(u=Math.floor(l/f.worldSize[0]),b=Math.floor(g/f.worldSize[0]);b<=u;b++)w.push(new e(d,Math.max(f.getFirstColumnForWorld(b),g),Math.min(f.getLastColumnForWorld(b),l)));else w.push(new e(d,g,l));else g>f.last[0]||l<f.first[0]||(g=Math.max(g,f.first[0]),l=Math.min(l,f.last[0]),w.push(new e(d,g,l)));d+=1;for(b=v.length-1;0<=b;b--)u=v[b],u.ymax>=d?u.incrRow():v.splice(b,1)}return h};c.prototype.getTileParentId=function(a){f.set(a);a=this._lodInfos.indexOf(this._infoByLevel[f.level])-
1;if(0>a)return null;this._getTileIdAtLOD(f,this._lodInfos[a],f);return f.id};c.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};c.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};c.prototype.intersects=function(a,c){f.set(c);c=this._infoByLevel[f.level];var b=a.lodInfo;if(b.resolution>c.resolution){this._getTileIdAtLOD(f,b,f);for(var h=b.denormalizeCol(f.col,f.world),e=0,k=a.spans;e<k.length;e++){var d=
k[e];if(d.row===f.row&&d.colFrom<=h&&d.colTo>=h)return!0}}if(b.resolution<c.resolution){k=a.spans.reduce(function(a,c){a[0]=Math.min(a[0],c.row);a[1]=Math.max(a[1],c.row);a[2]=Math.min(a[2],c.colFrom);a[3]=Math.max(a[3],c.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=k[0];var h=k[1],e=k[2],k=k[3],g=c.denormalizeCol(f.col,f.world),d=b.getColumnForX(c.getXForColumn(g)),r=b.getRowForY(c.getYForRow(f.row)),g=b.getColumnForX(c.getXForColumn(g+1))-1;c=b.getRowForY(c.getYForRow(f.row+1))-1;
return!(d>k||g<e||r>h||c<a)}var m=b.denormalizeCol(f.col,f.world);return a.spans.some(function(a){return a.row===f.row&&a.colFrom<=m&&a.colTo>=m})};c.prototype.normalizeBounds=function(a,c,b){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];this._wrap&&(c=g.getInfo(this.tileInfo.spatialReference),b=-b*(c.valid[1]-c.valid[0]),a[0]+=b,a[2]+=b);return a};c.prototype.getSmallestInfoForScale=function(a){var c=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>c[0])return this._infoByScale[c[0]];
for(var b=1;b<c.length-1;b++)if(a>c[b]+1E-6)return this._infoByScale[c[b-1]];return this._infoByScale[c[c.length-1]]};c.prototype.getClosestInfoForScale=function(a){var c=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=c.reduce(function(c,b){return Math.abs(b-a)<Math.abs(c-a)?b:c},c[0]);return this._infoByScale[a]};c.prototype.scaleToLevel=function(a){var c=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var b=c.length-1;0<=b;b--)if(a<c[b])return b===c.length-
1?this._infoByScale[c[c.length-1]].level:this._infoByScale[c[b]].level+(c[b]-a)/(c[b]-c[b+1]);return this._infoByScale[c[0]].level};c.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};c.prototype._getTileIdAtLOD=function(a,c,b){var h=this._infoByLevel[b.level];a.set(b);if(c.resolution<h.resolution)return null;if(c.resolution===h.resolution)return a;a.level=c.level;a.col=Math.floor(b.col*h.resolution/c.resolution+.01);a.row=Math.floor(b.row*h.resolution/c.resolution+.01);return a};
return c}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(q,d,g,l){function m(b,f,d){b[0]=f;b[1]=d;return b}var b=new l("0/0/0/0");return function(){function e(b,e,a,c,h,k,d,p,g,m,l,D){this.level=b;this.resolution=e;this.scale=a;this.origin=c;this.first=h;this.last=k;this.size=d;this.norm=p;this.worldStart=g;this.worldEnd=m;this.worldSize=l;this.wrap=D}e.create=function(b,d,a){var c=g.getInfo(b.spatialReference),
h=[b.origin.x,b.origin.y],f=[b.size[0]*d.resolution,b.size[1]*d.resolution],n=[-Infinity,-Infinity],p=[Infinity,Infinity],r=[Infinity,Infinity];a&&(m(n,Math.max(0,Math.floor((a.xmin-h[0])/f[0])),Math.max(0,Math.floor((h[1]-a.ymax)/f[1]))),m(p,Math.max(0,Math.floor((a.xmax-h[0])/f[0])),Math.max(0,Math.floor((h[1]-a.ymin)/f[1]))),m(r,p[0]-n[0]+1,p[1]-n[1]+1));var t;b.isWrappable?(b=[Math.ceil(Math.round(2*c.origin[1]/d.resolution)/b.size[0]),r[1]],c=[Math.floor((c.origin[0]-h[0])/f[0]),n[1]],a=[b[0]+
c[0]-1,p[1]],t=!0):(c=n,a=p,b=r,t=!1);return new e(d.level,d.resolution,d.scale,h,n,p,r,f,c,a,b,t)};e.prototype.normalizeCol=function(b){if(!this.wrap)return b;var e=this.worldSize[0];return 0>b?e-1-Math.abs((b+1)%e):b%e};e.prototype.denormalizeCol=function(b,e){return this.wrap?this.worldSize[0]*e+b:b};e.prototype.getWorldForColumn=function(b){return this.wrap?Math.floor(b/this.worldSize[0]):0};e.prototype.getFirstColumnForWorld=function(b){return b*this.worldSize[0]+this.first[0]};e.prototype.getLastColumnForWorld=
function(b){return b*this.worldSize[0]+this.first[0]+this.size[0]-1};e.prototype.getColumnForX=function(b){return(b-this.origin[0])/this.norm[0]};e.prototype.getXForColumn=function(b){return this.origin[0]+b*this.norm[0]};e.prototype.getRowForY=function(b){return(this.origin[1]-b)/this.norm[1]};e.prototype.getYForRow=function(b){return this.origin[1]-b*this.norm[1]};e.prototype.getTileBounds=function(e,d,a){void 0===a&&(a=!1);b.set(d);var c=a?b.col:this.denormalizeCol(b.col,b.world),h=b.row;d=this.getXForColumn(c);
a=this.getYForRow(h+1);c=this.getXForColumn(c+1);h=this.getYForRow(h);e[0]=d;e[1]=a;e[2]=c;e[3]=h;return e};e.prototype.getTileCoords=function(e,d,a){void 0===a&&(a=!1);b.set(d);d=a?b.col:this.denormalizeCol(b.col,b.world);Array.isArray(e)?m(e,this.getXForColumn(d),this.getYForRow(b.row)):(e.x=this.getXForColumn(d),e.y=this.getYForRow(b.row));return e};return e}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(q,d,g){return function(){function d(d,
b,e,f){this.set(d,b,e,f)}d.getId=function(d,b,e,f){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+b+"/"+e+"/"+f};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.acquire=function(d,b,e,f){this.set(d,b,e,f)};d.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&
this.world===d.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(d,b,e,f){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),b=d[1],e=d[2],f=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(b),this.col=parseFloat(e),this.world=parseFloat(f)):(this.level=+d,this.row=+b,this.col=+e,this.world=+f||0);return this};
d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var g=this.level+1,b=this.row<<1,e=this.col<<1,f=this.world;return[new d(g,b,e,f),new d(g,b,e+1,f),new d(g,b+1,e,f),new d(g,b+1,e+1,f)]};d.prototype.compareRowMajor=function(d){return this.row<d.row?-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};d.pool=new g(d,null,null,25,50);return d}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports",
"../../../core/ObjectPool"],function(q,d,g){return function(){function d(){this.spans=[]}d.prototype.acquire=function(d){this.lodInfo=d};d.prototype.release=function(){this.lodInfo=null;this.spans.length=0};d.prototype.forEach=function(d,b){var e=this.spans,f=this.lodInfo,g=f.level;if(0!==e.length)for(var a=0;a<e.length;a++)for(var c=e[a],h=c.row,k=c.colTo,c=c.colFrom;c<=k;c++)d.call(b,g,h,f.normalizeCol(c),f.getWorldForColumn(c))};d.pool=new g(d);return d}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require",
"exports"],function(q,d){return function(){return function(d,l,m){this.row=d;this.colFrom=l;this.colTo=m}}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports tslib ../../../core/Accessor ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),function(q,d,g,l,m,b,e,f){function r(a,c){a.length=0;c.forEach(function(c){return a.push(c)});return a}var a=new Set,c=[],h=new Map,k=[0,0];return function(d){function p(a){a=
d.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}g.__extends(p,d);p.prototype.initialize=function(){var a=this,c=this.process;this._queue=new f.QueueProcessor({concurrency:this.concurrency,process:function(b,h){b=a._keyToItem.get(b);return c(b,{signal:h})},peeker:"scale-first"===this.strategy?function(c){return a._peekByScaleFirst(c)}:function(c){return a._peekByCenterFirst(c)}})};p.prototype.destroy=function(){this.clear();this._queue.destroy();
this._queue=null};Object.defineProperty(p.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});p.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};p.prototype.clear=
function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};p.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};p.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};p.prototype.pause=function(){this._queue.pause()};p.prototype.push=function(a){var c=this,b=a.key.id;if(this.has(b))return this.get(b);var h=this._queue.push(b),e=function(){c._keyToItem.delete(b);c.notifyChange("updating")};
this._keyToItem.set(b,a);h.then(e,e);this.notifyChange("updating");return h};p.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};p.prototype.resume=function(){this._queue.resume()};p.prototype._peekByScaleFirst=function(b){var e=this;if(!this.state)return m.firstOfSet(b);var f=this.tileInfoView,d=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY;b.forEach(function(c){c=e._keyToItem.get(c);var b=e.tileInfoView.getTileScale(c.key);h.has(b)||(h.set(b,[]),d=Math.max(b,d),
k=Math.min(b,k));h.get(b).push(c.key);a.add(b)});var p=this.state.scale;h.has(p)||(r(c,a),c.sort(),p=c.reduce(function(a,c){return Math.abs(c-p)<Math.abs(a-p)?c:a},c[0]));p=Math.min(p,d);p=Math.max(p,k);b=h.get(p);var g=f.getClosestInfoForScale(p),n=g.getColumnForX(this.state.center[0]),l=g.getRowForY(this.state.center[1]);b.sort(function(a,c){var b=g.denormalizeCol(a.col,a.world),h=g.denormalizeCol(c.col,c.world);return Math.sqrt((n-b)*(n-b)+(l-a.row)*(l-a.row))-Math.sqrt((n-h)*(n-h)+(l-c.row)*(l-
c.row))});a.clear();h.clear();return b[0].id};p.prototype._peekByCenterFirst=function(a){var c=this;if(!this.state)return m.firstOfSet(a);var b=this.tileInfoView,h=this.state.center,f=Number.POSITIVE_INFINITY,d=null;a.forEach(function(a){a=c._keyToItem.get(a);b.getTileCoords(k,a.key);var p=e.vec2.distance(k,h);p<f&&(f=p,d=a.key)});return d.id};g.__decorate([b.property({constructOnly:!0})],p.prototype,"concurrency",void 0);g.__decorate([b.property({constructOnly:!0})],p.prototype,"process",void 0);
g.__decorate([b.property()],p.prototype,"state",void 0);g.__decorate([b.property({constructOnly:!0})],p.prototype,"strategy",void 0);g.__decorate([b.property({constructOnly:!0})],p.prototype,"tileInfoView",void 0);g.__decorate([b.property({readOnly:!0})],p.prototype,"updating",null);return p=g.__decorate([b.subclass("esri.views.2d.tiling.TileQueue")],p)}(l)})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),
function(q,d,g,l,m,b){Object.defineProperty(d,"__esModule",{value:!0});var e=function(){return function(b,e){this.item=b;this.controller=e;this.promise=null}}();q=function(){function f(b){var a=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;b.concurrency&&(this.concurrency=b.concurrency);this._queue=new m.default(b.peeker);this.process=b.process;var c=b.scheduler;b.task&&g.isSome(c)&&(this._task=
c.registerTask(b.task,function(c){return a.update(c)},function(){return a.needsUpdate()}))}f.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(f.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});f.prototype.abort=function(b){(b=this._controllers.get(b))&&b.abort()};f.prototype.clear=function(){this._queue.clear();
var b=[];this._controllers.forEach(function(a){return b.push(a)});this._controllers.clear();b.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};f.prototype.get=function(b){return(b=this._deferreds.get(b))?b.promise:void 0};f.prototype.isOngoing=function(b){return this._processingItems.has(b)};f.prototype.has=function(b){return this._deferreds.has(b)};f.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};f.prototype.push=function(b){var a=
this,c=this.get(b);if(c)return c;var h,c=l.createAbortController(),e=function(){f.remove();a._deferreds.delete(b);a._controllers.delete(b);a._queue.remove(b);a._processingItems.delete(b);a._scheduleNext()},f=l.onAbortOrThrow(c.signal,function(){var c=a._processingItems.get(b);c&&c.controller.abort();e();h.reject(l.createAbortError())});h=l.createDeferred();this._deferreds.set(b,h);this._controllers.set(b,c);h.promise.then(e,e);this._queue.push(b);this._scheduleNext();return h.promise};f.prototype.reset=
function(){var b=[];this._processingItems.forEach(function(a){return b.push(a)});this._processingItems.clear();for(var a=0;a<b.length;a++){var c=b[a];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};f.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};f.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};f.prototype.update=function(b){for(;!b.done&&0<this._queue.length&&this._processingItems.size<
this.concurrency;)this._process(this._queue.pop()),b.madeProgress()};f.prototype._scheduleNext=function(){var e=this;this._task||this._isPaused||this._schedule||(this._schedule=b.schedule(function(){e._schedule=null;e._next()}))};f.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};f.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};f.prototype._processResult=function(b,
a){this._canProcessFulfillment(b)&&(this._scheduleNext(),this._deferreds.get(b.item).resolve(a))};f.prototype._processError=function(b,a){this._canProcessFulfillment(b)&&(this._scheduleNext(),this._deferreds.get(b.item).reject(a))};f.prototype._canProcessFulfillment=function(b){return this._deferreds.get(b.item)&&this._processingItems.get(b.item)===b?!0:!1};f.prototype._process=function(b){var a=this;if(!g.isNone(b)){var c,h=l.createAbortController(),f=new e(b,h);this._processingItems.set(b,f);try{c=
this.process(b,h.signal)}catch(n){this._processError(f,n)}c&&"function"===typeof c.then?(f.promise=c,c.then(function(c){return a._processResult(f,c)},function(c){return a._processError(f,c)})):this._processResult(f,c)}};Object.defineProperty(f.prototype,"test",{get:function(){var b=this;return{update:function(a){return b.update(a)}}},enumerable:!0,configurable:!0});return f}();d.QueueProcessor=q})},"esri/core/Queue":function(){define(["require","exports","./SetUtils"],function(q,d,g){Object.defineProperty(d,
"__esModule",{value:!0});q=function(){function d(d){void 0===d&&(d=function(b){return g.firstOfSet(b)});this._peeker=d;this._items=new Set}Object.defineProperty(d.prototype,"length",{get:function(){return this._items.size},enumerable:!0,configurable:!0});d.prototype.clear=function(){this._items.clear()};d.prototype.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};d.prototype.push=function(d){this.contains(d)||this._items.add(d)};d.prototype.contains=function(d){return this._items.has(d)};
d.prototype.pop=function(){if(0!==this.length){var d=this.peek();this._items.delete(d);return d}};d.prototype.remove=function(d){this._items.delete(d)};return d}();d.default=q})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","./TileCache","./TileCoverage","./TileKey"],function(q,d,g,l,m){var b=new m(0,0,0,0),e=new Map,f=[],r=[];return function(){function a(a){var c=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new g.default(a.cacheSize,this.tileInfoView,function(a){c.releaseTile(a)}))}a.prototype.destroy=function(){this.tileIndex.clear()};
a.prototype.update=function(a){var c=this,d=this.resampling,g=this.tileIndex,p=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);r.length=0;f.length=0;e.clear();if(p){var m=this.tileInfoView.tileInfo,t=m.minScale,x=m.maxScale,D=p.spans,G=p.lodInfo,w=G.level,v=a.state,q=v.scale,m=v.center,v=v.resolution,z=!a.stationary&&q>this._previousScale;this._previousScale=q;this.tiles.length=0;if(!d&&(q>t||q<x))return this.tiles.length=0,e.clear(),g.forEach(function(a){c.releaseTile(a)}),
g.clear(),r.length=0,f.length=0,e.clear(),l.pool.release(p),!0;g.forEach(function(a){return a.visible=!0});x=t=0;if(0<D.length)for(q=0;q<D.length;q++){a=D[q];for(var y=a.row,A=a.colTo,H=a.colFrom;H<=A;H++)if(t++,a=b.set(w,y,G.normalizeCol(H),G.getWorldForColumn(H)).id,g.has(a))d=g.get(a),d.isReady?(e.set(a,d),x++):z||this._addParentTile(a,e);else{d=void 0;if(this._tileCache&&this._tileCache.has(a)){if(d=this._tileCache.pop(a),this.tileIndex.set(a,d),d.isReady){e.set(a,d);x++;continue}}else d=this.acquireTile(b),
this.tileIndex.set(a,d);z||this._addParentTile(a,e)}}var C=x===t;g.forEach(function(a,h){b.set(h);if(!e.has(h)){var d=c.tileInfoView.intersects(p,b);!d||!z&&C?"purge"===c.cachePolicy?b.level===w&&d||f.push(h):(b.level>w||!d)&&f.push(h):a.isReady?r.push(h):b.level>w&&f.push(h)}});for(D=0;D<r.length;D++)a=r[D],(d=g.get(a))&&d.isReady&&e.set(a,d);for(D=0;D<f.length;D++)a=f[D],d=g.get(a),this._tileCache?this._tileCache.add(d):this.releaseTile(d),g["delete"](a);e.forEach(function(a){return c.tiles.push(a)});
g.forEach(function(a){e.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(w,m,v);l.pool.release(p);return C}};a.prototype.clear=function(a){var c=this;void 0===a&&(a=!0);var b=this.tileIndex;a&&b.forEach(function(a){c.releaseTile(a)});b.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}else if(this._tileCache&&
this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d,b,e){this.maxSize=d;this.tileInfoView=b;this.removedFunc=e;this._tilePerId=new Map;this._tileKeysPerLevel=[]}d.prototype.has=function(d){return this._tilePerId.has(d)};
d.prototype.get=function(d){return this._tilePerId.get(d)};d.prototype.pop=function(d){var b=this._tilePerId.get(d);if(!b)return null;var e=this._tileKeysPerLevel[b.key.level];this._tilePerId["delete"](d);for(var f=0;f<e.length;f++)if(e[f].id===d){e.splice(f,1);break}b.visible=!0;return b};d.prototype.add=function(d){d.visible=!1;var b=d.key,e=b.id;this._tilePerId.has(e)||(this._tilePerId.set(e,d),d=b.level,this._tileKeysPerLevel[d]||(this._tileKeysPerLevel[d]=[]),this._tileKeysPerLevel[d].push(b))};
d.prototype.prune=function(d,b,e){var f=this._tilePerId.size;if(!(f<=this.maxSize)){for(var g=this._tileKeysPerLevel.length-1;f>this.maxSize&&0<=g;)g!==d&&(f=this._pruneAroundCenterTile(f,b,e,g)),g--;f>this.maxSize&&(f=this._pruneAroundCenterTile(f,b,e,d))}};d.prototype._pruneAroundCenterTile=function(d,b,e,f){f=this._tileKeysPerLevel[f];if(!f||0===f.length)return d;var l=this.tileInfoView.tileInfo,a=l.size,c=l.origin,h=e*a[0],k=e*a[1],n=[0,0],p=[0,0];for(f.sort(function(a,e){n[0]=c.x+h*(a.col+.5);
n[1]=c.y-k*(a.row+.5);p[0]=c.x+h*(e.col+.5);p[1]=c.y-k*(e.row+.5);return g.vec2.squaredDistance(n,b)-g.vec2.squaredDistance(p,b)});0<f.length&&(e=f.pop(),this._removeTile(e.id),d--,d!==this.maxSize););return d};d.prototype._removeTile=function(d){var b=this._tilePerId.get(d);this.removedFunc&&this.removedFunc(b);this._tilePerId["delete"](d)};return d}();d.default=q})},"esri/views/2d/support/Timeline":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});
q=function(){function d(){this._names=new Map}d.prototype.begin=function(d){this._names.has(d)||(this._names.set(d,!1),-1!==d.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+d+".Start"))};d.prototype.end=function(d){this._names.has(d)&&!this._names.get(d)&&(this._names.set(d,!0),performance.mark("Esri."+d+".End"))};d.prototype.record=function(d){this._names.has(d)||(this._names.set(d,!0),performance.mark("Esri."+d))};return d}();d.Timeline=q})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports tslib ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(q,d,g,l,m,b,e,f,r,a,c,h,k,n,p,I,t,x,D,G,w,v,u,z,y){var A={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},H={zoomIn:["\x3d","+"],zoomOut:["-","_"]},C={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(d){function l(){var a=null!==d&&d.apply(this,arguments)||this;a._handles=new m;return a}g.__extends(l,d);l.prototype.initialize=function(){var a=this;this._handles.add([b.whenNot(this.view,
"ready",function(){return a._disconnect()}),b.when(this.view,"ready",function(){return a._connect()})])};l.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};l.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};l.prototype._connect=function(){var e=this,d=new x.BrowserEventSource(this.view.surface,this.view.input),
g=[new u.ImmediateDoubleClick,new z.PointerClickHoldAndDrag,new y.SingleAndDoubleClick,new v.Drag(this.view.navigation),new w.DoubleTapDrag],g=new D.InputManager({eventSource:d,recognizers:g});g.installHandlers("prevent-context-menu",[new G.PreventContextMenu],D.ViewEventPriorities.INTERNAL);g.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new h.GamepadNavigation(this.view),new I.MouseWheelZoom(this.view),new f.DoubleClickZoom(this.view),new f.DoubleClickZoom(this.view,["Ctrl"]),
new a.DragPan(this.view,"primary"),new k.KeyPan(this.view,A),new p.KeyZoom(this.view,H),new n.KeyRotate(this.view,C),new c.DragRotate(this.view,"secondary"),new r.DoubleTapDragZoom(this.view,"touch")],D.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(g);this._source=d;this._inputManager=g;b.init(this.view.navigation,"browserTouchPanEnabled",function(a){e._source.browserTouchPanningEnabled=!a})};Object.defineProperty(l.prototype,"test",{get:function(){return{inputManager:this._inputManager}},
enumerable:!0,configurable:!0});g.__decorate([e.property()],l.prototype,"view",void 0);return l=g.__decorate([e.subclass("esri.views.2d.input.MapViewInputManager")],l)}(l)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","tslib","../../../input/InputHandler","../../../input/handlers/support"],function(q,d,g,l,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(b){function e(e,d){var a=b.call(this,!0)||this;a.view=e;a.registerIncoming("double-click",
d,function(c){return a._handleDoubleClick(c,d)});return a}g.__extends(e,b);e.prototype._handleDoubleClick=function(b,e){m.eventMatchesPointerAction(b.data,"primary")&&(b.stopPropagation(),e?this.view.mapViewNavigation.zoomOut([b.data.x,b.data.y]):this.view.mapViewNavigation.zoomIn([b.data.x,b.data.y]))};return e}(l.InputHandler);d.DoubleClickZoom=q})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.eventMatchesPointerAction=
function(d,l){switch(l){case "primary":return"touch"===d.pointerType||0===d.button;case "secondary":return"touch"!==d.pointerType&&2===d.button;case "tertiary":return"touch"!==d.pointerType&&1===d.button}};d.eventMatchesMousePointerAction=function(d,l){if("touch"===d.pointerType)return!1;switch(l){case "primary":return 0===d.button;case "secondary":return 2===d.button;case "tertiary":return 1===d.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require","exports","tslib",
"../../../../core/compilerUtils","../../../input/InputHandler"],function(q,d,g,l,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(b){function e(e,d,a){var c=b.call(this,!0)||this;c.view=e;c.pointerType=d;c.registerIncoming("double-tap-drag",a,function(a){return c._handleDoubleTapDrag(a)});return c}g.__extends(e,b);e.prototype._handleDoubleTapDrag=function(b){var e=b.data;if(e.pointerType===this.pointerType){b.stopPropagation();var a=e.action;b=e.delta;var c=this.view,e=c.mapViewNavigation;
switch(a){case "begin":this._currentScale=this._startScale=a=c.scale;this._previousDelta=b;e.begin();break;case "update":if(this._previousDelta.y===b.y)break;this._previousDelta=b;b=this._startScale*Math.pow(1.015,b.y);e.setViewpointImmediate(b/this._currentScale);this._currentScale=b;break;case "end":a=c.constraints;c=a.effectiveLODs;if(!a.snapToZoom||!c){e.end();break}c=a.snapScale(this._currentScale);b=(0<b.y?Math.max(c,a.snapToPreviousScale(this._startScale)):Math.min(c,a.snapToNextScale(this._startScale)))/
this._currentScale;e.zoom(b);break;default:l.neverReached(a)}}};return e}(m.InputHandler);d.DoubleTapDragZoom=q})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports tslib ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(q,d,g,l,m,b){Object.defineProperty(d,"__esModule",{value:!0});q=function(e){function d(d,a,c){var h=e.call(this,!0)||this;h.view=d;h.pointerAction=a;h.registerIncoming("drag",c,function(a){return h._handleDrag(a)});
h.registerIncoming("pointer-down",function(){return h.stopMomentumNavigation()});var f=h.view.mapViewNavigation;h.dragEventSeparator=new l.DragEventSeparator({start:function(a,c){f.pan.begin(h.view,c.data);c.stopPropagation()},update:function(a,c){f.pan.update(h.view,c.data);c.stopPropagation()},end:function(a,c){f.pan.end(h.view,c.data);c.stopPropagation()},condition:function(a,c){return 1===a&&b.eventMatchesPointerAction(c.data,h.pointerAction)}});return h}g.__extends(d,e);d.prototype._handleDrag=
function(b){var a=this.view.mapViewNavigation;a.pinch.zoomMomentum||a.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(b)};d.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return d}(m.InputHandler);d.DragPan=q})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d){this.callbacks=d;this.currentCount=
0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}d.prototype.handle=function(d){var g=d.data,b=g.pointers.size;switch(g.action){case "start":this.currentCount=b;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=b;this.emitStart(d);break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=b;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=
d};d.prototype.emitStart=function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};d.prototype.emitUpdate=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,d,this.startEvent)};d.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,d,this.startEvent);this.startEvent=null};return d}();d.DragEventSeparator=q})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports tslib ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(q,d,g,l,m,b){Object.defineProperty(d,"__esModule",{value:!0});q=function(e){function d(d,a,c){var h=e.call(this,!0)||this;h.view=d;h.pointerAction=a;var f=h.view.mapViewNavigation;h.dragEventSeparator=new l.DragEventSeparator({start:function(a,c){f.rotate.begin(h.view,c.data);c.stopPropagation()},update:function(a,c){f.rotate.update(h.view,c.data);c.stopPropagation()},end:function(a,c){f.rotate.end();c.stopPropagation()},condition:function(a,c){return 1===a&&b.eventMatchesPointerAction(c.data,
h.pointerAction)}});h.registerIncoming("drag",c,function(a){return h.dragEventSeparator.handle(a)});return h}g.__extends(d,e);return d}(m.InputHandler);d.DragRotate=q})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports tslib ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(q,d,g,l,m,b,e,f,r){Object.defineProperty(d,"__esModule",
{value:!0});q=function(d){function f(a){var c=d.call(this,!0)||this;c.view=a;c.frameTask=null;c.watchHandles=new l;c.currentDevice=null;c.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};c.handle=c.registerIncoming("gamepad",function(a){return c.handleEvent(a)});c.handle.pause();return c}g.__extends(f,d);f.prototype.onInstall=function(a){var c=this;d.prototype.onInstall.call(this,a);this.watchHandles.add([b.init(this.view.navigation.gamepad,"enabled",function(a){a?(c.handle.resume(),c.frameTask||
(c.frameTask=m.addFrameTask({update:function(a){return c.frameUpdate(a.deltaTime)}}))):(c.handle.pause(),c.frameTask&&(c.frameTask.remove(),c.frameTask=null))})])};f.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);d.prototype.onUninstall.call(this)};f.prototype.handleEvent=function(a){var c=this.view.navigation.gamepad.device;c&&a.data.device!==c||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,r.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,r.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};f.prototype.frameUpdate=function(b){var d=this.transformation;if(!r.isZeroTransformation(d)){var f=this.view.viewpoint.clone(),k=c*this.view.navigation.gamepad.velocityFactor*b;e.translateBy(f,f,[d.translation[0]*k,-d.translation[1]*k]);k=this.view.size;e.scaleAndRotateBy(f,f,1+d.translation[2]*h*b,this.view.constraints.rotationEnabled?
-d.heading*a*b:0,[k[0]/2,k[1]],k);b=this.view.constraints.constrain(f,this.view.viewpoint);this.view.viewpoint=b}};return f}(f.InputHandler);d.GamepadNavigation=q;var a=.06,c=.7,h=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(q,d,g){function l(d){var b=d*d;0>d&&(b*=-1);return b}Object.defineProperty(d,"__esModule",{value:!0});d.quadraticAccentuation=l;d.resetTransformation=function(d){d.translation[0]=0;
d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};d.extractTransformation=function(d,b,e){var f=d.state;d=d.device;b="forward-down"===b.tiltDirection?1:-1;"standard"===d.deviceType?(e.translation[0]=l(f.axes[0]),e.translation[1]=l(f.axes[1]),e.translation[2]=l(f.buttons[7])-l(f.buttons[6]),e.heading=l(f.axes[2]),e.tilt=l(f.axes[3])):"spacemouse"===d.deviceType&&(e.translation[0]=1.2*l(f.axes[0]),e.translation[1]=1.2*l(f.axes[1]),e.translation[2]=2*-l(f.axes[2]),e.heading=1.2*l(f.axes[5]),
e.tilt=1.2*l(f.axes[3]));e.tilt*=b;g.vec3.scale(e.translation,e.translation,1);return e};d.extractTransformationKeyboard=function(d,b){b.translation[0]=d[1]-d[0];b.translation[1]=d[3]-d[2];b.translation[2]=d[4]-d[5];b.heading=d[7]-d[6];b.tilt=d[8]-d[9];b.zoom=d[10]-d[11];return b};d.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt&&0===d.zoom}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports",
"tslib","../../../input/InputHandler"],function(q,d,g,l){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function b(b,f,g){var a,c=d.call(this,!0)||this;c.view=b;c.keys=f;c._pressed=!1;c._keyMap=(a={},a[f.left]="left",a[f.right]="right",a[f.up]="up",a[f.down]="down",a);c.registerIncoming("key-down",g,function(a){return c._handleKeyDown(a)});c.registerIncoming("key-up",g,function(a){return c._handleKeyUp(a)});c.registerIncoming("blur",g,function(){return c._handleBlur()});return c}g.__extends(b,
d);b.prototype._handleKeyDown=function(b){b.data.repeat||this._handleKey(b,!0)};b.prototype._handleKeyUp=function(b){this._handleKey(b,!1)};b.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};b.prototype._handleKey=function(b,d){var e=this._keyMap[b.data.key];if(this._pressed=null!=e){if(d)switch(this.view.mapViewNavigation.begin(),e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();b.stopPropagation()}};return b}(l.InputHandler);d.KeyPan=q})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","tslib","../../../input/InputHandler"],function(q,d,g,l){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function b(b,f,g){var a,c=d.call(this,!0)||this;c.view=b;
c.keys=f;c._pressed=!1;c._keyToDirection=(a={},a[f.clockwiseOption1]="clockwise",a[f.clockwiseOption2]="clockwise",a[f.counterClockwiseOption1]="counterClockwise",a[f.counterClockwiseOption2]="counterClockwise",a[f.resetOption1]="reset",a[f.resetOption2]="reset",a);c.registerIncoming("key-down",g,function(a){return c._handleKeyDown(a)});c.registerIncoming("key-up",g,function(a){return c._handleKeyUp(a)});c.registerIncoming("blur",g,function(){return c._handleBlur()});return c}g.__extends(b,d);b.prototype._handleKeyDown=
function(b){b.data.repeat||this._handleKey(b,!0)};b.prototype._handleKeyUp=function(b){this._handleKey(b,!1)};b.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};b.prototype._handleKey=function(b,d){var e=b.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[b.data.key],this._pressed=null!=e)){if(d)switch(this.view.mapViewNavigation.begin(),e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();b.stopPropagation()}};return b}(l.InputHandler);d.KeyRotate=q})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","tslib","../../../../core/compilerUtils","../../../input/InputHandler"],function(q,d,g,l,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(b){function e(e,
d,a){var c=b.call(this,!0)||this;c.view=e;c.keys=d;c._keysToZoomAction={};c.registerIncoming("key-down",a,function(a){return c._handleKeyDown(a)});d.zoomIn.forEach(function(a){return c._keysToZoomAction[a]=0});d.zoomOut.forEach(function(a){return c._keysToZoomAction[a]=1});return c}g.__extends(e,b);e.prototype._handleKeyDown=function(b){this._handleKey(b)};e.prototype._handleKey=function(b){var e=b.modifiers;if(!(0<e.size)||e.has("Shift"))if(e=b.data.key,e in this._keysToZoomAction){var e=this._keysToZoomAction[e],
a=this.view.mapViewNavigation,c=null;switch(e){case 0:c=a.zoomIn();break;case 1:c=a.zoomOut();break;default:l.neverReached(e);return}a.begin();c.then(function(){return a.end()});b.stopPropagation()}};return e}(m.InputHandler);d.KeyZoom=q})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","tslib","../../../input/InputHandler"],function(q,d,g,l){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function b(b,f){var e=d.call(this,!0)||this;e.view=b;e._canZoom=
!0;e.registerIncoming("mouse-wheel",f,function(a){return e._handleMouseWheel(a)});return e}g.__extends(b,d);b.prototype._handleMouseWheel=function(b){var e=this;if(this.view.navigation.mouseWheelZoomEnabled&&(b.preventDefault(),b.stopPropagation(),this._canZoom)){var d=this.view.mapViewNavigation;b=b.data;if(b=d.zoom(1/Math.pow(.6,1/60*b.deltaY),[b.x,b.y]))this._canZoom=!1,b.catch(function(){}).then(function(){e._canZoom=!0;d.end()})}};return b}(l.InputHandler);d.MouseWheelZoom=q})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require",
"exports","tslib","../../../input/DragEventSeparator","../../../input/InputHandler"],function(q,d,g,l,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(b){function e(e){var d=b.call(this,!0)||this;d.view=e;d.registerIncoming("drag",function(a){return d._handleDrag(a)});d.registerIncoming("pointer-down",function(){return d.stopMomentumNavigation()});var a=d.view.mapViewNavigation;d.dragEventSeparator=new l.DragEventSeparator({start:function(c,b){a.pinch.begin(d.view,b.data);b.stopPropagation()},
update:function(c,b){a.pinch.update(d.view,b.data);b.stopPropagation()},end:function(c,b){a.pinch.end(d.view);b.stopPropagation()},condition:function(a){return 2<=a}});return d}g.__extends(e,b);e.prototype._handleDrag=function(b){this.dragEventSeparator.handle(b)};e.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return e}(m.InputHandler);d.PinchRotateAndZoom=q})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),
function(q,d,g,l,m,b,e){Object.defineProperty(d,"__esModule",{value:!0});var f=g("trident"),r=g("edge"),a=g("chrome"),c=g("ff"),h=g("safari");q=function(){function d(a,c){var b=this;this.input=c;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=a;m.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,
"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new e.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return b._callback("gamepad",
a)}}d.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(c){a._releasePointerCaptureSafe(c)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(d.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=
a;this._updateTouchAction();this._updateTouchEventHandling()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeEvents",{set:function(a){var c=this,b;for(b in this._active)a&&a.has(b)||(this._element.removeEventListener(k[b],this._active[b]),delete this._active[b]);a&&a.forEach(function(a){if(!c._active[a]&&k[a]){var b=(c._eventHandlers[a]||c._handleDefault).bind(c,
a);c._element.addEventListener(k[a],b);c._active[a]=b}});this._gamepadSource.hasEventListeners=a&&a.has("gamepad")},enumerable:!0,configurable:!0});d.prototype.setPointerCapture=function(a,c){c?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};d.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":
"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};d.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(I){}};d.prototype._updateNormalizedPointerLikeEvent=function(a,c){a=l.createScreenPointFromNativeEvent(this._element,a);d.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));c.x=a.x;c.y=a.y;return c};d.prototype._handleKey=function(a,
c){var e=b.eventKey(c);e&&"key-up"===a&&this._keyDownState.delete(e);c={native:c,key:e,repeat:e&&this._keyDownState.has(e)};e&&"key-down"===a&&this._keyDownState.add(c.key);this._callback(a,c)};d.prototype._handlePointer=function(a,c){c=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,pointerType:c.pointerType,button:c.button,buttons:c.buttons,eventId:this._eventId++});this._callback(a,c)};d.prototype._handlePointerPreventDefault=function(a,c){var b=this._updateNormalizedPointerLikeEvent(c,
{native:c,x:0,y:0,pointerType:c.pointerType,button:c.button,buttons:c.buttons,eventId:this._eventId++});c.preventDefault();this._callback(a,b)};d.prototype._handleMouseWheel=function(b,e){var d=e.deltaY;switch(e.deltaMode){case 0:if(f||r)d=d/document.documentElement.clientHeight*600;break;case 1:d*=30;break;case 2:d*=900}f||r?d*=.7:a||h?d*=.6:c&&(d*=1.375);var k=Math.abs(d);100<k&&(d=d/k*200/(1+Math.exp(-.02*(k-100))));e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:d});this._callback(b,
e)};d.prototype._handlePointerCaptureLost=function(a,c){this._activePointerCaptures.delete(c.pointerId);this._handleDefault(a,c)};d.prototype._handleDefault=function(a,c){var b={native:c};c.preventDefault();this._callback(a,b)};d.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};d.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};d.test={disableSubpixelCoordinates:!1};return d}();d.BrowserEventSource=q;var k={"key-down":"keydown",
"key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function q(b,e){e=e||Object.create(null);var d=document.createEvent("Event");d.initEvent(b,
e.bubbles||!1,e.cancelable||!1);b=2;for(var h;b<a.length;b++)h=a[b],d[h]=e[h]||c[b];d.buttons=e.buttons||0;b=0;b=e.pressure&&d.buttons?e.pressure:d.buttons?.5:0;d.x=d.clientX;d.y=d.clientY;d.pointerId=e.pointerId||0;d.width=e.width||0;d.height=e.height||0;d.pressure=b;d.tiltX=e.tiltX||0;d.tiltY=e.tiltY||0;d.twist=e.twist||0;d.tangentialPressure=e.tangentialPressure||0;d.pointerType=e.pointerType||"";d.hwTimestamp=e.hwTimestamp||0;d.isPrimary=e.isPrimary||!1;return d}function d(){this.array=[];this.size=
0}function g(a,c,b,e){this.addCallback=a.bind(e);this.removeCallback=c.bind(e);this.changedCallback=b.bind(e);u&&(this.observer=new u(this.mutationWatcher.bind(this)))}function l(a){return"body /shadow-deep/ "+m(a)}function m(a){return'[touch-action\x3d"'+a+'"]'}function b(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function e(){if(H){y.forEach(function(a){String(a)===a?(A+=m(a)+b(a)+"\n",C&&(A+=l(a)+b(a)+"\n")):(A+=a.selectors.map(m)+b(a.rule)+"\n",C&&(A+=a.selectors.map(l)+b(a.rule)+
"\n"))});var a=document.createElement("style");a.textContent=A;document.head.appendChild(a)}}function f(a){if(!t.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function r(a){for(var c=a.parentNode;c&&c!==a.ownerDocument;)c=c.parentNode;if(!c)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var a="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),c=[!1,!1,null,null,
0,0,0,0,!1,!1,!1,!1,0,null,0,0],h=window.Map&&window.Map.prototype.forEach?Map:d;d.prototype={set:function(a,c){if(void 0===c)return this.delete(a);this.has(a)||this.size++;this.array[a]=c},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,c){return this.array.forEach(function(b,e){a.call(c,b,e,this)},this)}};var k="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
n=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],p={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},I="undefined"!==typeof SVGElementInstance,t={pointermap:new h,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,c){var b=c.events;b&&(b.forEach(function(a){c[a]&&(this.eventMap[a]=c[a].bind(c))},this),this.eventSources[a]=c,this.eventSourceList.push(c))},register:function(a){for(var c=
this.eventSourceList.length,b=0,e;b<c&&(e=this.eventSourceList[b]);b++)e.register.call(e,a)},unregister:function(a){for(var c=this.eventSourceList.length,b=0,e;b<c&&(e=this.eventSourceList[b]);b++)e.unregister.call(e,a)},contains:function(a,c){try{return a.contains(c)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var c=a.type;(c=this.eventMap&&
this.eventMap[c])&&c(a);a._handledByPE=!0}},listen:function(a,c){c.forEach(function(c){this.addEvent(a,c)},this)},unlisten:function(a,c){c.forEach(function(c){this.removeEvent(a,c)},this)},addEvent:function(a,c){a.addEventListener(c,this.boundHandler)},removeEvent:function(a,c){a.removeEventListener(c,this.boundHandler)},makeEvent:function(a,c){this.captureInfo[c.pointerId]&&(c.relatedTarget=null);a=new q(a,c);c.preventDefault&&(a.preventDefault=c.preventDefault);a._target=a._target||c.target;return a},
fireEvent:function(a,c){a=this.makeEvent(a,c);return this.dispatchEvent(a)},cloneEvent:function(a){for(var c=Object.create(null),b,e=0;e<k.length;e++)b=k[e],c[b]=a[b]||n[e],I&&("target"===b||"relatedTarget"===b)&&c[b]instanceof SVGElementInstance&&(c[b]=c[b].correspondingUseElement);a.preventDefault&&(c.preventDefault=function(){a.preventDefault()});return c},getTarget:function(a){var c=this.captureInfo[a.pointerId];if(!c)return a._target;if(a._target===c||!(a.type in p))return c},propagate:function(a,
c,b){for(var e=a.target,d=[];null!=e&&e!==document&&!e.contains(a.relatedTarget);)if(d.push(e),e=e.parentNode,!e)return;b&&d.reverse();d.forEach(function(b){a.target=b;c.call(this,a)},this)},setCapture:function(a,c,b){this.captureInfo[a]&&this.releaseCapture(a,b);this.captureInfo[a]=c;this.implicitRelease=this.releaseCapture.bind(this,a,b);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var e=new q("gotpointercapture");e.pointerId=
a;e._target=c;b||this.asyncDispatchEvent(e)},releaseCapture:function(a,c){var b=this.captureInfo[a];if(b){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var e=new q("lostpointercapture");e.pointerId=a;e._target=b;c||this.asyncDispatchEvent(e)}},dispatchEvent:function(a){var c=this.getTarget(a);if(c)return c.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};t.boundHandler=t.eventHandler.bind(t);var x={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var c=a.olderShadowRoot;!c&&(a=a.querySelector("shadow"))&&(c=a.olderShadowRoot);return c},allShadows:function(a){var c=[];for(a=this.shadow(a);a;)c.push(a),a=this.olderShadow(a);return c},searchRoot:function(a,c,b){if(a){var e=a.elementFromPoint(c,
b),d;for(d=this.targetingShadow(e);d;){if(a=d.elementFromPoint(c,b))return e=this.targetingShadow(a),this.searchRoot(e,c,b)||a;d=this.olderShadow(d)}return e}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var c=a.clientX,b=a.clientY;a=this.owner(a.target);a.elementFromPoint(c,b)||(a=document);return this.searchRoot(a,c,b)}},D=Array.prototype.forEach.call.bind(Array.prototype.forEach),
G=Array.prototype.map.call.bind(Array.prototype.map),w=Array.prototype.slice.call.bind(Array.prototype.slice),v=Array.prototype.filter.call.bind(Array.prototype.filter),u=window.MutationObserver||window.WebKitMutationObserver,z={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};g.prototype={watchSubtree:function(a){this.observer&&x.canTarget(a)&&this.observer.observe(a,z)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){D(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,c){this.changedCallback(a,c)},concatLists:function(a,c){return a.concat(w(c))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var c=G(a,this.findElements,this);c.push(v(a,this.isElement));return c.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var y=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],A="",H=window.PointerEvent||window.MSPointerEvent,C=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,B=t.pointermap,E=[1,4,2,8,16],F=!1;try{F=1===(new MouseEvent("test",{buttons:1})).buttons}catch(R){}var P={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){t.listen(a,
this.events)},unregister:function(a){t.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var c=this.lastTouches,b=a.clientX;a=a.clientY;for(var e=0,d=c.length,h;e<d&&(h=c[e]);e++){var f=Math.abs(a-h.y);if(25>=Math.abs(b-h.x)&&25>=f)return!0}},prepareEvent:function(a){var c=t.cloneEvent(a),b=c.preventDefault;c.preventDefault=function(){a.preventDefault();b()};c.pointerId=this.POINTER_ID;c.isPrimary=!0;c.pointerType=this.POINTER_TYPE;return c},prepareButtonsForMove:function(a,
c){var b=B.get(this.POINTER_ID);a.buttons=0!==c.which&&b?b.buttons:0;c.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var c=B.get(this.POINTER_ID),b=this.prepareEvent(a);F||(b.buttons=E[b.button],c&&(b.buttons|=c.buttons),a.buttons=b.buttons);B.set(this.POINTER_ID,a);c&&0!==c.buttons?t.move(b):t.down(b)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var c=this.prepareEvent(a);F||this.prepareButtonsForMove(c,a);c.button=-1;B.set(this.POINTER_ID,a);t.move(c)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var c=B.get(this.POINTER_ID),b=this.prepareEvent(a);if(!F){var e=E[b.button];b.buttons=c?c.buttons&~e:0;a.buttons=b.buttons}B.set(this.POINTER_ID,a);b.buttons&=~E[b.button];0===b.buttons?t.up(b):t.move(b)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var c=this.prepareEvent(a);F||this.prepareButtonsForMove(c,a);c.button=-1;B.set(this.POINTER_ID,a);t.enterOver(c)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var c=
this.prepareEvent(a);F||this.prepareButtonsForMove(c,a);c.button=-1;t.leaveOut(c)}},cancel:function(a){a=this.prepareEvent(a);t.cancel(a);this.deactivateMouse()},deactivateMouse:function(){B.delete(this.POINTER_ID)}},L=t.captureInfo,Q=x.findTarget.bind(x),M=x.allShadows.bind(x),J=t.pointermap,O,N={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){O.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var c=a.getAttribute("touch-action"),b=this.touchActionToScrollType(c);
b&&(a._scrollType=b,t.listen(a,this.events),M(a).forEach(function(a){a._scrollType=b;t.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;t.unlisten(a,this.events);M(a).forEach(function(a){a._scrollType=void 0;t.unlisten(a,this.events)},this)},elementChanged:function(a,c){var b=a.getAttribute("touch-action"),e=this.touchActionToScrollType(b);c=this.touchActionToScrollType(c);e&&c?(a._scrollType=e,M(a).forEach(function(a){a._scrollType=e},this)):c?this.elementRemoved(a):
e&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var c=this.scrollTypes;if("none"===a)return"none";if(a===c.XSCROLLER)return"X";if(a===c.YSCROLLER)return"Y";if(c.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===J.size||1===J.size&&J.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var c=0;if("touchstart"===a||"touchmove"===a)c=
1;return c},touchToPointer:function(a){var c=this.currentTouchEvent,b=t.cloneEvent(a),e=b.pointerId=a.identifier+2;b.target=L[e]||Q(b);b.bubbles=!0;b.cancelable=!0;b.detail=this.clickCount;b.button=0;b.buttons=this.typeToButtons(c.type);b.width=2*(a.radiusX||a.webkitRadiusX||0);b.height=2*(a.radiusY||a.webkitRadiusY||0);b.pressure=a.force||a.webkitForce||.5;b.isPrimary=this.isPrimaryTouch(a);b.pointerType=this.POINTER_TYPE;b.altKey=c.altKey;b.ctrlKey=c.ctrlKey;b.metaKey=c.metaKey;b.shiftKey=c.shiftKey;
var d=this;b.preventDefault=function(){d.scrolling=!1;d.firstXY=null;c.preventDefault()};return b},processTouches:function(a,c){var b=a.changedTouches;this.currentTouchEvent=a;a=0;for(var e;a<b.length;a++)e=b[a],c.call(this,this.touchToPointer(e))},shouldScroll:function(a){if(this.firstXY){var c;c=a.currentTarget._scrollType;if("none"===c)c=!1;else if("XY"===c)c=!0;else{a=a.changedTouches[0];var b="Y"===c?"X":"Y";c=Math.abs(a["client"+c]-this.firstXY[c])>=Math.abs(a["client"+b]-this.firstXY[b])}this.firstXY=
null;return c}},findTouch:function(a,c){for(var b=0,e=a.length,d;b<e&&(d=a[b]);b++)if(d.identifier===c)return!0},vacuumTouches:function(a){var c=a.touches;if(J.size>=c.length){var b=[];J.forEach(function(a,e){1===e||this.findTouch(c,e-2)||b.push(a.out)},this);b.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){J.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});t.enterOver(a);t.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var c=J.get(a.pointerId);if(c){var b=c.out,e=c.outTarget;t.move(a);b&&e!==a.target&&(b.relatedTarget=a.target,a.relatedTarget=e,b.target=e,a.target?(t.leaveOut(b),t.enterOver(a)):(a.target=e,a.relatedTarget=null,this.cancelOut(a)));c.out=a;c.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(t.up(a),t.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){t.cancel(a);t.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){J.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var c=P.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
c.push(a),c=function(a,c){c=a.indexOf(c);-1<c&&a.splice(c,1)}.bind(null,c,a),setTimeout(c,2500))}};O=new g(N.elementAdded,N.elementRemoved,N.elementChanged,N);var K=t.pointermap,S=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){t.listen(a,this.events)},unregister:function(a){t.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var c=a;S&&(c=t.cloneEvent(a),c.pointerType=this.POINTER_TYPES[a.pointerType]);return c},cleanup:function(a){K.delete(a)},MSPointerDown:function(a){K.set(a.pointerId,a);a=this.prepareEvent(a);t.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);t.move(a)},MSPointerUp:function(a){var c=this.prepareEvent(a);t.up(c);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);t.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);t.enterOver(a)},MSPointerCancel:function(a){var c=this.prepareEvent(a);t.cancel(c);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=t.makeEvent("lostpointercapture",a);t.dispatchEvent(a)},MSGotPointerCapture:function(a){a=t.makeEvent("gotpointercapture",a);t.dispatchEvent(a)}},U,V,Y;window.navigator.msPointerEnabled?(U=function(a){f(a);r(this);0!==t.pointermap.get(a).buttons&&(t.setCapture(a,this,!0),this.msSetPointerCapture(a))},V=function(a){f(a);t.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(U=function(a){f(a);r(this);0!==t.pointermap.get(a).buttons&&t.setCapture(a,this)},V=function(a){f(a);t.releaseCapture(a)});Y=function(a){return!!t.captureInfo[a]};var W=window.PointerEvent||window.MSPointerEvent;return{dispatcher:t,Installer:g,PointerEvent:q,PointerMap:h,targetFinding:x,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=q,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),t.registerSource("ms",T)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),t.registerSource("mouse",P),void 0!==window.ontouchstart&&t.registerSource("touch",N)),t.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:U},releasePointerCapture:{value:V},hasPointerCapture:{value:Y}})},applyLocal:function(a){W||(window.PointerEvent||(window.navigator.msPointerEnabled?
t.registerSource("ms",T):(t.registerSource("mouse",P),void 0!==window.ontouchstart&&t.registerSource("touch",N)),t.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=U.bind(a),a.releasePointerCapture=V.bind(a),a.hasPointerCapture=Y.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define(["require","exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],
function(q,d,g,l,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function b(b,d){var e=this;this.element=b;this.input=d;this._hasEventListeners=!1;this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(a){return e.connectGamepad(a)}),window.addEventListener("gamepadconnected",function(a){return e.connectGamepad(a.gamepad)}),window.addEventListener("gamepaddisconnected",function(a){return e.disconnectGamepad(a.gamepad)}),
this.ensurePollingState()}b.prototype.destroy=function(){var b=this;this.ensurePollingState();this.supported&&(window.removeEventListener("gamepadconnected",function(e){return b.connectGamepad(e.gamepad)}),window.removeEventListener("gamepaddisconnected",function(e){return b.disconnectGamepad(e.gamepad)}))};Object.defineProperty(b.prototype,"hasEventListeners",{set:function(b){this._hasEventListeners!==b&&(this._hasEventListeners=b,this.ensurePollingState())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"eventsEnabled",{get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onEvent",{set:function(b){this.callback=b},enumerable:!0,configurable:!0});b.prototype.connectGamepad=function(b){var e=new l(b);"unknown"!==e.deviceType&&(this.inputDevices[b.index]=e,this.input.gamepad.devices.add(e));this.ensurePollingState()};b.prototype.disconnectGamepad=function(b){var e=b.index,d=this.inputDevices[e];
d&&(this.emitGamepadEvent(b,m.extractState(d),!1),this.inputDevices.splice(e,1),this.latestUpdate.splice(e,1),this.input.gamepad.devices.remove(d),this.ensurePollingState())};b.prototype.ensurePollingState=function(){this.eventsEnabled?this.startPolling():this.stopPolling()};b.prototype.startPolling=function(){var b=this;null==this.frameTask&&(this.frameTask=g.addFrameTask({update:function(){return b.readGamepadState()}}))};b.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),
this.frameTask=null,this.latestUpdate=[])};b.prototype.readGamepadState=function(){var b=this,d=document.hasFocus(),g=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!d||"view"===this.input.gamepad.enabledFocusMode&&!g;this.forEachGamepad(function(c){var e=b.inputDevices[c.index];if(e){var d=b.latestUpdate[c.index],e=m.extractState(e),f=a||m.stateIdle(e);d&&(d.timestamp===c.timestamp||!d.active&&f||m.stateEqual(d.state,e))||b.emitGamepadEvent(c,e,
!f)}})};b.prototype.forEachGamepad=function(b){for(var e=window.navigator.getGamepads(),d=0;d<e.length;d++){var a=e[d];this.validate(a)&&b(a)}};b.prototype.emitGamepadEvent=function(b,d,g){var a=this.latestUpdate[b.index];if((a=a&&a.active)||g)this.latestUpdate[b.index]={timestamp:b.timestamp,state:d,active:g},this.callback&&this.callback({device:this.inputDevices[b.index],state:d,action:!a&&g?"start":a&&g?"update":"end"})};b.prototype.validate=function(b){if(!b||!b.connected)return!1;for(var e=0;e<
b.axes.length;e++)if(isNaN(b.axes[e]))return!1;return!0};return b}();d.GamepadSource=q})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.extractState=function(d){var l=d.native;return l?{buttons:l.buttons.map(function(b){return b.pressed?b.value?b.value:1:0}),axes:l.axes.map(function(b){var e=d.axisThreshold,f=Math.abs(b);b=f<e?0:g.sign(b)*(f-e)/(1-e);return b})}:{buttons:[],
axes:[]}};d.stateEqual=function(d,g){if(d.axes.length!==g.axes.length||d.buttons.length!==g.buttons.length)return!1;for(var b=0;b<d.axes.length;b++)if(d.axes[b]!==g.axes[b])return!1;for(b=0;b<d.buttons.length;b++)if(d.buttons[b]!==g.buttons[b])return!1;return!0};d.stateIdle=function(d){for(var g=0;g<d.axes.length;g++)if(0!==d.axes[g])return!1;for(g=0;g<d.buttons.length;g++)if(0!==d.buttons[g])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports",
"tslib","../InputHandler"],function(q,d,g,l){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function b(){var b=d.call(this,!0)||this;b.registerIncoming("context-menu",function(b){b.data.native.preventDefault()});return b}g.__extends(b,d);return b}(l.InputHandler);d.PreventContextMenu=q;d.default=q})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports tslib ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(q,d,g,l,m,b,e,f,r,a){Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(a,d,h,f,g){void 0===a&&(a=r.DefaultParameters.maximumDoubleClickDelay);void 0===d&&(d=r.DefaultParameters.maximumDoubleClickDistance);void 0===h&&(h=r.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=r.DefaultParameters.maximumDoubleTouchDistance);void 0===g&&(g=l.default);var k=c.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=d;k.maximumDoubleTouchDelay=h;
k.maximumDoubleTouchDistance=f;k._clock=g;k._doubleTapDragReady=!1;k._doubleTapDragActive=!1;k._dragStartCenter=b.createScreenPoint(0,0);k._pointerState=new Map;k._doubleTapDrag=k.registerOutgoing("double-tap-drag");k._dragEventSeparator=new e.DragEventSeparator({start:function(a,c){return k._dragStart(a,c)},update:function(a,c){return k._dragUpdate(c)},end:function(a,c){return k._dragEnd(c)}});k.registerIncoming("drag",function(a){return k._dragEventSeparator.handle(a)});k.registerIncoming("pointer-down",
function(a){return k._handlePointerDown(a)});k.registerIncoming("pointer-up",function(){return k._handlePointerUp()});return k}g.__extends(d,c);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(d.prototype,"hasPendingInputs",{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!0,configurable:!0});d.prototype._clearPointerDown=
function(a){var c=this._pointerState.get(a);c&&(c.doubleTapTimeout.remove(),c.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};d.prototype._createDoubleTapDragData=function(a,c,b){return{action:a,delta:c,button:b.button,buttons:b.buttons,pointer:b.pointer,pointers:b.pointers,pointerType:b.pointerType,timestamp:b.timestamp}};d.prototype._dragStart=function(a,c){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var d=c.data;
a=c.modifiers;this._dragStartCenter=d.center;d=this._createDoubleTapDragData("begin",b.createScreenPoint(0,0),d);this._doubleTapDrag.emit(d,void 0,a);c.stopPropagation()}};d.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var c=a.data,d=a.modifiers,e=c.center,e=b.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),c=this._createDoubleTapDragData("update",e,c);this._doubleTapDrag.emit(c,void 0,d);a.stopPropagation()}};d.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var c=
a.data,d=a.modifiers,e=c.center,e=b.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),c=this._createDoubleTapDragData("end",e,c);this._doubleTapDrag.emit(c,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};d.prototype._handlePointerDown=function(c){var b=c.data,d=this._pointerId(b),e=this._pointerState.get(d),h=b.native.pointerType;e?(h="touch"===h?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),a.manhattanDistance(e.event.data,
b)>h?this._storePointerDown(c):this._doubleTapDragReady=!0):this._storePointerDown(c)};d.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};d.prototype._pointerId=function(a){var c=a.native;a=c.pointerId;var b=c.button,c=c.pointerType;return"mouse"===c?a+":"+b:""+c};d.prototype._storePointerDown=function(a){var c=this,b=a.data,d=b.native.pointerType,e=this._pointerId(b),b=this._clock.setTimeout(function(){return c._clearPointerDown(e)},"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(e,{event:a,doubleTapTimeout:b});this.refreshHasPendingInputs()};return d}(f.InputHandler);d.DoubleTapDrag=q})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports tslib ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(q,d,g,l,m,b,e){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};
q=function(b){function f(a,c,e,f,g){void 0===a&&(a=d.DefaultParameters.maximumDoubleClickDelay);void 0===c&&(c=d.DefaultParameters.maximumDoubleClickDistance);void 0===e&&(e=d.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=d.DefaultParameters.maximumDoubleTouchDistance);void 0===g&&(g=l.default);var h=b.call(this,!1)||this;h.maximumDoubleClickDelay=a;h.maximumDoubleClickDistance=c;h.maximumDoubleTouchDelay=e;h.maximumDoubleTouchDistance=f;h._clock=g;h._pointerState=new Map;h._click=h.registerOutgoing("click");
h._doubleClick=h.registerOutgoing("double-click");h.registerIncoming("immediate-click",h._handleImmediateClick.bind(h));h.registerIncoming("pointer-drag",h._handlePointerDrag.bind(h));h.registerIncoming("drag",h._handleDrag.bind(h));return h}g.__extends(f,b);f.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};Object.defineProperty(f.prototype,"hasPendingInputs",{get:function(){return m.someMap(this._pointerState,
function(a){return null!=a.doubleClickTimeout})},enumerable:!0,configurable:!0});f.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};f.prototype._handleImmediateClick=function(a){var c=a.data,b=this._pointerId(c),d=this._pointerState.get(b);if(d){var f="touch"===c.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e.manhattanDistance(d.event.data,c)>f?(this._clearDoubleClickTimeout(b,!0),this._startClick(a)):
(this._clearDoubleClickTimeout(b,!1),this._doubleClick.emit(d.event.data,void 0,d.event.modifiers))}else this._startClick(a)};f.prototype._startClick=function(a){var c=this,b=this._pointerId(a.data);this._pointerState.set(b,{event:a,doubleClickTimeout:this._clock.setTimeout(function(){return c._doubleClickTimeoutExceeded(b)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};f.prototype._handlePointerDrag=function(a){a=
this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};f.prototype._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};f.prototype._clearDoubleClickTimeout=function(a,c){var b=this._pointerState.get(a);b&&(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null,c&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};f.prototype._doubleClickTimeoutExceeded=function(a){var c=this._pointerState.get(a);
this._click.emit(c.event.data,void 0,c.event.modifiers);c.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};return f}(b.InputHandler);d.SingleAndDoubleClick=q})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.manhattanDistance=function(d,g){return Math.abs(g.x-d.x)+Math.abs(g.y-d.y)};d.euclideanDistance=function(d,g){var b=g.x-d.x;d=g.y-
d.y;return Math.sqrt(b*b+d*d)};d.fitCircleLSQ=function(d,m){m?(m.radius=0,m.center.x=0,m.center.y=0):m={radius:0,center:g.createScreenPoint()};if(0===d.length)return m;if(1===d.length)return m.center.x=d[0].x,m.center.y=d[0].y,m;if(2===d.length){var b=d[0];d=d[1];var e=[d.x-b.x,d.y-b.y],f=e[0],e=e[1];m.radius=Math.sqrt(f*f+e*e)/2;m.center.x=(b.x+d.x)/2;m.center.y=(b.y+d.y)/2;return m}for(var l=0,a=0,c=0;c<d.length;c++)l+=d[c].x,a+=d[c].y;for(var l=l/d.length,a=a/d.length,h=d.map(function(a){return a.x-
l}),k=d.map(function(c){return c.y-a}),n=b=m=0,p=0,I=f=0,c=e=0;c<h.length;c++){var t=h[c],x=k[c],D=t*t,G=x*x;m+=D;b+=G;n+=t*x;p+=D*t;f+=G*x;I+=t*G;e+=x*D}c=m;h=n;k=b;p=.5*(p+I);f=.5*(f+e);e=c*k-n*h;I=(p*k-f*h)/e;f=(c*f-n*p)/e;e=g.createScreenPoint(I+l,f+a);return{radius:Math.sqrt(I*I+f*f+(m+b)/d.length),center:e}}})},"esri/views/input/recognizers/Drag":function(){define("require exports tslib ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),function(q,
d,g,l,m,b,e){function f(a){var c=[];a.forEach(function(a){c.push(l.createScreenPoint(a.event.x,a.event.y))});return e.fitCircleLSQ(c)}function r(a){var b=f(a),d=0;a.forEach(function(a){for(var e=c(a,b),e=e-a.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=a.lastAngle+e;a.lastAngle=e;d+=e-a.initialAngle});d/=a.size||1;return{angle:d,radius:b.radius,center:b.center}}function a(a){var c=new Map;a.forEach(function(a,b){return c.set(b,a.event)});return c}function c(a,c){a=a.event;return Math.atan2(a.y-
c.center.y,a.x-c.center.x)}Object.defineProperty(d,"__esModule",{value:!0});q=function(b){function d(a){var c=b.call(this,!1)||this;c.navigationTouch=a;c.startStateModifiers=new Set;c.activePointerMap=new Map;c.isDragging=!1;c.isCurrentDragSuppressed=!1;c.drag=c.registerOutgoing("drag");c.registerIncoming("pointer-drag",c.handlePointerDrag.bind(c));c.registerIncoming("pointer-up",c.handlePointerUpAndPointerLost.bind(c));c.registerIncoming("pointer-capture-lost",c.handlePointerUpAndPointerLost.bind(c));
c.registerIncoming("pointer-cancel",c.handlePointerUpAndPointerLost.bind(c));return c}g.__extends(d,b);d.prototype.createPayload=function(c,b,d,e){return{action:c,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:e,pointers:a(this.activePointerMap),pointer:b,angle:d.angle,radius:d.radius,center:d.center}};d.prototype.addPointer=function(a){var b=a.native.pointerId,d=r(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(b,a);
b=c(a,f(this.activePointerMap));a.initialAngle=b;a.lastAngle=b;this.updatePointerAngles(d)};d.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var c=this.activePointerMap.get(a.native.pointerId);c?c.event=a:this.addPointer(a)}};d.prototype.removePointer=function(a){var c=r(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(c)};d.prototype.updatePointerAngles=function(a){var b=r(this.activePointerMap);this.activePointerMap.forEach(function(d){d.initialAngle=
c(d,b)-a;d.lastAngle=c(d,b)-a})};d.prototype.emitEvent=function(a,c,b){var d=r(this.activePointerMap);this.drag.emit(this.createPayload(a,c,d,b),void 0,this.startStateModifiers)};d.prototype.handlePointerUpAndPointerLost=function(a){var c=a.data.native.pointerId,b=m.Milliseconds(a.timestamp);this.activePointerMap.get(c)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,b),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(c)):
(this.removePointer(c),this.emitEvent("removed",a.data,m.Milliseconds(a.timestamp))))};d.prototype.handlePointerDrag=function(a){var c=a.data,b=c.currentEvent,d=m.Milliseconds(a.timestamp);switch(c.action){case "start":case "update":this.isDragging?this.activePointerMap.has(b.native.pointerId)?(this.updatePointer(b),!this.isCurrentDragSuppressed&&this.emitEvent("update",b,d)):(this.addPointer(b),this.emitEvent("added",b,d),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(b),this.pointerType=
a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",b,d))}};Object.defineProperty(d.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!0,configurable:!0});return d}(b.InputHandler);d.Drag=
q;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(d.Button||(d.Button={}))})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("require exports tslib ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(q,d,g,l,m,b,e){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function f(a,c,e,f,g){void 0===a&&(a=b.DefaultParameters.maximumDoubleClickDelay);
void 0===c&&(c=b.DefaultParameters.maximumDoubleClickDistance);void 0===e&&(e=b.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=b.DefaultParameters.maximumDoubleTouchDistance);void 0===g&&(g=l.default);var h=d.call(this,!1)||this;h.maximumDoubleClickDelay=a;h.maximumDoubleClickDistance=c;h.maximumDoubleTouchDelay=e;h.maximumDoubleTouchDistance=f;h._clock=g;h._pointerState=new Map;h._immediateDoubleClick=h.registerOutgoing("immediate-double-click");h.registerIncoming("pointer-down",h._handlePointerDown.bind(h));
h.registerIncoming("pointer-up",function(a){h._handlePointerLoss(a,"pointer-up")});h.registerIncoming("pointer-capture-lost",function(a){h._handlePointerLoss(a,"pointer-capture-lost")});h.registerIncoming("pointer-cancel",function(a){h._handlePointerLoss(a,"pointer-cancel")});return h}g.__extends(f,d);f.prototype.onUninstall=function(){this._pointerState.forEach(function(a){a.immediateDoubleClick&&a.immediateDoubleClick.timeoutHandle.remove()});d.prototype.onUninstall.call(this)};f.prototype._handlePointerDown=
function(a){a=a.data;var c=this._pointerId(a);this._pointerState.has(c)||(this._pointerState.set(c,{downButton:a.native.button,immediateDoubleClick:null}),this.startCapturingPointer(a.native))};f.prototype._handlePointerLoss=function(a,c){var b=a.data,d=this._pointerId(b);if((d=this._pointerState.get(d))&&"pointer-up"===c&&d.downButton===b.native.button)if(c=d.immediateDoubleClick){c.timeoutHandle.remove();var f="touch"===a.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;
e.manhattanDistance(c,a.data)>f?this._startImmediateDoubleClick(a,d):(this._immediateDoubleClick.emit(a.data,void 0,c.modifiers),this._removeState(b))}else this._startImmediateDoubleClick(a,d)};f.prototype._startImmediateDoubleClick=function(a,c){var b=this;c.immediateDoubleClick={x:a.data.x,y:a.data.y,modifiers:a.modifiers,timeoutHandle:this._clock.setTimeout(function(){return b._removeState(a.data)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};
f.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};f.prototype._removeState=function(a){var c=this._pointerId(a);this._pointerState.delete(c);this.stopCapturingPointer(a.native);this.refreshHasPendingInputs()};return f}(m.InputHandler);d.ImmediateDoubleClick=q})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports tslib ../../../core/clock ../InputHandler ./support".split(" "),function(q,d,g,
l,m,b){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};q=function(e){function f(b,a,c,h,f,g){void 0===b&&(b=d.DefaultParameters.maximumClickDelay);void 0===a&&(a=d.DefaultParameters.movementUntilMouseDrag);void 0===c&&(c=d.DefaultParameters.movementUntilPenDrag);void 0===h&&(h=d.DefaultParameters.movementUntilTouchDrag);void 0===f&&(f=d.DefaultParameters.holdDelay);
void 0===g&&(g=l.default);var k=e.call(this,!1)||this;k.maximumClickDelay=b;k.movementUntilMouseDrag=a;k.movementUntilPenDrag=c;k.movementUntilTouchDrag=h;k.holdDelay=f;k._clock=g;k._pointerState=new Map;k._pointerDrag=k.registerOutgoing("pointer-drag");k._immediateClick=k.registerOutgoing("immediate-click");k._pointerHold=k.registerOutgoing("hold");k.registerIncoming("pointer-down",k._handlePointerDown.bind(k));k.registerIncoming("pointer-up",function(a){k._handlePointerLoss(a,"pointer-up")});k.registerIncoming("pointer-capture-lost",
function(a){k._handlePointerLoss(a,"pointer-capture-lost")});k.registerIncoming("pointer-cancel",function(a){k._handlePointerLoss(a,"pointer-cancel")});k._moveHandle=k.registerIncoming("pointer-move",k._handlePointerMove.bind(k));k._moveHandle.pause();return k}g.__extends(f,e);f.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.holdTimeout&&(b.holdTimeout.remove(),b.holdTimeout=null)});e.prototype.onUninstall.call(this)};f.prototype._handlePointerDown=function(b){var a=
this,c=b.data,d=c.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var c=a._pointerState.get(d);c&&(c.isDragging||(a._pointerHold.emit(c.previousEvent,void 0,b.modifiers),c.holdEmitted=!0),c.holdTimeout=null)},this.holdDelay));e={startEvent:c,previousEvent:c,startTimestamp:b.timestamp,isDragging:!1,downButton:c.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(c.native);this._moveHandle.resume();1<this._pointerState.size&&
this.startDragging(b)};f.prototype._createPointerDragData=function(b,a,c){return{action:b,startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:c}};f.prototype._handlePointerMove=function(d){var a=d.data,c=this._pointerState.get(a.native.pointerId);if(c){if(c.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",c,a),void 0,c.modifiers);else{var e=b.euclideanDistance(a,c.startEvent),f=this._getDragThreshold(a.native.pointerType);e>f&&this.startDragging(d)}c.previousEvent=
a}};f.prototype._getDragThreshold=function(b){switch(b){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};f.prototype.startDragging=function(b){var a=this,c=b.data,d=c.native.pointerId;this._pointerState.forEach(function(e){null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=b.modifiers,e.isDragging=!0,d===e.startEvent.native.pointerId?a._pointerDrag.emit(a._createPointerDragData("start",
e,c)):a._pointerDrag.emit(a._createPointerDragData("start",e,e.previousEvent),b.timestamp))})};f.prototype._handlePointerLoss=function(b,a){var c=b.data,d=c.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===a?c:e.previousEvent),void 0,e.modifiers):"pointer-up"===a&&e.downButton===c.native.button&&b.timestamp-e.startTimestamp<=this.maximumClickDelay&&
!e.holdEmitted&&this._immediateClick.emit(c),this._pointerState.delete(d),this.stopCapturingPointer(c.native),0===this._pointerState.size&&this._moveHandle.pause())};return f}(m.InputHandler);d.PointerClickHoldAndDrag=q})},"esri/views/2d/support/HighlightOptions":function(){define("require exports tslib ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(q,d,g,l,m,b){var e=0;return function(d){function f(){var a=null!==d&&d.apply(this,arguments)||this;
a.color=new l([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}g.__extends(f,d);Object.defineProperty(f.prototype,"version",{get:function(){return e++},enumerable:!0,configurable:!0});g.__decorate([b.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],f.prototype,"version",null);g.__decorate([b.property({type:l})],f.prototype,"color",void 0);g.__decorate([b.property({type:l})],f.prototype,"haloColor",void 0);g.__decorate([b.property()],f.prototype,"haloOpacity",
void 0);g.__decorate([b.property()],f.prototype,"fillOpacity",void 0);return f=g.__decorate([b.subclass("esri.views.2d.support.HighlightOptions")],f)}(m)})},"esri/views/support/screenshotUtils":function(){define(["require","exports","tslib","../../core/compilerUtils","../../core/mathUtils"],function(q,d,g,l,m){function b(b,d){var e=b||{},h=e.format,f=e.quality,k=e.rotation,e=e.disableSlice,g=c(b,d.padding),n;n=d.width-g.left-g.right;d=d.height-g.top-g.bottom;g={x:0,y:0,width:n,height:d};if(b&&b.area){null!=
b.area.x&&(g.x=Math.floor(b.area.x));null!=b.area.y&&(g.y=Math.floor(b.area.y));var t=null!=b.area.width?Math.floor(b.area.width):null,x=null!=b.area.height?Math.floor(b.area.height):null;g.width=n-g.x;g.height=d-g.y;null!=t&&null!=x?(g.width=Math.min(g.width,t),g.height=Math.min(g.height,x)):null==t&&null!=x?(t=Math.min(g.width,t),g.height*=t/g.width,g.width=t):null!=t&&null==x&&(t=Math.min(g.height,x),g.width*=t/g.height,g.height=t)}g=a(g,b);t=Math.floor(Math.max(g.x,0));x=Math.floor(Math.max(g.y,
0));n={x:t,y:x,width:Math.floor(Math.min(g.width,n-t)),height:Math.floor(Math.min(g.height,d-x))};d=n.width/n.height;g=g.width/g.height;g!==d&&(g>d?(d=Math.floor(n.width/g),n={x:n.x,y:Math.floor(n.y+(n.height-d)/2),width:n.width,height:d}):(d=Math.floor(n.height*g),n={x:Math.floor(n.x+(n.width-d)/2),y:n.y,width:d,height:n.height}));g=r(b,n);d=g.width;g=g.height;a:switch(h){case "png":case "jpg":case "jpeg":break a;case null:case void 0:h=p;break a;default:l.neverReached(h),h=p}t=I[h];f=m.clamp(null!=
f?f:t,0,100);return{format:h,quality:f,area:n,width:d,height:g,rotation:k,disableSlice:!!e,ignoreBackground:!(!b||!b.ignoreBackground),ignorePadding:!(!b||!b.ignorePadding)}}function e(a,c){return a.toDataURL(n[c.format],c.quality/100)}function f(a,c,b){b||(h||(h=document.createElement("canvas"),h.width=1,h.height=1),b=h);return b.getContext("2d").createImageData(a,c)}function r(a,c){if(!a)return c;var b=a.width;a=a.height;if(null!=b&&null!=a)return{width:Math.floor(b),height:Math.floor(a)};if(null==
b&&null==a)return c;c=c.width/c.height;return null==a?{width:Math.floor(b),height:Math.floor(b/c)}:{width:Math.floor(a*c),height:Math.floor(a)}}function a(a,c){if(!c||null==c.width||null==c.height)return a;c=c.width/c.height;var b=a.width/a.height;if(b===c)return a;if(b<c)return c=Math.floor(a.height*c),a.x-=(c-a.width)/2,a.width=c,a;c=Math.floor(a.width/c);a.y-=(c-a.height)/2;a.height=c;return a}function c(a,c){return!c||a&&a.ignorePadding?t:c}Object.defineProperty(d,"__esModule",{value:!0});d.completeUserSettings=
b;d.toRenderSettings=function(a,d){var e=b(a,d),h=e.area,f=e.width/h.width,g=c(e,d.padding),k=g.left+g.right,n=g.top+g.bottom;return{framebufferWidth:Math.floor((d.width-k)*f+k),framebufferHeight:Math.floor((d.height-n)*f+n),region:{x:Math.floor(h.x*f)+g.left,y:Math.floor(h.y*f)+g.top,width:e.width,height:e.height},format:e.format,quality:e.quality,rotation:e.rotation,pixelRatio:f,layers:a&&a.layers?a.layers:[],disableSlice:e.disableSlice,ignoreBackground:e.ignoreBackground,ignorePadding:e.ignorePadding}};
d.encodeResult=function(a,c,b,d){if(d.premultipliedAlpha)for(var h=a.data,f=h.length,g=0;g<f;g+=4){var k=h[g+3];0<k&&(k/=255,h[g+0]/=k,h[g+1]/=k,h[g+2]/=k)}b.width=a.width;b.height=a.height;h=b.getContext("2d");h.putImageData(a,0,0);d.flipY&&(h.save(),h.globalCompositeOperation="copy",h.scale(1,-1),h.translate(0,-h.canvas.height),h.drawImage(h.canvas,0,0),h.restore());a=h.getImageData(0,0,a.width,a.height);c=e(b,c);b.width=0;b.height=0;return{dataUrl:c,data:a}};d.toDataUrl=e;d.createEmptyImageData=
function(a,c,b){if(!a||!c)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,c)}catch(w){k=!1}return f(a,c,b)};d.wrapImageData=function(a,c,b,d){if(!c||!b)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,c,b)}catch(v){k=!1}c=f(c,b,d);c.data.set(a,0);return c};d.resampleHermite=function(a,c,b,d,e,h,f,g){void 0===d&&(d=0);void 0===e&&(e=0);void 0===h&&(h=a.width-d);void 0===f&&(f=a.height-e);void 0===g&&(g=!1);var k=
a.data,n=c.width,p=c.height,t=c.data;h/=n;f/=p;var l=Math.ceil(h/2),m=Math.ceil(f/2);a=a.width;for(var x=0;x<p;x++)for(var r=0;r<n;r++){for(var D=4*(r+(g?p-x-1:x)*n),I=0,G=0,w=0,q=0,v=0,u=0,y=(x+.5)*f,z=Math.floor(x*f);z<(x+1)*f;z++)for(var V=Math.abs(y-(z+.5))/m,Y=(r+.5)*h,V=V*V,W=Math.floor(r*h);W<(r+1)*h;W++){var R=Math.abs(Y-(W+.5))/l,R=Math.sqrt(V+R*R);if(!(1<=R)){var R=2*R*R*R-3*R*R+1,X=4*(d+W+(e+z)*a),u=u+R*k[X+3],G=G+R;!b&&255>k[X+3]&&(R=R*k[X+3]/255);w+=R*k[X];q+=R*k[X+1];v+=R*k[X+2];I+=
R}}t[D]=w/I;t[D+1]=q/I;t[D+2]=v/I;t[D+3]=u/G}return c};d.screenshotSuperSampleSettings=function(a,b,d){if(!b)return a;b=a.framebufferWidth;var e=a.framebufferHeight,h=a.pixelRatio,f=a.region;d=c(a,d);var k=d.left+d.right,n=d.top+d.bottom,p=b-k,t=e-n,l=Math.min(8,Math.min((2048-k)/p,(2048-n)/t));return 1.5>l?a:g.__assign(g.__assign({},a),{framebufferWidth:Math.round(p*l)+k,framebufferHeight:Math.round(t*l)+n,pixelRatio:h*l,resample:{region:{x:Math.round((f.x-d.left)*l)+d.left,y:Math.round((f.y-d.top)*
l)+d.top,width:Math.round(f.width*l),height:Math.round(f.height*l)},width:b,height:e}})};var h=null,k=!0,n={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},p="jpg",I={png:100,jpg:98,jpeg:98},t={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","tslib","../../core/Error","../../core/has"],function(q,d,g,l,m){Object.defineProperty(d,"__esModule",{value:!0});var b={checkMajorWebPerformanceCaveat:!0};d.check=function(d){d=g.__assign(g.__assign({},
b),d);return m("esri-webgl")?d.checkMajorWebPerformanceCaveat&&m("esri-webgl-major-performance-caveat")?new l("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):m("esri-webgl-high-precision-fragment")?m("esri-webgl-vertex-shader-samplers")?m("esri-webgl-element-index-uint")?m("esri-webgl-standard-derivatives")?m("esri-webgl-instanced-arrays")?null:new l("webgl:instanced-arrays-required",
"WebGL support for instanced rendering is required but not supported."):new l("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new l("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new l("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new l("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):
new l("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define(["require","exports","tslib","../../../core/accessorSupport/decorators","../DefaultUI"],function(q,d,g,l,m){return function(b){function d(d){d=b.call(this,d)||this;d.components=["attribution","zoom"];return d}g.__extends(d,b);g.__decorate([l.property()],d.prototype,"components",void 0);return d=g.__decorate([l.subclass("esri.views.ui.2d.DefaultUI2D")],d)}(m)})},"esri/views/ui/DefaultUI":function(){define("require exports tslib ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(q,d,g,l,m,b,e,f,r,a,c){return function(d){function e(a){a=d.call(this,a)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}g.__extends(e,d);e.prototype.initialize=function(){this._handles.add([l.init(this,"components",this._componentsWatcher.bind(this)),l.init(this,"view",this._updateViewAwareWidgets.bind(this))])};e.prototype._removeComponents=function(a){var c=this;a.forEach(function(a){if(a=
c._find(a))c.remove(a),a.destroy()})};e.prototype._updateViewAwareWidgets=function(a){var c=this;this.components.forEach(function(b){(b=(b=c._find(b))&&b.widget)&&void 0!==b.view&&(b.view=a)})};e.prototype._componentsWatcher=function(a,c){this._removeComponents(c);this._addComponents(a);this._adjustPadding(a)};e.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};e.prototype._addComponents=function(a){var c=this;this.initialized&&
a.forEach(function(a){return c.add(c._createComponent(a),c._defaultPositionLookup[a])})};e.prototype._createComponent=function(a){var c=this._createWidget(a);if(c)return new b({id:a,node:c})};e.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};e.prototype._createAttribution=function(){return new f({view:this.view})};
e.prototype._createCompass=function(){return new r({view:this.view})};e.prototype._createNavigationToggle=function(){return new a({view:this.view})};e.prototype._createZoom=function(){return new c({view:this.view})};g.__decorate([m.property()],e.prototype,"components",void 0);return e=g.__decorate([m.subclass("esri.views.ui.DefaultUI")],e)}(e)})},"esri/views/ui/Component":function(){define("require exports tslib ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),
function(q,d,g,l,m,b){return function(d){function e(){var b=null!==d&&d.apply(this,arguments)||this;b.widget=null;return b}g.__extends(e,d);e.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(e.prototype,"id",{get:function(){return this.get("widget.id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"node",{set:function(b){var a=this._get("node");b!==a&&(b&&b.classList.add("esri-component"),a&&a.classList.remove("esri-component"),
this._set("node",b))},enumerable:!0,configurable:!0});e.prototype.castNode=function(b){if(!b)return this._set("widget",null),null;if("string"===typeof b||b&&"nodeType"in b)return this._set("widget",null),m.byId(b);b&&"function"===typeof b.render&&!b.domNode&&(b.domNode=document.createElement("div"));this._set("widget",b);return b.domNode};g.__decorate([b.property()],e.prototype,"id",null);g.__decorate([b.property()],e.prototype,"node",null);g.__decorate([b.cast("node")],e.prototype,"castNode",null);
g.__decorate([b.property({readOnly:!0})],e.prototype,"widget",void 0);return e=g.__decorate([b.subclass("esri.views.ui.Component")],e)}(l)})},"esri/views/ui/UI":function(){define("require exports tslib ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(q,d,g,l,m,b,e,f,r,a){function c(a){return"object"!==typeof a||a instanceof r||"declaredClass"in a||!("component"in
a||"index"in a||"position"in a)?null:a}function h(a,c){var b=c.bottom,d=c.left,e=c.right;a.style.top=c.top;a.style.bottom=b;a.style.left=d;a.style.right=e}var k={left:0,top:0,bottom:0,right:0},n={bottom:30,top:15,right:15,left:15};return function(d){function p(a){a=d.call(this,a)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._componentToKey=new Map;a._handles=new b;a.view=null;a._initContainers();return a}g.__extends(p,d);p.prototype.initialize=function(){this._handles.add([e.init(this,
"view.padding, container",this._applyViewPadding.bind(this)),e.init(this,"padding",this._applyUIPadding.bind(this))])};p.prototype.destroy=function(){this.container=null;for(var a=0,c=this._components;a<c.length;a++)c[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(p.prototype,"container",{set:function(a){var c=this._get("container");a!==c&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),c&&(c.classList.remove("esri-ui"),
h(c,{top:"",bottom:"",left:"",right:""}),l.empty(c)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var c=this._getViewPadding();return Math.max(a-(c.top+c.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,
configurable:!0});p.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:g.__assign(g.__assign({},n),a)};Object.defineProperty(p.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var c=this._getViewPadding();return Math.max(a-(c.left+c.right),0)},enumerable:!0,configurable:!0});p.prototype.add=function(a,b){var d=this,e,h;if(Array.isArray(a))a.forEach(function(a){return d.add(a,b)});else{var f=c(a);f&&(e=f.index,b=f.position,
a=f.component,h=f.key);b&&"object"===typeof b&&(e=b.index,h=b.key,b=b.position);!a||b&&!this._isValidPosition(b)||(a instanceof r||(a=new r({node:a})),this._place({component:a,position:b,index:e}),this._components.push(a),h&&this._componentToKey.set(a,h))}};p.prototype.remove=function(a,c){var b=this;if(a){if(Array.isArray(a))return a.map(function(a){return b.remove(a,c)});var d=this._find(a);if(d){var e=this._componentToKey;if(!e.has(a)||e.get(a)===c)return e=this._components.indexOf(d),d.node.parentNode&&
d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};p.prototype.empty=function(a){var c=this;if(Array.isArray(a))return a.map(function(a){return c.empty(a)}).reduce(function(a,c){return a.concat(c)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return c.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};p.prototype.move=function(a,b){var d=this;Array.isArray(a)&&a.forEach(function(a){return d.move(a,b)});if(a){var e,h=c(a)||c(b);h&&(e=h.index,b=h.position,a=h.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:e})}};p.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};p.prototype._find=function(a){return a?a instanceof r?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||
a):null};p.prototype._getViewPadding=function(){return this.get("view.padding")||k};p.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};p.prototype._initContainers=function(){var c=document.createElement("div");c.classList.add("esri-ui-inner-container");c.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");var d=document.createElement("div");
d.classList.add("esri-ui-top-left");d.classList.add("esri-ui-corner");c.appendChild(d);var e=document.createElement("div");e.classList.add("esri-ui-top-right");e.classList.add("esri-ui-corner");c.appendChild(e);var h=document.createElement("div");h.classList.add("esri-ui-bottom-left");h.classList.add("esri-ui-corner");c.appendChild(h);var f=document.createElement("div");f.classList.add("esri-ui-bottom-right");f.classList.add("esri-ui-corner");c.appendChild(f);this._innerContainer=c;this._manualContainer=
b;c=a.isRTL();this._cornerNameToContainerLookup={"top-left":d,"top-right":e,"bottom-left":h,"bottom-right":f,"top-leading":c?e:d,"top-trailing":c?d:e,"bottom-leading":c?f:h,"bottom-trailing":c?h:f};this._positionNameToContainerLookup=g.__assign({manual:b},this._cornerNameToContainerLookup)};p.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};p.prototype._place=function(a){var c=a.component,b=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var d=
-1<b,e=c.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&c.widget.startup();d?(d=Array.prototype.slice.call(a.children),0===b?a.firstChild?l.insertBefore(c.node,a.firstChild):a.appendChild(c.node):b>=d.length?a.appendChild(c.node):l.insertBefore(c.node,d[b])):a.appendChild(c.node)};p.prototype._applyViewPadding=function(){var a=this.container;a&&h(a,this._toPxPosition(this._getViewPadding()))};
p.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&h(a,this._toPxPosition(this.padding))};p.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};p.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};p.prototype._findByComponent=function(a){var c=null,b;this._components.some(function(d){(b=d===a)&&(c=d);return b});return c};p.prototype._findById=function(a){var c=null,
b;this._components.some(function(d){(b=d.id===a)&&(c=d);return b});return c};p.prototype._findByNode=function(a){var c=null,b;this._components.some(function(d){(b=d.node===a)&&(c=d);return b});return c};g.__decorate([f.property()],p.prototype,"container",null);g.__decorate([f.property({dependsOn:["view.height"]})],p.prototype,"height",null);g.__decorate([f.property({value:n})],p.prototype,"padding",null);g.__decorate([f.cast("padding")],p.prototype,"castPadding",null);g.__decorate([f.property()],
p.prototype,"view",void 0);g.__decorate([f.property({dependsOn:["view.width"]})],p.prototype,"width",null);return p=g.__decorate([f.subclass("esri.views.ui.UI")],p)}(m.EventedAccessor)})},"esri/widgets/Attribution":function(){define("require exports tslib ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(q,d,g,l,m,b,e,f){return function(b){function a(a,d){a=b.call(this,a,d)||this;a._isOpen=!1;a._attributionTextOverflowed=
!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=void 0;a.messages=null;a.view=null;a.viewModel=new e;return a}g.__extends(a,b);a.prototype.initialize=function(){var a=this;this.own(l.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(a.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});a.prototype.render=function(){var a,b=(a={},a["esri-attribution--open"]=this._isOpen,a);return f.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",b),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};a.prototype.renderPoweredBy=function(){return f.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",f.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",
target:"_blank",rel:"noreferrer"},"Esri"))};a.prototype.renderSourcesNode=function(){var a,b=this._isOpen,d=this._isInteractive(),e=d?0:-1,g=this.attributionText,l=d?"button":void 0,b=(a={},a["esri-attribution__sources--open"]=b,a["esri-interactive"]=d,a);return f.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",b),innerHTML:g,role:l,tabIndex:e})};a.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=
a.clientWidth};a.prototype._afterSourcesNodeUpdate=function(a){var c=!1,b=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(c=!0);this._isOpen&&(a=b<this._prevSourceNodeHeight,this._prevSourceNodeHeight=b,a&&(this._isOpen=!1,c=!0));c&&this.scheduleRender()};a.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};a.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};
g.__decorate([m.property({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0}),f.renderable()],a.prototype,"attributionText",null);g.__decorate([m.property()],a.prototype,"iconClass",void 0);g.__decorate([m.property(),f.renderable()],a.prototype,"itemDelimiter",void 0);g.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],a.prototype,"label",void 0);g.__decorate([m.property(),f.renderable(),f.messageBundle("esri/widgets/Attribution/t9n/Attribution")],a.prototype,
"messages",void 0);g.__decorate([m.aliasOf("viewModel.view")],a.prototype,"view",void 0);g.__decorate([m.property({type:e}),f.renderable(["state","view.size"])],a.prototype,"viewModel",void 0);g.__decorate([f.accessibleHandler()],a.prototype,"_toggleState",null);return a=g.__decorate([m.subclass("esri.widgets.Attribution")],a)}(b)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports tslib ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(q,d,g,l,m,b,e,f,r,a,c,h){function k(a,c){return a.length!==c.length||a.some(function(a,b){return a.text!==c[b].text})}function n(a,c,b){b&&c&&(m.find(a,function(a){return a.layerView===c&&a.text===b})||a.push({text:b,layerView:c}))}var p=[];return function(d){function f(a){var c=d.call(this,a)||this;c.clear=function(){c._fetchedAttributionData.clear();c._pendingAttributions.clear();c.handles.remove("suspension");c.notifyChange("state")};c._pendingAttributions=new Set;c._fetchedAttributionData=
new Map;c.items=new e;c.view=null;c._allLayerViewsChange=function(a){c.handles.remove("suspension");var b=c.get("view.allLayerViews");b&&c.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],c._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){c._pendingAttributions.delete(a);c._fetchedAttributionData.delete(a)});c._updateAttributionItems()};c._updateAttributionItems=function(){var a=c.get("view.allLayerViews");p.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"copyright"in b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))n(p,a,b.copyright);else if(b.hasAttributionData)if(c._fetchedAttributionData.has(a)){var d=c._fetchedAttributionData.get(a);d&&n(p,a,c._getDynamicAttribution(d,c.view,b))}else c._fetchAttributionData(a);else(d=b.get("portalItem.accessInformation"))?n(p,a,d):n(p,a,b.copyright)}}),k(c.items,p)&&(c.items.removeAll(),c.items.addMany(p)),c.notifyChange("state")):c.clear()};
c.handles.add([r.on(c,"view.allLayerViews","change",c._allLayerViewsChange,c._allLayerViewsChange,c.clear),r.whenTrue(c,"view.stationary",function(){return c._updateAttributionItems()})]);return c}g.__extends(f,d);f.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});
f.prototype._fetchAttributionData=function(a){return g.__awaiter(this,void 0,void 0,function(){var c,d;return g.__generator(this,function(e){switch(e.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,b.result(a.layer.fetchAttributionData())];case 1:return c=e.sent(),this._pendingAttributions.has(a)&&(d=c.ok?this._createContributionIndex(c.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,
d)),this._updateAttributionItems(),[2]}})})};f.prototype._createContributionIndex=function(a,c){a=a.contributors;var b={};if(!a)return b;for(var d=0;d<a.length;d++){var e=a[d],f=e.coverageAreas;if(!f)return;for(var g=0;g<f.length;g++)for(var k=f[g],n=k.bbox,p=k.zoomMin-(c&&k.zoomMin?1:0),m=k.zoomMax-(c&&k.zoomMax?1:0),k={extent:h.geographicToWebMercator({xmin:n[1],ymin:n[0],xmax:n[3],ymax:n[2],spatialReference:l.SpatialReference.WGS84}),attribution:e.attribution||"",score:null!=k.score?k.score:100,
id:d};p<=m;p++)b[p]=b[p]||[],b[p].push(k)}b.maxKey=Math.max.apply(null,Object.keys(b));return b};f.prototype._getDynamicAttribution=function(a,b,d){var e=b.extent;d=d.tileInfo.scaleToZoom(b.scale);d=Math.min(a.maxKey,Math.round(d));if(!e||null==d||-1>=d)return"";a=a[d];var f=h.project(e.center.clone().normalize(),b.spatialReference),g={};return a?a.filter(function(a){var b=!g[a.id]&&f&&c.extentContainsPoint(a.extent,f);b&&(g[a.id]=!0);return b}).sort(function(a,c){return c.score-a.score||a.objectId-
c.objectId}).map(function(a){return a.attribution}).join(", "):""};g.__decorate([a.property({readOnly:!0,type:e})],f.prototype,"items",void 0);g.__decorate([a.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"state",null);g.__decorate([a.property()],f.prototype,"view",void 0);return f=g.__decorate([a.subclass("esri.widgets.Attribution.AttributionViewModel")],f)}(f.HandleOwner)})},"esri/widgets/Compass":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(q,d,g,l,m,b,e){return function(d){function f(a,c){a=d.call(this,a,c)||this;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=void 0;a.messages=null;a.view=null;a.viewModel=new b;return a}g.__extends(f,d);f.prototype.reset=function(){};f.prototype.render=function(){var a,c,b=this.viewModel,d=b.orientation,b=b.state,f="disabled"===b,g="compass"===("rotation"===b?"rotation":"compass"),b=f?-1:0,f=(a={},a["esri-disabled"]=f,a["esri-interactive"]=!f,a);a=(c={},c["esri-icon-compass"]=
g,c["esri-icon-dial"]=!g,c);c=this.messages;return e.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:b,"aria-label":c.reset,title:c.reset},e.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},c.reset))};f.prototype._reset=function(){this.viewModel.reset()};f.prototype._toRotationTransform=
function(a){return{transform:"rotateZ("+a.z+"deg)"}};g.__decorate([l.aliasOf("viewModel.goToOverride")],f.prototype,"goToOverride",void 0);g.__decorate([l.property()],f.prototype,"iconClass",void 0);g.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f.prototype,"label",void 0);g.__decorate([l.property(),e.renderable(),e.messageBundle("esri/widgets/Compass/t9n/Compass")],f.prototype,"messages",void 0);g.__decorate([l.aliasOf("viewModel.view")],f.prototype,"view",void 0);
g.__decorate([l.property({type:b}),e.renderable(["viewModel.orientation","viewModel.state"])],f.prototype,"viewModel",void 0);g.__decorate([l.aliasOf("viewModel.reset")],f.prototype,"reset",null);g.__decorate([e.accessibleHandler()],f.prototype,"_reset",null);return f=g.__decorate([l.subclass("esri.widgets.Compass")],f)}(m)})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(q,d,g,l,m,b,e,f){return function(d){function a(a){a=d.call(this,a)||this;a._handles=new m;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);a.view;return a}g.__extends(a,d);a.prototype.initialize=function(){this._handles.add(b.init(this,"view",this._updateRotationWatcher))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=
null};Object.defineProperty(a.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});a.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};
a.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};a.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};a.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(b.init(this,"view.rotation",this._updateForRotation)):this._handles.add(b.init(this,"view.camera",this._updateForCamera)))};g.__decorate([e.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],
readOnly:!0})],a.prototype,"canShowNorth",null);g.__decorate([e.property()],a.prototype,"orientation",void 0);g.__decorate([e.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],a.prototype,"state",null);g.__decorate([e.property()],a.prototype,"view",void 0);g.__decorate([e.property()],a.prototype,"reset",null);return a=g.__decorate([e.subclass("esri.widgets.CompassViewModel")],a)}(f.GoToMixin(l))})},"esri/widgets/NavigationToggle":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(q,d,g,l,m,b,e){return function(d){function f(a,c){a=d.call(this,a,c)||this;a.iconClass="esri-icon-pan2";a.label=void 0;a.messages=null;a.view=null;a.viewModel=new b;return a}g.__extends(f,d);Object.defineProperty(f.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});f.prototype.toggle=function(){};f.prototype.render=function(){var a,c,b,d="disabled"===this.get("viewModel.state"),f="pan"===this.get("viewModel.navigationMode"),
g=(a={},a["esri-disabled"]=d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,a);a=(c={},c["esri-navigation-toggle__button--active"]=f,c);c=(b={},b["esri-navigation-toggle__button--active"]=!f,b);b=d?-1:0;d=this.messages.toggle;return e.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:b,"aria-label":d,title:d},e.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
a)},e.tsx("span",{class:"esri-icon-pan"})),e.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",c)},e.tsx("span",{class:"esri-icon-rotate"})))};f.prototype._toggle=function(){this.toggle()};g.__decorate([l.property()],f.prototype,"iconClass",void 0);g.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f.prototype,"label",void 0);g.__decorate([l.property({value:"vertical"}),e.renderable()],f.prototype,
"layout",null);g.__decorate([l.property(),e.renderable(),e.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],f.prototype,"messages",void 0);g.__decorate([l.aliasOf("viewModel.view"),e.renderable()],f.prototype,"view",void 0);g.__decorate([l.property({type:b}),e.renderable(["viewModel.state","viewModel.navigationMode"])],f.prototype,"viewModel",void 0);g.__decorate([l.aliasOf("viewModel.toggle")],f.prototype,"toggle",null);g.__decorate([e.accessibleHandler()],f.prototype,"_toggle",
null);return f=g.__decorate([l.subclass("esri.widgets.NavigationToggle")],f)}(m)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(q,d,g,l,m,b,e){return function(d){function f(a){a=d.call(this,a)||this;a._handles=new m;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}g.__extends(f,d);f.prototype.initialize=
function(){this._handles.add(b.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};f.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});f.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};f.prototype._setNavigationMode=
function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};g.__decorate([e.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"state",null);g.__decorate([e.property()],f.prototype,"navigationMode",void 0);g.__decorate([e.property()],f.prototype,"view",void 0);g.__decorate([e.property()],f.prototype,"toggle",null);return f=g.__decorate([e.subclass("esri.widgets.NavigationToggleViewModel")],f)}(l)})},"esri/widgets/Zoom":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./support/widget ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(q,d,g,l,m,b,e,f){return function(d){function a(a,b){a=d.call(this,a,b)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";a.label=void 0;a.messages=null;a.view=null;a.viewModel=new f;return a}g.__extends(a,d);a.prototype.initialize=function(){this._zoomInButton=new e({action:this.zoomIn,iconClass:"esri-icon-plus"});this._zoomOutButton=new e({action:this.zoomOut,iconClass:"esri-icon-minus"})};a.prototype.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=
this._zoomInButton=null};Object.defineProperty(a.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});a.prototype.render=function(){var a,d=this.viewModel,e=(a={},a["esri-zoom--horizontal"]="horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===d.state&&d.canZoomIn;this._zoomOutButton.enabled="ready"===d.state&&d.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;
return b.tsx("div",{class:this.classes("esri-zoom esri-widget",e)},this._zoomInButton.render(),this._zoomOutButton.render())};a.prototype.zoomIn=function(){};a.prototype.zoomOut=function(){};g.__decorate([l.property()],a.prototype,"iconClass",void 0);g.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],a.prototype,"label",void 0);g.__decorate([l.property({value:"vertical"}),b.renderable()],a.prototype,"layout",null);g.__decorate([l.property(),b.renderable(),b.messageBundle("esri/widgets/Zoom/t9n/Zoom")],
a.prototype,"messages",void 0);g.__decorate([l.aliasOf("viewModel.view"),b.renderable()],a.prototype,"view",void 0);g.__decorate([l.property({type:f}),b.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],a.prototype,"viewModel",void 0);g.__decorate([l.aliasOf("viewModel.zoomIn")],a.prototype,"zoomIn",null);g.__decorate([l.aliasOf("viewModel.zoomOut")],a.prototype,"zoomOut",null);return a=g.__decorate([l.subclass("esri.widgets.Zoom")],a)}(m)})},"esri/widgets/Zoom/IconButton":function(){define("require exports tslib ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(q,d,g,l,m,b){return function(d){function e(){var b=null!==d&&d.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}g.__extends(e,d);e.prototype.render=function(){var d,a,c=this.enabled?0:-1,e=(d={},d["esri-disabled"]=!this.enabled,d["esri-interactive"]=this.enabled,d);d=(a={},a[this.iconClass]=!!this.iconClass,a);return b.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",
tabIndex:c,title:this.title},b.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",d)}),b.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};e.prototype._triggerAction=function(){this.action.call(this)};g.__decorate([l.property()],e.prototype,"action",void 0);g.__decorate([l.property(),b.renderable()],e.prototype,"enabled",void 0);g.__decorate([l.property(),b.renderable()],e.prototype,"iconClass",void 0);g.__decorate([l.property(),b.renderable()],e.prototype,
"title",void 0);g.__decorate([b.accessibleHandler()],e.prototype,"_triggerAction",null);return e=g.__decorate([l.subclass("esri.widgets.IconButton")],e)}(m)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(q,d,g,l,m,b,e,f){return function(d){function a(a){a=d.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);
a.zoomOut=a.zoomOut.bind(a);return a}g.__extends(a,d);a.prototype.destroy=function(){this.view=null};Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new e({view:a}):"3d"===a.type&&(this._zoomConditions=new f({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});a.prototype.zoomIn=
function(){if(this.canZoomIn){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():m.ignoreAbortErrors(a.goTo({zoomFactor:2}))}};a.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():m.ignoreAbortErrors(a.goTo({zoomFactor:.5}))}};g.__decorate([b.property()],a.prototype,"_zoomConditions",void 0);g.__decorate([b.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],a.prototype,"canZoomIn",void 0);g.__decorate([b.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],a.prototype,"canZoomOut",void 0);g.__decorate([b.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null);g.__decorate([b.property()],a.prototype,"view",null);g.__decorate([b.property()],a.prototype,"zoomIn",null);g.__decorate([b.property()],a.prototype,"zoomOut",null);return a=g.__decorate([b.subclass("esri.widgets.Zoom.ZoomViewModel")],a)}(l)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define(["require","exports","tslib","../../core/Accessor","../../core/accessorSupport/decorators"],
function(q,d,g,l,m){return function(b){function d(){return null!==b&&b.apply(this,arguments)||this}g.__extends(d,b);Object.defineProperty(d.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var b=this.get("view.animation.target.scale")||this.get("view.scale"),d=this.get("view.constraints.effectiveMaxScale");return 0===d||b>d},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var b=this.get("view.animation.target.scale")||
this.get("view.scale"),d=this.get("view.constraints.effectiveMinScale");return 0===d||b<d},enumerable:!0,configurable:!0});g.__decorate([m.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],d.prototype,"canZoomIn",null);g.__decorate([m.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],d.prototype,"canZoomOut",null);g.__decorate([m.property()],
d.prototype,"view",void 0);return d=g.__decorate([m.subclass("esri.widgets.Zoom.ZoomConditions2D")],d)}(l)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define(["require","exports","tslib","../../core/Accessor","../../core/accessorSupport/decorators"],function(q,d,g,l,m){return function(b){function d(){return null!==b&&b.apply(this,arguments)||this}g.__extends(d,b);Object.defineProperty(d.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"canZoomOut",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});g.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],d.prototype,"canZoomIn",null);g.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],d.prototype,"canZoomOut",null);g.__decorate([m.property()],d.prototype,"view",void 0);return d=g.__decorate([m.subclass("esri.widgets.Zoom.ZoomConditions3D")],d)}(l)})},"esri/webmap/background/ColorBackground":function(){define("require exports tslib ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(q,d,g,l,m,b,e){return function(d){function f(a){a=d.call(this,a)||this;a.color=new l([0,0,0,1]);return a}g.__extends(f,d);a=f;f.prototype.clone=function(){return new a(b.clone({color:this.color}))};var a;g.__decorate([e.property({type:l,json:{write:!0}})],f.prototype,"color",void 0);return f=a=g.__decorate([e.subclass("esri.webmap.background.ColorBackground")],f)}(m.JSONSupport)})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(q,d,g){Object.defineProperty(d,
"__esModule",{value:!0});d.mat4=g})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(q,d,g,l){function m(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function b(a,c,b){var d=c[0],e=c[1],h=c[2],f=c[3],g=c[4],l=c[5],m=c[6],q=c[7],r=c[8],v=c[9],u=c[10],z=c[11],y=c[12],A=c[13],H=c[14];c=c[15];var C=b[0],B=b[1],E=b[2],F=b[3];a[0]=C*d+B*g+E*r+F*y;
a[1]=C*e+B*l+E*v+F*A;a[2]=C*h+B*m+E*u+F*H;a[3]=C*f+B*q+E*z+F*c;C=b[4];B=b[5];E=b[6];F=b[7];a[4]=C*d+B*g+E*r+F*y;a[5]=C*e+B*l+E*v+F*A;a[6]=C*h+B*m+E*u+F*H;a[7]=C*f+B*q+E*z+F*c;C=b[8];B=b[9];E=b[10];F=b[11];a[8]=C*d+B*g+E*r+F*y;a[9]=C*e+B*l+E*v+F*A;a[10]=C*h+B*m+E*u+F*H;a[11]=C*f+B*q+E*z+F*c;C=b[12];B=b[13];E=b[14];F=b[15];a[12]=C*d+B*g+E*r+F*y;a[13]=C*e+B*l+E*v+F*A;a[14]=C*h+B*m+E*u+F*H;a[15]=C*f+B*q+E*z+F*c;return a}function e(a,c,b){var d=c[0],e=c[1],h=c[2],f=c[3],g=d+d,l=e+e,m=h+h;c=d*g;var q=d*
l,d=d*m,r=e*l,e=e*m,h=h*m,g=f*g,l=f*l,f=f*m;a[0]=1-(r+h);a[1]=q+f;a[2]=d-l;a[3]=0;a[4]=q-f;a[5]=1-(c+h);a[6]=e+g;a[7]=0;a[8]=d+l;a[9]=e-g;a[10]=1-(c+r);a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function f(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];a[3]=c[3]-b[3];a[4]=c[4]-b[4];a[5]=c[5]-b[5];a[6]=c[6]-b[6];a[7]=c[7]-b[7];a[8]=c[8]-b[8];a[9]=c[9]-b[9];a[10]=c[10]-b[10];a[11]=c[11]-b[11];a[12]=c[12]-b[12];a[13]=c[13]-b[13];a[14]=c[14]-b[14];a[15]=c[15]-b[15];return a}Object.defineProperty(d,
"__esModule",{value:!0});d.copy=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};d.set=function(a,c,b,d,e,f,g,l,m,q,r,w,v,u,z,y,A){a[0]=c;a[1]=b;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=l;a[7]=m;a[8]=q;a[9]=r;a[10]=w;a[11]=v;a[12]=u;a[13]=z;a[14]=y;a[15]=A;return a};d.identity=m;d.transpose=function(a,c){if(a===c){var b=c[1],d=c[2],e=c[3],f=c[6],g=c[7],l=c[11];
a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=b;a[6]=c[9];a[7]=c[13];a[8]=d;a[9]=f;a[11]=c[14];a[12]=e;a[13]=g;a[14]=l}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a};d.invert=function(a,c){var b=c[0],d=c[1],e=c[2],f=c[3],g=c[4],l=c[5],m=c[6],q=c[7],r=c[8],w=c[9],v=c[10],u=c[11],z=c[12],y=c[13],A=c[14];c=c[15];var H=b*l-d*g,C=b*m-e*g,B=b*q-f*g,E=d*m-e*l,F=d*q-f*l,P=e*q-
f*m,L=r*y-w*z,Q=r*A-v*z,M=r*c-u*z,J=w*A-v*y,O=w*c-u*y,N=v*c-u*A,K=H*N-C*O+B*J+E*M-F*Q+P*L;if(!K)return null;K=1/K;a[0]=(l*N-m*O+q*J)*K;a[1]=(e*O-d*N-f*J)*K;a[2]=(y*P-A*F+c*E)*K;a[3]=(v*F-w*P-u*E)*K;a[4]=(m*M-g*N-q*Q)*K;a[5]=(b*N-e*M+f*Q)*K;a[6]=(A*B-z*P-c*C)*K;a[7]=(r*P-v*B+u*C)*K;a[8]=(g*O-l*M+q*L)*K;a[9]=(d*M-b*O-f*L)*K;a[10]=(z*F-y*B+c*H)*K;a[11]=(w*B-r*F-u*H)*K;a[12]=(l*Q-g*J-m*L)*K;a[13]=(b*J-d*Q+e*L)*K;a[14]=(y*C-z*E-A*H)*K;a[15]=(r*E-w*C+v*H)*K;return a};d.adjoint=function(a,c){var b=c[0],
d=c[1],e=c[2],f=c[3],g=c[4],l=c[5],m=c[6],q=c[7],r=c[8],w=c[9],v=c[10],u=c[11],z=c[12],y=c[13],A=c[14];c=c[15];a[0]=l*(v*c-u*A)-w*(m*c-q*A)+y*(m*u-q*v);a[1]=-(d*(v*c-u*A)-w*(e*c-f*A)+y*(e*u-f*v));a[2]=d*(m*c-q*A)-l*(e*c-f*A)+y*(e*q-f*m);a[3]=-(d*(m*u-q*v)-l*(e*u-f*v)+w*(e*q-f*m));a[4]=-(g*(v*c-u*A)-r*(m*c-q*A)+z*(m*u-q*v));a[5]=b*(v*c-u*A)-r*(e*c-f*A)+z*(e*u-f*v);a[6]=-(b*(m*c-q*A)-g*(e*c-f*A)+z*(e*q-f*m));a[7]=b*(m*u-q*v)-g*(e*u-f*v)+r*(e*q-f*m);a[8]=g*(w*c-u*y)-r*(l*c-q*y)+z*(l*u-q*w);a[9]=-(b*
(w*c-u*y)-r*(d*c-f*y)+z*(d*u-f*w));a[10]=b*(l*c-q*y)-g*(d*c-f*y)+z*(d*q-f*l);a[11]=-(b*(l*u-q*w)-g*(d*u-f*w)+r*(d*q-f*l));a[12]=-(g*(w*A-v*y)-r*(l*A-m*y)+z*(l*v-m*w));a[13]=b*(w*A-v*y)-r*(d*A-e*y)+z*(d*v-e*w);a[14]=-(b*(l*A-m*y)-g*(d*A-e*y)+z*(d*m-e*l));a[15]=b*(l*v-m*w)-g*(d*v-e*w)+r*(d*m-e*l);return a};d.determinant=function(a){var c=a[0],b=a[1],d=a[2],e=a[3],f=a[4],g=a[5],l=a[6],m=a[7],q=a[8],r=a[9],w=a[10],v=a[11],u=a[12],z=a[13],y=a[14];a=a[15];return(c*g-b*f)*(w*a-v*y)-(c*l-d*f)*(r*a-v*z)+(c*
m-e*f)*(r*y-w*z)+(b*l-d*g)*(q*a-v*u)-(b*m-e*g)*(q*y-w*u)+(d*m-e*l)*(q*z-r*u)};d.multiply=b;d.translate=function(a,c,b){var d=b[0],e=b[1];b=b[2];var h=void 0,f=void 0,g=void 0,l=void 0,m=void 0,q=void 0,r=void 0,v=void 0,u=void 0,z=void 0,y=void 0,A=void 0;c===a?(a[12]=c[0]*d+c[4]*e+c[8]*b+c[12],a[13]=c[1]*d+c[5]*e+c[9]*b+c[13],a[14]=c[2]*d+c[6]*e+c[10]*b+c[14],a[15]=c[3]*d+c[7]*e+c[11]*b+c[15]):(h=c[0],f=c[1],g=c[2],l=c[3],m=c[4],q=c[5],r=c[6],v=c[7],u=c[8],z=c[9],y=c[10],A=c[11],a[0]=h,a[1]=f,a[2]=
g,a[3]=l,a[4]=m,a[5]=q,a[6]=r,a[7]=v,a[8]=u,a[9]=z,a[10]=y,a[11]=A,a[12]=h*d+m*e+u*b+c[12],a[13]=f*d+q*e+z*b+c[13],a[14]=g*d+r*e+y*b+c[14],a[15]=l*d+v*e+A*b+c[15]);return a};d.scale=function(a,c,b){var d=b[0],e=b[1];b=b[2];a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;a[4]=c[4]*e;a[5]=c[5]*e;a[6]=c[6]*e;a[7]=c[7]*e;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};d.rotate=function(a,c,b,d){var e=d[0],h=d[1];d=d[2];var f=Math.sqrt(e*e+
h*h+d*d),g=void 0,k=void 0,m=void 0,q=void 0,r=void 0,v=void 0,u=void 0,z=void 0,y=void 0,A=void 0,H=void 0,C=void 0,B=void 0,E=void 0,F=void 0,P=void 0,L=void 0,Q=void 0,M=void 0,J=void 0,O=void 0,N=void 0,k=g=void 0;if(f<l.EPSILON)return null;f=1/f;e*=f;h*=f;d*=f;g=Math.sin(b);k=Math.cos(b);m=1-k;q=c[0];r=c[1];v=c[2];u=c[3];z=c[4];y=c[5];A=c[6];H=c[7];C=c[8];B=c[9];E=c[10];F=c[11];P=e*e*m+k;L=h*e*m+d*g;Q=d*e*m-h*g;M=e*h*m-d*g;J=h*h*m+k;O=d*h*m+e*g;N=e*d*m+h*g;g=h*d*m-e*g;k=d*d*m+k;a[0]=q*P+z*L+
C*Q;a[1]=r*P+y*L+B*Q;a[2]=v*P+A*L+E*Q;a[3]=u*P+H*L+F*Q;a[4]=q*M+z*J+C*O;a[5]=r*M+y*J+B*O;a[6]=v*M+A*J+E*O;a[7]=u*M+H*J+F*O;a[8]=q*N+z*g+C*k;a[9]=r*N+y*g+B*k;a[10]=v*N+A*g+E*k;a[11]=u*N+H*g+F*k;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};d.rotateX=function(a,c,b){var d=Math.sin(b);b=Math.cos(b);var e=c[4],h=c[5],f=c[6],g=c[7],l=c[8],m=c[9],q=c[10],r=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=e*b+l*d;a[5]=h*b+m*
d;a[6]=f*b+q*d;a[7]=g*b+r*d;a[8]=l*b-e*d;a[9]=m*b-h*d;a[10]=q*b-f*d;a[11]=r*b-g*d;return a};d.rotateY=function(a,c,b){var d=Math.sin(b);b=Math.cos(b);var e=c[0],h=c[1],f=c[2],g=c[3],l=c[8],m=c[9],q=c[10],r=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=e*b-l*d;a[1]=h*b-m*d;a[2]=f*b-q*d;a[3]=g*b-r*d;a[8]=e*d+l*b;a[9]=h*d+m*b;a[10]=f*d+q*b;a[11]=g*d+r*b;return a};d.rotateZ=function(a,c,b){var d=Math.sin(b);b=Math.cos(b);var e=c[0],h=c[1],
f=c[2],g=c[3],l=c[4],m=c[5],q=c[6],r=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=e*b+l*d;a[1]=h*b+m*d;a[2]=f*b+q*d;a[3]=g*b+r*d;a[4]=l*b-e*d;a[5]=m*b-h*d;a[6]=q*b-f*d;a[7]=r*b-g*d;return a};d.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};d.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];
a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotation=function(a,c,b){var d=b[0],e=b[1];b=b[2];var h=Math.sqrt(d*d+e*e+b*b),f=void 0,g=void 0,m=void 0;if(h<l.EPSILON)return null;h=1/h;d*=h;e*=h;b*=h;f=Math.sin(c);g=Math.cos(c);m=1-g;a[0]=d*d*m+g;a[1]=e*d*m+b*f;a[2]=b*d*m-e*f;a[3]=0;a[4]=d*e*m-b*f;a[5]=e*e*m+g;a[6]=b*e*m+d*f;a[7]=0;a[8]=d*b*m+e*f;a[9]=e*b*m-d*f;a[10]=b*b*m+g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromXRotation=function(a,
c){var b=Math.sin(c);c=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=b;a[7]=0;a[8]=0;a[9]=-b;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromYRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=0;a[2]=-b;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=b;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromZRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=b;a[2]=0;a[3]=0;a[4]=-b;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=
0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotationTranslation=e;d.fromQuat2=function(a,c){var b=r,d=-c[0],f=-c[1],g=-c[2],l=c[3],m=c[4],q=c[5],D=c[6],G=c[7],w=d*d+f*f+g*g+l*l;0<w?(b[0]=2*(m*l+G*d+q*g-D*f)/w,b[1]=2*(q*l+G*f+D*d-m*g)/w,b[2]=2*(D*l+G*g+m*f-q*d)/w):(b[0]=2*(m*l+G*d+q*g-D*f),b[1]=2*(q*l+G*f+D*d-m*g),b[2]=2*(D*l+G*g+m*f-q*d));e(a,c,b);return a};var r=g.create();d.getTranslation=function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};d.getScaling=function(a,c){var b=c[0],d=c[1],
e=c[2],f=c[4],g=c[5],l=c[6],m=c[8],q=c[9];c=c[10];a[0]=Math.sqrt(b*b+d*d+e*e);a[1]=Math.sqrt(f*f+g*g+l*l);a[2]=Math.sqrt(m*m+q*q+c*c);return a};d.getRotation=function(a,c){var b=c[0]+c[5]+c[10],d=0;0<b?(d=2*Math.sqrt(b+1),a[3]=.25*d,a[0]=(c[6]-c[9])/d,a[1]=(c[8]-c[2])/d,a[2]=(c[1]-c[4])/d):c[0]>c[5]&&c[0]>c[10]?(d=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/d,a[0]=.25*d,a[1]=(c[1]+c[4])/d,a[2]=(c[8]+c[2])/d):c[5]>c[10]?(d=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/d,a[0]=(c[1]+c[4])/d,a[1]=
.25*d,a[2]=(c[6]+c[9])/d):(d=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/d,a[0]=(c[8]+c[2])/d,a[1]=(c[6]+c[9])/d,a[2]=.25*d);return a};d.fromRotationTranslationScale=function(a,c,b,d){var e=c[0],f=c[1],h=c[2],g=c[3],k=e+e,l=f+f,m=h+h;c=e*k;var q=e*l,e=e*m,r=f*l,f=f*m,h=h*m,k=g*k,l=g*l,g=g*m,m=d[0],u=d[1];d=d[2];a[0]=(1-(r+h))*m;a[1]=(q+g)*m;a[2]=(e-l)*m;a[3]=0;a[4]=(q-g)*u;a[5]=(1-(c+h))*u;a[6]=(f+k)*u;a[7]=0;a[8]=(e+l)*d;a[9]=(f-k)*d;a[10]=(1-(c+r))*d;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];
a[15]=1;return a};d.fromRotationTranslationScaleOrigin=function(a,c,b,d,e){var f=c[0],h=c[1],g=c[2],k=c[3],l=f+f,m=h+h,n=g+g;c=f*l;var q=f*m,r=f*n,f=h*m,h=h*n,z=g*n,g=k*l,m=k*m,y=k*n,A=d[0],H=d[1],n=d[2];d=e[0];k=e[1];e=e[2];var l=(1-(f+z))*A,C=(q+y)*A,A=(r-m)*A,q=(q-y)*H,z=(1-(c+z))*H,H=(h+g)*H,r=(r+m)*n,h=(h-g)*n;c=(1-(c+f))*n;a[0]=l;a[1]=C;a[2]=A;a[3]=0;a[4]=q;a[5]=z;a[6]=H;a[7]=0;a[8]=r;a[9]=h;a[10]=c;a[11]=0;a[12]=b[0]+d-(l*d+q*k+r*e);a[13]=b[1]+k-(C*d+z*k+h*e);a[14]=b[2]+e-(A*d+H*k+c*e);a[15]=
1;return a};d.fromQuat=function(a,c){var b=c[0],d=c[1],e=c[2];c=c[3];var f=b+b,g=d+d,l=e+e,b=b*f,m=d*f,d=d*g,q=e*f,r=e*g,e=e*l,f=c*f,g=c*g;c*=l;a[0]=1-d-e;a[1]=m+c;a[2]=q-g;a[3]=0;a[4]=m-c;a[5]=1-b-e;a[6]=r+f;a[7]=0;a[8]=q+g;a[9]=r-f;a[10]=1-b-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.frustum=function(a,c,b,d,e,f,g){var h=1/(b-c),k=1/(e-d),l=1/(f-g);a[0]=2*f*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*k;a[6]=0;a[7]=0;a[8]=(b+c)*h;a[9]=(e+d)*k;a[10]=(g+f)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=g*
f*2*l;a[15]=0;return a};d.perspective=function(a,c,b,d,e){c=1/Math.tan(c/2);var f=void 0;a[0]=c/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=e&&Infinity!==e?(f=1/(d-e),a[10]=(e+d)*f,a[14]=2*e*d*f):(a[10]=-1,a[14]=-2*d);return a};d.perspectiveFromFieldOfView=function(a,c,b,d){var e=Math.tan(c.upDegrees*Math.PI/180),f=Math.tan(c.downDegrees*Math.PI/180),h=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var g=2/(h+
c),k=2/(e+f);a[0]=g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=-((h-c)*g*.5);a[9]=(e-f)*k*.5;a[10]=d/(b-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*b/(b-d);a[15]=0;return a};d.ortho=function(a,c,b,d,e,f,g){var h=1/(c-b),k=1/(d-e),l=1/(f-g);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(c+b)*h;a[13]=(e+d)*k;a[14]=(g+f)*l;a[15]=1;return a};d.lookAt=function(a,c,b,d){var e=void 0,f=void 0,h=void 0,g=void 0,k=void 0,q=void 0,r=void 0,w=void 0,v=
void 0,u=void 0,z=c[0],y=c[1];c=c[2];h=d[0];g=d[1];d=d[2];r=b[0];w=b[1];b=b[2];if(Math.abs(z-r)<l.EPSILON&&Math.abs(y-w)<l.EPSILON&&Math.abs(c-b)<l.EPSILON)return m(a);r=z-r;w=y-w;v=c-b;u=1/Math.sqrt(r*r+w*w+v*v);r*=u;w*=u;v*=u;e=g*v-d*w;f=d*r-h*v;h=h*w-g*r;(u=Math.sqrt(e*e+f*f+h*h))?(u=1/u,e*=u,f*=u,h*=u):h=f=e=0;g=w*h-v*f;k=v*e-r*h;q=r*f-w*e;(u=Math.sqrt(g*g+k*k+q*q))?(u=1/u,g*=u,k*=u,q*=u):q=k=g=0;a[0]=e;a[1]=g;a[2]=r;a[3]=0;a[4]=f;a[5]=k;a[6]=w;a[7]=0;a[8]=h;a[9]=q;a[10]=v;a[11]=0;a[12]=-(e*z+
f*y+h*c);a[13]=-(g*z+k*y+q*c);a[14]=-(r*z+w*y+v*c);a[15]=1;return a};d.targetTo=function(a,c,b,d){var e=c[0],f=c[1];c=c[2];var h=d[0],g=d[1],k=d[2];d=e-b[0];var l=f-b[1];b=c-b[2];var m=d*d+l*l+b*b;0<m&&(m=1/Math.sqrt(m),d*=m,l*=m,b*=m);var q=g*b-k*l,k=k*d-h*b,h=h*l-g*d,m=q*q+k*k+h*h;0<m&&(m=1/Math.sqrt(m),q*=m,k*=m,h*=m);a[0]=q;a[1]=k;a[2]=h;a[3]=0;a[4]=l*h-b*k;a[5]=b*q-d*h;a[6]=d*k-l*q;a[7]=0;a[8]=d;a[9]=l;a[10]=b;a[11]=0;a[12]=e;a[13]=f;a[14]=c;a[15]=1;return a};d.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,c,
b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];a[3]=c[3]+b[3];a[4]=c[4]+b[4];a[5]=c[5]+b[5];a[6]=c[6]+b[6];a[7]=c[7]+b[7];a[8]=c[8]+b[8];a[9]=c[9]+b[9];a[10]=c[10]+b[10];a[11]=c[11]+b[11];a[12]=c[12]+b[12];a[13]=c[13]+b[13];a[14]=c[14]+b[14];a[15]=c[15]+b[15];return a};d.subtract=f;d.multiplyScalar=function(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*b;a[5]=c[5]*b;a[6]=c[6]*b;a[7]=c[7]*b;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12]*b;a[13]=c[13]*b;a[14]=c[14]*
b;a[15]=c[15]*b;return a};d.multiplyScalarAndAdd=function(a,b,d,e){a[0]=b[0]+d[0]*e;a[1]=b[1]+d[1]*e;a[2]=b[2]+d[2]*e;a[3]=b[3]+d[3]*e;a[4]=b[4]+d[4]*e;a[5]=b[5]+d[5]*e;a[6]=b[6]+d[6]*e;a[7]=b[7]+d[7]*e;a[8]=b[8]+d[8]*e;a[9]=b[9]+d[9]*e;a[10]=b[10]+d[10]*e;a[11]=b[11]+d[11]*e;a[12]=b[12]+d[12]*e;a[13]=b[13]+d[13]*e;a[14]=b[14]+d[14]*e;a[15]=b[15]+d[15]*e;return a};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&
a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};d.equals=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],m=a[5],q=a[6],r=a[7],G=a[8],w=a[9],v=a[10],u=a[11],z=a[12],y=a[13],A=a[14];a=a[15];var H=b[0],C=b[1],B=b[2],E=b[3],F=b[4],P=b[5],L=b[6],Q=b[7],M=b[8],J=b[9],O=b[10],N=b[11],K=b[12],S=b[13],T=b[14];b=b[15];return Math.abs(c-H)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(H))&&Math.abs(d-C)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&
Math.abs(e-B)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(B))&&Math.abs(f-E)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(g-F)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(m-P)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(q-L)<=l.EPSILON*Math.max(1,Math.abs(q),Math.abs(L))&&Math.abs(r-Q)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(Q))&&Math.abs(G-M)<=l.EPSILON*Math.max(1,Math.abs(G),Math.abs(M))&&Math.abs(w-J)<=l.EPSILON*Math.max(1,Math.abs(w),Math.abs(J))&&Math.abs(v-
O)<=l.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(u-N)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(N))&&Math.abs(z-K)<=l.EPSILON*Math.max(1,Math.abs(z),Math.abs(K))&&Math.abs(y-S)<=l.EPSILON*Math.max(1,Math.abs(y),Math.abs(S))&&Math.abs(A-T)<=l.EPSILON*Math.max(1,Math.abs(A),Math.abs(T))&&Math.abs(a-b)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};d.mul=b;d.sub=f})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(q,d,g){Object.defineProperty(d,
"__esModule",{value:!0});d.mat4f32=g})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(q,d){function g(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d}Object.defineProperty(d,"__esModule",{value:!0});d.create=g;d.clone=function(d){var g=new Float32Array(16);g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];g[4]=d[4];g[5]=d[5];g[6]=d[6];g[7]=d[7];g[8]=d[8];g[9]=d[9];g[10]=d[10];g[11]=d[11];g[12]=d[12];g[13]=d[13];g[14]=d[14];g[15]=d[15];return g};
d.fromValues=function(d,g,b,e,f,q,a,c,h,k,n,p,I,t,x,D){var l=new Float32Array(16);l[0]=d;l[1]=g;l[2]=b;l[3]=e;l[4]=f;l[5]=q;l[6]=a;l[7]=c;l[8]=h;l[9]=k;l[10]=n;l[11]=p;l[12]=I;l[13]=t;l[14]=x;l[15]=D;return l};d.createView=function(d,g){return new Float32Array(d,g,16)};d.IDENTITY=g()})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.vec3f32=g})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(q,d){function g(){return new Float32Array(3)}function l(b,a,c){var d=new Float32Array(3);d[0]=b;d[1]=a;d[2]=c;return d}function m(){return l(1,1,1)}function b(){return l(1,0,0)}function e(){return l(0,1,0)}function f(){return l(0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=g;d.clone=function(b){var a=new Float32Array(3);a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};d.fromValues=l;d.createView=function(b,a){return new Float32Array(b,a,3)};d.zeros=function(){return g()};
d.ones=m;d.unitX=b;d.unitY=e;d.unitZ=f;d.ZEROS=g();d.ONES=m();d.UNIT_X=b();d.UNIT_Y=e();d.UNIT_Z=f()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(q,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.vec4f32=g})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(q,d){function g(){return new Float32Array(4)}function l(a,b,d,e){var c=new Float32Array(4);c[0]=a;c[1]=b;c[2]=d;c[3]=e;return c}
function m(){return l(1,1,1,1)}function b(){return l(1,0,0,0)}function e(){return l(0,1,0,0)}function f(){return l(0,0,1,0)}function r(){return l(0,0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=g;d.clone=function(a){var b=new Float32Array(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};d.fromValues=l;d.createView=function(a,b){return new Float32Array(a,b,4)};d.zeros=function(){return g()};d.ones=m;d.unitX=b;d.unitY=e;d.unitZ=f;d.unitW=r;d.ZEROS=g();d.ONES=m();d.UNIT_X=b();
d.UNIT_Y=e();d.UNIT_Z=f();d.UNIT_W=r()})},"*noref":1}});
define("require exports tslib ../Graphic ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground @dojo/framework/shim/Promise".split(" "),function(q,
d,g,l,m,b,e,f,r,a,c,h,k,n,p,I,t,x,D,G,w,v,u,z,y){function A(){return g.__awaiter(this,void 0,void 0,function(){var a,b,c,d,e,f,h;return g.__generator(this,function(g){switch(g.label){case 0:return[4,Promise.all([new Promise(function(a,b){q(["./webgl"],a,b)}),new Promise(function(a,b){q(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){q(["./2d/engine"],a,b)})])];case 1:return a=g.sent(),b=a[1],c=b.GraphicsView2D,d=b.LabelManager,e=b.MapViewNavigation,f=b.MagnifierView2D,h=a[2].Stage,E=c,F=d,P=
e,L=f,B=h,[2]}})})}function H(a,b,c){a&&(Array.isArray(a)||m.isCollection(a)?0!==a.length&&a.forEach(function(a){return H(a,b,c)}):a instanceof l?b.add(a):c.add(a))}var C=r.getLogger("esri.views.MapView"),B,E,F,P,L;return function(d){function l(a){a=d.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.rootLayerViews=new b({root:a,rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return null}});
a.graphicsView=null;a.highlightOptions=new w;a.magnifier=new x;a.inputManager=new G({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new z;a.rendering=!1;n.initialize();return a}g.__extends(l,d);l.prototype.destroy=function(){this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};Object.defineProperty(l.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,
"textureManager",{get:function(){return this._stage.painter.textureManager},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"navigating",{get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)},enumerable:!0,configurable:!0});l.prototype.toMap=function(a){h.isSupportedScreenPointEvent(a)&&(a=h.createScreenPointFromSupportedEvent(this,a));return d.prototype.toMap.call(this,a)};l.prototype.hitTest=function(a,b){var d=h.isSupportedScreenPointEvent(a)?h.createScreenPointFromSupportedEvent(this,
a):a;if(!this.ready||isNaN(d.x)||isNaN(d.y))return c.resolve({screenPoint:d,results:[]});var e=this.toMap(d);a=[this.graphicsView];a.push.apply(a,this.allLayerViews.toArray().reverse());var f=new Set,g=new Set,k=new Set,l=new Set;b&&(H(b&&b.include,f,k),H(b&&b.exclude,g,l));return c.all(a.map(function(a){return!a||!a.hitTest||0<k.size&&!a.layer||0<k.size&&a.layer&&!k.has(a.layer)||0<l.size&&a.layer&&l.has(a.layer)?null:a.hitTest(d.x,d.y)})).then(function(a){return{screenPoint:d,results:a.filter(function(a){return null!=
a&&(0<f.size?f.has(a):!0)&&(0<g.size?!g.has(a):!0)}).map(function(a){return{mapPoint:e,graphic:a}})}})};l.prototype.takeScreenshot=function(a){return this.ready?this._stage.takeScreenshot(v.toRenderSettings(a,this),this.allLayerViews):c.reject("Map view cannot be used before it is ready")};l.prototype.on=function(a,b,c,e){return(c=this.inputManager&&this.viewEvents.on(a,b,c,e))?c:d.prototype.on.call(this,a,b)};l.prototype.hasEventListener=function(a){return d.prototype.hasEventListener.call(this,
a)||this.viewEvents.hasHandler(a)};l.prototype.whenLayerView=function(a){return d.prototype.whenLayerView.call(this,a)};l.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};l.prototype.whenReady=function(){var a=this;return c.create(function(b){a.ready?b(a):a._resolveWhenReady.push(b)})};l.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};l.prototype.validate=function(){var b=u.check({checkMajorWebPerformanceCaveat:!1});f("safari")&&9>
f("safari")&&(b=new e("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:f("safari")}));return a.isSome(b)?(C.warn("#validate()",b.message),c.reject(b)):A()};l.prototype._startup=function(){var a=this;this.timeline.begin("MapView Startup");d.prototype._startup.call(this);this.graphics.owner=this;var b=new B(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,
debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),c=new E({view:this,graphics:this.graphics,requestUpdateCallback:function(){return a.requestUpdate()}}),e=new P({view:this,animationManager:this.animationManager}),f=new F({view:this});this._magnifierView=new L;this._magnifierView.magnifier=this.magnifier;this._stage=b;this.frameTask.graphicsView=c;this._set("graphicsView",c);this._set("mapViewNavigation",e);this._set("labelManager",f);this.handles.add([this.rootLayerViews.on("change",
function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",b.renderRequested)}),b.on("will-render",function(){return a._set("rendering",b.renderRequested)}),b.on("webgl-error",function(b){return a.fatalError=b.error}),k.init(this,"stationary",function(a){return b.stationary=a},!0),k.init(this,"state.id",function(){return b.state=a.state},!0),k.init(this,"background",function(a){return b.background=a},!0),k.init(this,"magnifier",function(b){return a._magnifierView.magnifier=
b},!0),k.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),k.init(this,"highlightOptions",function(){return b.highlightOptions=a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;this._updateStageChildren();c=this._resolveWhenReady;this._resolveWhenReady=[];c.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")};l.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();
this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;d.prototype._teardown.call(this)};l.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.rootLayerViews.forEach(function(b){a._stage.addChild(b.container)});this._stage.addChild(this.graphicsView.container);
this._stage.addChild(this._magnifierView)};g.__decorate([p.property({type:y,dependsOn:["map.initialViewProperties?.background"]})],l.prototype,"background",null);g.__decorate([p.property()],l.prototype,"graphicsView",void 0);g.__decorate([p.property({type:w})],l.prototype,"highlightOptions",void 0);g.__decorate([p.property({type:x})],l.prototype,"magnifier",void 0);g.__decorate([p.property({readOnly:!0})],l.prototype,"inputManager",void 0);g.__decorate([p.property({readOnly:!0})],l.prototype,"textureManager",
null);g.__decorate([p.property({readOnly:!0})],l.prototype,"mapViewNavigation",void 0);g.__decorate([p.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],l.prototype,"navigating",null);g.__decorate([p.property({type:Boolean,constructOnly:!0})],l.prototype,"supersampleScreenhotsEnabled",void 0);g.__decorate([p.property({type:z})],l.prototype,"ui",void 0);g.__decorate([p.property({readOnly:!0})],l.prototype,"rendering",void 0);g.__decorate([p.property({constructOnly:!0})],l.prototype,
"renderCanvas",void 0);g.__decorate([p.property({constructOnly:!0})],l.prototype,"deactivatedWebGLExtensions",void 0);g.__decorate([p.property({constructOnly:!0})],l.prototype,"debugWebGLExtensions",void 0);return l=g.__decorate([p.subclass("esri.views.MapView")],l)}(I.BreakpointsOwner(t.DOMContainer(D)))});