// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/Transform.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../core/shaderLibrary/util/Camera.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../materials/internal/MaterialUtil ./LineCallout.glsl ./LineCallout.glsl ../../../webgl/Program ../../../webgl/renderState ../../../webgl/renderState @dojo/framework/shim/Promise".split(" "),
function(k,h,d,l,m,n,p,q,e,b,r,t,u,v,w,x,f){Object.defineProperty(h,"__esModule",{value:!0});e=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}d.__extends(a,b);a.prototype.initializeProgram=function(g){var b=a.shader.get(),c=this.configuration,b=b.build({occlusionTestEnabled:c.occlusionTestEnabled,verticalOffsetEnabled:c.verticalOffset,screenSizePerspectiveEnabled:c.screenSizePerspective,depthHudEnabled:c.depthHudEnabled,depthHudAlignStartEnabled:c.depthHudAlignStartEnabled,
screenCenterOffsetUnitsEnabled:c.screenCenterOffsetUnitsEnabled,slicePlaneEnabled:c.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,viewingMode:g.viewingMode});return new w(g.rctx,b.generateSource("vertex"),b.generateSource("fragment"),r.Default3D)};a.prototype.bindPass=function(g,a,c){v.LineCallout.bindUniforms(this.program,a,c);n.VerticalOffset.bindUniforms(this.program,a,c);var b=c.cameraAboveGround?1:-1;this.program.setUniform1i("hudVisibilityTexture",0);g.bindTexture(c.hudVisibilityTexture,
0);this.program.setUniform1f("cameraGroundRelative",b);this.program.setUniform1f("polygonOffset",a.shaderPolygonOffset);this.program.setUniform4fv("viewport",c.viewport);this.program.setUniform1f("perDistancePixelRatio",Math.tan(c.fovY/2)/(c.viewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",c.viewInvTransp);this.program.setUniform2f("pixelToNDC",2/c.viewport[2],2/c.viewport[3]);this.program.setUniform1f("lineSize",Math.ceil(a.size)*(c.pixelRatio||1));t.bindScreenSizePerspective(a.screenSizePerspective,
this.program,"screenSizePerspectiveAlignment")};a.prototype.bindDraw=function(a){m.Transform.bindUniforms(this.program,a);p.Camera.bindUniforms(this.program,a);l.Slice.bindUniformsWithOrigin(this.program,this.configuration,a)};a.prototype.initializePipeline=function(){return this.configuration.depthHudEnabled?f.makePipelineState({depthTest:{func:513},depthWrite:x.defaultDepthWriteParams}):f.makePipelineState({blending:f.separateBlendingParams(1,770,771,771),depthTest:{func:513},colorWrite:f.defaultColorWriteParams})};
a.shader=new q.ReloadableShaderModule(u,function(){return new Promise(function(a,b){k(["./LineCallout.glsl"],a,b)})});return a}(e.ShaderTechnique);h.LineCalloutTechnique=e;e=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;a.occlusionTestEnabled=!0;a.verticalOffset=!1;a.screenSizePerspective=!1;a.depthHudEnabled=!1;a.depthHudAlignStartEnabled=!1;a.screenCenterOffsetUnitsEnabled=0;a.slicePlaneEnabled=!1;return a}d.__extends(a,e);d.__decorate([b.parameter()],a.prototype,"occlusionTestEnabled",
void 0);d.__decorate([b.parameter()],a.prototype,"verticalOffset",void 0);d.__decorate([b.parameter()],a.prototype,"screenSizePerspective",void 0);d.__decorate([b.parameter()],a.prototype,"depthHudEnabled",void 0);d.__decorate([b.parameter()],a.prototype,"depthHudAlignStartEnabled",void 0);d.__decorate([b.parameter({count:2})],a.prototype,"screenCenterOffsetUnitsEnabled",void 0);d.__decorate([b.parameter()],a.prototype,"slicePlaneEnabled",void 0);return a}(b.ShaderTechniqueConfiguration);h.LineCalloutTechniqueConfiguration=
e});