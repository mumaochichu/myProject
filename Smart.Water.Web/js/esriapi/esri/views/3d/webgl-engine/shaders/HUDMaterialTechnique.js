// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/Transform.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../core/shaderLibrary/hud/HUD.glsl ../core/shaderLibrary/hud/HUDOcclusionPass.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../core/shaderLibrary/util/Camera.glsl ../core/shaderLibrary/util/ScreenSizePerspective.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ./HUDMaterial.glsl ./HUDMaterial.glsl ../../../webgl/Program ../../../webgl/renderState ../../../webgl/renderState @dojo/framework/shim/Promise".split(" "),
function(n,h,c,p,q,r,k,t,u,v,l,w,x,f,a,y,z,A,B,m,d){Object.defineProperty(h,"__esModule",{value:!0});f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}c.__extends(b,a);b.prototype.initializeProgram=function(g){var a=b.shader.get(),e=this.configuration,a=a.build({output:e.output,viewingMode:g.viewingMode,occlusionTestEnabled:e.occlusionTestEnabled,signedDistanceFieldEnabled:e.sdf,slicePlaneEnabled:e.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,
debugDrawBorder:e.debugDrawBorder,binaryHighlightOcclusionEnabled:e.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:e.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:e.screenSizePerspective,verticalOffsetEnabled:e.verticalOffset,vvSize:e.vvSize,vvColor:e.vvColor,vvInstancingEnabled:!1});return new B(g.rctx,a.generateSource("vertex"),a.generateSource("fragment"),y.Default3D)};b.prototype.bindPass=function(g,b,a){this.program.setUniform1f("cameraGroundRelative",a.cameraAboveGround?
1:-1);this.program.setUniform1f("perDistancePixelRatio",Math.tan(a.fovY/2)/(a.viewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",a.viewInvTransp);this.program.setUniform1f("polygonOffset",b.shaderPolygonOffset);r.VerticalOffset.bindUniforms(this.program,b,a);w.ScreenSizePerspective.bindUniforms(this.program,b);l.Viewport.bindUniforms(this.program,a);6===this.configuration.output?t.HUDOcclusion.bindUniforms(this.program):(k.HUD.bindUniforms(this.program,a),A.HUDMaterial.bindUniforms(this.program,
b,a),v.VisualVariables.bindUniforms(this.program,b),this.configuration.occlusionTestEnabled&&k.HUD.bindVisibilityTexture(g,this.program,a));4===this.configuration.output&&u.OutputHighlight.bindOutputHighlight(g,this.program,a)};b.prototype.bindDraw=function(a){q.Transform.bindUniforms(this.program,a);l.Camera.bindUniforms(this.program,a);p.Slice.bindUniformsWithOrigin(this.program,this.configuration,a)};b.prototype.initializePipeline=function(){return 4===this.configuration.output?d.makePipelineState({blending:m.separateBlendingParams(1,
1,771,771),polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},colorWrite:d.defaultColorWriteParams}):6===this.configuration.output?d.makePipelineState({depthTest:{func:515},depthWrite:d.defaultDepthWriteParams,colorWrite:d.defaultColorWriteParams}):d.makePipelineState({blending:m.simpleBlendingParams(1,771),polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:this.configuration.depthEnabled?515:519},depthWrite:this.configuration.depthEnabled?
d.defaultDepthWriteParams:void 0,colorWrite:d.defaultColorWriteParams})};Object.defineProperty(b.prototype,"primitiveType",{get:function(){return 6===this.configuration.output?0:4},enumerable:!0,configurable:!0});b.shader=new x.ReloadableShaderModule(z,function(){return new Promise(function(a,b){n(["./HUDMaterial.glsl"],a,b)})});return b}(f.ShaderTechnique);h.HUDMaterialTechnique=f;f=function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a.output=0;a.occlusionTestEnabled=!0;a.sdf=
!1;a.vvSize=!1;a.vvColor=!1;a.verticalOffset=!1;a.screenSizePerspective=!1;a.screenCenterOffsetUnitsEnabled=0;a.debugDrawBorder=!0;a.binaryHighlightOcclusion=!0;a.slicePlaneEnabled=!1;a.polygonOffsetEnabled=!1;a.depthEnabled=!0;return a}c.__extends(b,d);c.__decorate([a.parameter({count:7})],b.prototype,"output",void 0);c.__decorate([a.parameter()],b.prototype,"occlusionTestEnabled",void 0);c.__decorate([a.parameter()],b.prototype,"sdf",void 0);c.__decorate([a.parameter()],b.prototype,"vvSize",void 0);
c.__decorate([a.parameter()],b.prototype,"vvColor",void 0);c.__decorate([a.parameter()],b.prototype,"verticalOffset",void 0);c.__decorate([a.parameter()],b.prototype,"screenSizePerspective",void 0);c.__decorate([a.parameter({count:2})],b.prototype,"screenCenterOffsetUnitsEnabled",void 0);c.__decorate([a.parameter()],b.prototype,"debugDrawBorder",void 0);c.__decorate([a.parameter()],b.prototype,"binaryHighlightOcclusion",void 0);c.__decorate([a.parameter()],b.prototype,"slicePlaneEnabled",void 0);
c.__decorate([a.parameter()],b.prototype,"polygonOffsetEnabled",void 0);c.__decorate([a.parameter()],b.prototype,"depthEnabled",void 0);return b}(a.ShaderTechniqueConfiguration);h.HUDMaterialTechniqueConfiguration=f});