// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/maybe","./FeatureTileFetcher3D","./featureTileQuery3D"],function(c,d,e,f,g){Object.defineProperty(d,"__esModule",{value:!0});c=function(){function a(b){this._capabilities=this.memoryCache=null;var a=b.layerView.layer;this.layerView=b.layerView;this.objectIdField=a.objectIdField;this.returnZ=b.returnZ;this.returnM=b.returnM;b=this.layerView.view.resourceController;this.query=g.createFeatureTileQuery3D(a,b.scheduler);"hasService"in a&&a.hasService&&b&&(this.memoryCache=
b.memoryController.getMemCache(a.uid))}a.prototype.destroy=function(){e.isSome(this.memoryCache)&&this.memoryCache.destroy();this.query.destroy()};a.prototype.createQuery=function(){var b=this.layerView.layer.createQuery();b.outFields=this.layerView.availableFields;b.returnZ=this.returnZ;b.returnM=this.returnM;b.outSpatialReference=this.tilingScheme.spatialReference;return b};Object.defineProperty(a.prototype,"viewingMode",{get:function(){return this.layerView.view.viewingMode},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"tilingScheme",{get:function(){return this.layerView.view.featureTiles.tilingScheme},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"scheduler",{get:function(){var b=this.layerView.view.resourceController;return b?b.scheduler:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"geometryType",{get:function(){return this.layerView.layer.geometryType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fullExtent",
{get:function(){return this.layerView.layer.fullExtent},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"tileMaxRecordCount",{get:function(){return this.layerView.layer.capabilities.query.tileMaxRecordCount},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxRecordCount",{get:function(){return this.layerView.layer.capabilities.query.maxRecordCount},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"capabilities",{get:function(){return e.isSome(this._capabilities)?
this._capabilities:this._capabilities=f.contextCapabilitiesFromLayer(this.layerView.layer)},enumerable:!0,configurable:!0});a.prototype.logFetchError=function(b,a){b.error("#fetchTile()",this.layerView.layer,a&&a.message?a.message:a)};return a}();d.FeatureTileFetcher3DLayerViewContext=c});